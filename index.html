<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Opportunities are reserved for those who are prepared</title>
  <meta name="author" content="蒙长圆">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
  <meta property="og:site_name" content="Opportunities are reserved for those who are prepared"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link href="/favicon.png" rel="icon">
  <link rel="alternate" href="/atom.xml" title="Opportunities are reserved for those who are prepared" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  

</head>


<body>
  <header id="header"><div class="meta inner">
  <h1><a href="/">Opportunities are reserved for those who are prepared</a></h1>
  <h2><a href="/"></a></h2>
  <nav id="main-nav">
    <ul>
      
      <li><a href="/about">About</a></li>
      
      <li><a href="/archives">Archives</a></li>
      
      <li><a href="/atom.xml">RSS</a></li>
      
    </ul>
    <div class="clearfix"></div>
  </nav>
</div>
<div class="clearfix"></div>
</header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper">
  <article class="post">
  <div class="post-content">
    <header>
      
  
    <h1 class="title"><a href="/2017/12/02/text/">test</a></h1>
  

      
        <time datetime="2017-12-02T05:17:02.000Z">2017-12-02</time>
      
    </header>
    <div class="entry">
      
        <a id="more"></a>
<h1 id="正文开始"><a href="#正文开始" class="headerlink" title="正文开始"></a>正文开始</h1><p><center style="font-size: 30px"><code>Vue实例详解与生命周期</code></center></p>
<hr>
<h2 id="二级标题"><a href="#二级标题" class="headerlink" title="二级标题"></a>二级标题</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">console</span>.log(<span class="number">111</span>);</div></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div></pre></td><td class="code"><pre><div class="line">这里是最终敲完的正确代码，可用于比对</div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>/&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"test.js"</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="javascript"></span></div><div class="line">			<span class="function"><span class="keyword">function</span> <span class="title">WhoisE</span> (<span class="params"></span>) </span>&#123;</div><div class="line">				<span class="keyword">var</span> e;</div><div class="line">				e = <span class="built_in">document</span>.getElementsByClassName(<span class="string">"classA"</span>);</div><div class="line">				e = <span class="built_in">document</span>.getElementsByTagName(<span class="string">"div"</span>);</div><div class="line">				e = <span class="built_in">document</span>.getElementById(<span class="string">"d1"</span>);</div><div class="line">				e.setAttribute(<span class="string">"align"</span>,<span class="string">"center"</span>);</div><div class="line">				e.setAttribute(<span class="string">"data-test"</span>,<span class="string">"2"</span>);</div><div class="line">				e.style.fontFamily=<span class="string">"微软雅黑"</span>;</div><div class="line">				e.style.backgroundImage=<span class="string">"url(img/HBuilder.png)"</span>;</div><div class="line">				e.style.cssText=<span class="string">"background-image: url(img/HBuilder.png);"</span>;</div><div class="line">				<span class="keyword">switch</span> (e.style.display)&#123;</div><div class="line">					<span class="keyword">case</span> <span class="string">"-webkit-box"</span>:</div><div class="line">						<span class="keyword">break</span>;</div><div class="line">					<span class="keyword">default</span>:</div><div class="line">						<span class="keyword">break</span>;</div><div class="line">				&#125;</div><div class="line">				<span class="keyword">if</span> (e.getAttribute(<span class="string">"class"</span>)!=<span class="string">"classA"</span>) &#123;</div><div class="line">					e.className=<span class="string">"classA"</span>;</div><div class="line">				&#125;</div><div class="line">				e.innerHTML=<span class="string">"&lt;font color='#CCCCCC'&gt;&lt;/font&gt;"</span>;</div><div class="line">				e = <span class="built_in">document</span>.getElementById(<span class="string">"a1"</span>);</div><div class="line">				e.href=<span class="string">"#a1"</span>;</div><div class="line">				e.target=<span class="string">"_blank"</span>;</div><div class="line">				e = <span class="keyword">new</span> Image();</div><div class="line">				e.src=<span class="string">"img/HBuilder.png"</span>;</div><div class="line">				e = <span class="built_in">window</span>.indexedDB || <span class="built_in">window</span>.webkitIndexedDB || <span class="built_in">window</span>.msIndexedDB || <span class="built_in">window</span>.mozIndexedDB;</div><div class="line">				<span class="keyword">if</span> (<span class="keyword">typeof</span>(e)!=<span class="string">"undefined"</span>) &#123;</div><div class="line">					e.open(<span class="string">"test"</span>);</div><div class="line">				&#125;</div><div class="line">				<span class="keyword">var</span> head = <span class="built_in">document</span>.getElementsByTagName(<span class="string">"head"</span>)[<span class="number">0</span>];</div><div class="line">				<span class="keyword">with</span> (head)&#123;</div><div class="line">					<span class="keyword">var</span> l = lastElementChild;</div><div class="line">					removeChild(l);</div><div class="line">				&#125;</div><div class="line">				e = <span class="built_in">document</span>.createElement(<span class="string">"link"</span>);</div><div class="line">				e.rel=<span class="string">"stylesheet"</span>;</div><div class="line">				e.type=<span class="string">"text/css"</span>;</div><div class="line">				e.href=<span class="string">"test.css"</span>;</div><div class="line">				head.appendChild(e);</div><div class="line">				<span class="keyword">var</span> ss=<span class="string">"e is "</span>;</div><div class="line">				<span class="keyword">if</span> (e.getAttribute(<span class="string">"data-test"</span>)==<span class="literal">null</span>) &#123;</div><div class="line">					ss=ss+e.outerHTML;</div><div class="line">				&#125; <span class="keyword">else</span>&#123;</div><div class="line">					ss=ss+<span class="string">"unknow"</span>;</div><div class="line">				&#125;</div><div class="line">				alert(ss)</div><div class="line">			&#125;</div><div class="line">			addEventListener(<span class="string">"DOMContentLoaded"</span>,<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">				finishLesson(<span class="number">1</span>)</div><div class="line">			&#125;)</div><div class="line">		<span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span></div><div class="line">			body&#123;</div><div class="line">				text-align: center;</div><div class="line">				-webkit-user-select: none;</div><div class="line">			&#125;</div><div class="line">			input[type=button]&#123;</div><div class="line">				width: 90px;</div><div class="line">			&#125;</div><div class="line">			ul&#123;display: none&#125;</div><div class="line">			#d1&#123;</div><div class="line">				font-family: "微软雅黑";</div><div class="line">				background-image: url(img/HBuilder.png)</div><div class="line">			&#125;</div><div class="line">		<span class="tag">&lt;/<span class="name">style</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">type</span>=<span class="string">"text/css"</span> <span class="attr">href</span>=<span class="string">"test.css"</span>/&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"img/HBuilder.png"</span>/&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">br</span> /&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"d1"</span> <span class="attr">class</span>=<span class="string">"classA"</span> <span class="attr">data-test</span> = <span class="string">"1"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#a1"</span> <span class="attr">id</span>=<span class="string">"a1"</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">ul</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">nav</span>&gt;</span>&amp;nbsp;<span class="tag">&lt;/<span class="name">nav</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">name</span>=<span class="string">""</span> <span class="attr">id</span>=<span class="string">""</span> <span class="attr">value</span>=<span class="string">"who is e"</span> <span class="attr">onclick</span>=<span class="string">"WhoisE()"</span> /&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<p>哈哈哈哈哈哈</p>
<h3 id="二级标题子标题"><a href="#二级标题子标题" class="headerlink" title="二级标题子标题"></a>二级标题子标题</h3><p><code>呵呵呵呵呵呵呵</code><br><a href="http://www.baidu.com" target="_blank" rel="external">百度</a></p>
<h1 id="222"><a href="#222" class="headerlink" title="222"></a>222</h1><p><img src="http://p0mpsm12s.bkt.clouddn.com/WechatIMG9.jpeg" alt="“图片描述”"></p>

      
    </div>
      
        
        
      
      <div class="clearfix"></div>
      </footer>
  </div>
</article>





  <article class="post">
  <div class="post-content">
    <header>
      
  
    <h1 class="title"><a href="/2017/11/06/javascript风格指南/">Airbnb JavaScript风格指南（）</a></h1>
  

      
        <time datetime="2017-11-06T02:11:26.000Z">2017-11-06</time>
      
    </header>
    <div class="entry">
      
        <a id="more"></a>
<h1 id="正文部分"><a href="#正文部分" class="headerlink" title="正文部分"></a><code>正文部分</code></h1><center style="font-size: 30px; font-weight:700; color:blue;"><code>JavaScript风格指南</code></center>

<hr>
<p>一种最合理的JavaScript方法</p>
<p>其他风格指南</p>
<ul>
<li>ES5</li>
<li>React</li>
<li>CSS和Sass</li>
<li>Ruby</li>
</ul>
<h2 id="类型"><a href="#类型" class="headerlink" title="类型"></a>类型</h2><p>1.1.1 基本数据类型：当你访问一个基本数据类型时，你直接使用它的值。</p>
<ul>
<li>string</li>
</ul>
<ul>
<li>number</li>
</ul>
<ul>
<li>boolean</li>
</ul>
<ul>
<li>null</li>
</ul>
<ul>
<li>undefined</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> foo = <span class="number">1</span>;</div><div class="line"><span class="keyword">let</span> bar = foo;</div><div class="line"></div><div class="line">bar = <span class="number">9</span>;</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(foo, bar); <span class="comment">// =&gt; 1, 9</span></div></pre></td></tr></table></figure>
<p>1.1.2 复杂：当你访问一个复杂的类型时，你需要引用它的值。</p>
<ul>
<li>object</li>
<li>array</li>
<li>function</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> foo = [<span class="number">1</span>, <span class="number">2</span>];</div><div class="line"><span class="keyword">const</span> bar = foo;</div><div class="line"></div><div class="line">bar[<span class="number">0</span>] = <span class="number">9</span>;</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(foo[<span class="number">0</span>], bar[<span class="number">0</span>]); <span class="comment">// =&gt; 9, 9</span></div></pre></td></tr></table></figure>
<p><a href="#正文部分">⬆回到顶部</a></p>
<h2 id="引用"><a href="#引用" class="headerlink" title="引用"></a>引用</h2><ul>
<li>1.2.1使用<code>const</code>您的所有引用的; 避免使用<code>var</code>。<em>eslint</em>： prefer-const，no-const-assign<br>为什么？这可以确保您不能重新分配您的引用，这可能会导致错误和难以理解的代码。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">var</span> a = <span class="number">1</span>;</div><div class="line"><span class="keyword">var</span> b = <span class="number">2</span>;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> a = <span class="number">1</span>;</div><div class="line"><span class="keyword">const</span> b = <span class="number">2</span>;</div></pre></td></tr></table></figure>
<ul>
<li>1.2.2如果您必须重新分配引用，请使用<code>let</code>而不是<code>var</code>。<em>eslint</em>：no-varjscs：disallowVar<br>为什么？<code>let</code>是块范围的而不是函数范围的<code>var</code>。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">var</span> count = <span class="number">1</span>;</div><div class="line"><span class="keyword">if</span> (<span class="literal">true</span>) &#123;</div><div class="line">  count += <span class="number">1</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>1.2.3注意，两个let和const是块作用域。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// const and let only exist in the blocks they are defined in.</span></div><div class="line">&#123;</div><div class="line">  <span class="keyword">let</span> a = <span class="number">1</span>;</div><div class="line">  <span class="keyword">const</span> b = <span class="number">1</span>;</div><div class="line">&#125;</div><div class="line"><span class="built_in">console</span>.log(a); <span class="comment">// ReferenceError</span></div><div class="line"><span class="built_in">console</span>.log(b); <span class="comment">// ReferenceError</span></div></pre></td></tr></table></figure>
<p><a href="#正文部分">⬆回到顶部</a></p>
<h2 id="对象"><a href="#对象" class="headerlink" title="对象"></a>对象</h2><ul>
<li>1.3.1使用文字语法创建对象。<em>eslint</em>：no-new-object</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> item = <span class="keyword">new</span> <span class="built_in">Object</span>();</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> item = &#123;&#125;;</div></pre></td></tr></table></figure>
<ul>
<li>1.3.2如果您的代码将在脚本上下文中的浏览器中执行，请不要使用保留字作为键。它不会在IE8中工作。更多信息。在ES6模块和服务器端代码中使用它们是可以的。<em>JSCS</em>：disallowIdentifierNames</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> superman = &#123;</div><div class="line">  <span class="attr">default</span>: &#123; <span class="attr">clark</span>: <span class="string">'kent'</span> &#125;,</div><div class="line">  <span class="attr">private</span>: <span class="literal">true</span>,</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> superman = &#123;</div><div class="line">  <span class="attr">defaults</span>: &#123; <span class="attr">clark</span>: <span class="string">'kent'</span> &#125;,</div><div class="line">  <span class="attr">hidden</span>: <span class="literal">true</span>,</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<ul>
<li>1.3.3使用可读的同义词代替保留字。<em>JSCS</em>：disallowIdentifierNames</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> superman = &#123;</div><div class="line">  <span class="attr">class</span>: <span class="string">'alien'</span>,</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> superman = &#123;</div><div class="line">  <span class="attr">klass</span>: <span class="string">'alien'</span>,</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> superman = &#123;</div><div class="line">  <span class="attr">type</span>: <span class="string">'alien'</span>,</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<ul>
<li>1.3.4使用动态属性名称创建对象时使用计算的属性名称。<br>为什么？它们允许你在一个地方定义一个对象的所有属性。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getKey</span>(<span class="params">k</span>) </span>&#123; <span class="keyword">return</span> a key named $&#123;k&#125;; &#125;</div><div class="line"></div><div class="line"><span class="comment">// bad </span></div><div class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">id</span>: <span class="number">5</span>, <span class="attr">name</span>: <span class="string">'San Francisco'</span>&#125;; </div><div class="line">obj[getKey(<span class="string">'enabled'</span>)] = <span class="literal">true</span>;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"> <span class="keyword">const</span> obj = &#123; <span class="attr">id</span>: <span class="number">5</span>, <span class="attr">name</span>: <span class="string">'San Francisco'</span>, [getKey(<span class="string">'enabled'</span>)]: <span class="literal">true</span>&#125;;</div></pre></td></tr></table></figure>
<ul>
<li>1.3.5使用对象方法速记。<em>eslint</em>：object-shorthandjscs：requireEnhancedObjectLiterals</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> atom = &#123;</div><div class="line">  <span class="attr">value</span>: <span class="number">1</span>,</div><div class="line"></div><div class="line">  <span class="attr">addValue</span>: <span class="function"><span class="keyword">function</span> (<span class="params">value</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> atom.value + value;</div><div class="line">  &#125;,</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> atom = &#123;</div><div class="line">  <span class="attr">value</span>: <span class="number">1</span>,</div><div class="line"></div><div class="line">  addValue(value) &#123;</div><div class="line">    <span class="keyword">return</span> atom.value + value;</div><div class="line">  &#125;,</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<ul>
<li>1.3.6使用属性值速记。<em>eslint</em>：object-shorthandjscs：requireEnhancedObjectLiterals<br>为什么？写和描述性较短。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> lukeSkywalker = <span class="string">'Luke Skywalker'</span>;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> obj = &#123;</div><div class="line">  <span class="attr">lukeSkywalker</span>: lukeSkywalker,</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> obj = &#123;</div><div class="line">  lukeSkywalker,</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<ul>
<li>1.3.7 在你的对象声明的开头分组你的速记属性。<br>为什么？判断哪些属性使用简写更容易。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> anakinSkywalker = <span class="string">'Anakin Skywalker'</span>;</div><div class="line"><span class="keyword">const</span> lukeSkywalker = <span class="string">'Luke Skywalker'</span>;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> obj = &#123;</div><div class="line">  <span class="attr">episodeOne</span>: <span class="number">1</span>,</div><div class="line">  <span class="attr">twoJediWalkIntoACantina</span>: <span class="number">2</span>,</div><div class="line">  lukeSkywalker,</div><div class="line">  <span class="attr">episodeThree</span>: <span class="number">3</span>,</div><div class="line">  <span class="attr">mayTheFourth</span>: <span class="number">4</span>,</div><div class="line">  anakinSkywalker,</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> obj = &#123;</div><div class="line">  lukeSkywalker,</div><div class="line">  anakinSkywalker,</div><div class="line">  <span class="attr">episodeOne</span>: <span class="number">1</span>,</div><div class="line">  <span class="attr">twoJediWalkIntoACantina</span>: <span class="number">2</span>,</div><div class="line">  <span class="attr">episodeThree</span>: <span class="number">3</span>,</div><div class="line">  <span class="attr">mayTheFourth</span>: <span class="number">4</span>,</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<ul>
<li>1.3.8 只引用无效标识符的属性。<em>eslint</em>：quote-propsjscs：disallowQuotedKeysInObjects<br>为什么？一般来说，我们认为它在主观上更容易阅读。它提高了语法高亮度，并且也被许多JS引擎更容易地优化。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> bad = &#123;</div><div class="line"><span class="string">'foo'</span>: <span class="number">3</span>,</div><div class="line"><span class="string">'bar'</span>: <span class="number">4</span>,</div><div class="line"><span class="string">'data-blah'</span>: <span class="number">5</span>,</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> good = &#123;</div><div class="line"><span class="attr">foo</span>: <span class="number">3</span>,</div><div class="line"><span class="attr">bar</span>: <span class="number">4</span>,</div><div class="line"><span class="string">'data-blah'</span>: <span class="number">5</span>,</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<ul>
<li>1.3.9不要叫<code>Object.prototype</code>直接的方法，如<code>hasOwnProperty</code>，<code>propertyIsEnumerable</code>和<code>isPrototypeOf</code>。</li>
</ul>
<p>为什么？这些方法可能被所讨论的对象的属性所遮蔽 - 考虑<code>{ hasOwnProperty: false }</code>- 或者，对象可能是一个空对象<code>（Object.create(null)）</code>。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="built_in">console</span>.log(object.hasOwnProperty(key));</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.prototype.hasOwnProperty.call(object, key));</div><div class="line"></div><div class="line"><span class="comment">// best</span></div><div class="line"><span class="keyword">const</span> has = <span class="built_in">Object</span>.prototype.hasOwnProperty; <span class="comment">// cache the lookup once, in module scope.</span></div><div class="line"><span class="comment">/* or */</span></div><div class="line"><span class="keyword">const</span> has = <span class="built_in">require</span>(<span class="string">'has'</span>);</div><div class="line">…</div><div class="line"><span class="built_in">console</span>.log(has.call(object, key));</div></pre></td></tr></table></figure>
<p><a href="#正文部分">⬆回到顶部</a></p>

      
    </div>
      
        
        
      
      <div class="clearfix"></div>
      </footer>
  </div>
</article>





  <article class="post">
  <div class="post-content">
    <header>
      
  
    <h1 class="title"><a href="/2017/09/20/webpack从入门到真实项目配置/">webpack：从入门到真实项目配置</a></h1>
  

      
        <time datetime="2017-09-20T15:42:26.000Z">2017-09-20</time>
      
    </header>
    <div class="entry">
      
        <a id="more"></a>
<h1 id="正文部分"><a href="#正文部分" class="headerlink" title="正文部分"></a><code>正文部分</code></h1><left style="font-size: 30px; font-weight:700"><code>webpack：从入门到真实项目配置</code></left>

<hr>
<blockquote>
<p>该文使用的 Webpack 版本为 3.6.0，本文分两部分。第一步是简单的使用 webpack，第二部分通过一个真实项目来配置 webpack，没有使用任何的 CLI，都是一步步配置直到完成生产代码的打包。<a href="https://github.com/Modify01/webpack" target="_blank" rel="external">这是本项目对应的仓库</a>，每个小节基本都对应了一次 commit。</p>
</blockquote>
<p>这是本文的大纲，如果觉得有兴趣你就可以往下看了</p>
<p><img src="http://orzuutv5f.bkt.clouddn.com/webpack%E4%BB%8B%E7%BB%8D.png" alt="webpack介绍"></p>
<h2 id="Webpack-到底是什么"><a href="#Webpack-到底是什么" class="headerlink" title="Webpack 到底是什么"></a>Webpack 到底是什么</h2><p>自从出现模块化以后，大家可以将原本一坨代码分离到个个模块中，但是由此引发了一个问题。每个 JS 文件都需要从服务器去拿，由此会导致加载速度变慢。Webpack 最主要的目的就是为了解决这个问题，将所有小文件打包成一个或多个大文件，官网的图片很好的诠释了这个事情，除此之外，Webpack 也是一个能让你使用各种前端新技术的工具。</p>
<p><img src="http://orzuutv5f.bkt.clouddn.com/webpack%E5%88%B0%E5%BA%95%E6%98%AF%E4%BB%80%E4%B9%88.png" alt="webpack到底是什么"></p>
<h2 id="简单使用"><a href="#简单使用" class="headerlink" title="简单使用"></a>简单使用</h2><p>安装</p>
<p>在命令行中依次输入</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">mkdir  webpack-demo</div><div class="line">cd webpack-demo</div><div class="line"><span class="comment">// 创建 package.json，这里会问一些问题，直接回车跳过就行</span></div><div class="line">npm init </div><div class="line"><span class="comment">//  推荐这个安装方式，当然你也安装在全局环境下</span></div><div class="line"><span class="comment">// 这种安装方式会将 webpack 放入 devDependencies 依赖中</span></div><div class="line">npm install --save-dev webpack</div></pre></td></tr></table></figure>
<p>然后按照下图创建文件</p>
<p><img src="http://orzuutv5f.bkt.clouddn.com/webpack%E6%96%87%E4%BB%B6%E5%A4%B9%E7%BB%93%E6%9E%84.png" alt="webpack文件夹结构"></p>
<p>在以下文件写入代码</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// sum.js</span></div><div class="line"><span class="comment">// 这个模块化写法是 node 环境独有的，浏览器原生不支持使用</span></div><div class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> a + b</div><div class="line">&#125;</div><div class="line"><span class="comment">// index.js</span></div><div class="line"><span class="keyword">var</span> sum = <span class="built_in">require</span>(<span class="string">'./sum'</span>)</div><div class="line"><span class="built_in">console</span>.log(sum(<span class="number">1</span>, <span class="number">2</span>))</div></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./build/bundle.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<p>现在我们开始配置最简单的 webpack，首先创建 <code>webpack.config.js</code> 文件，然后写入如下代码</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 自带的库</span></div><div class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</div><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">    <span class="attr">entry</span>:  <span class="string">'./app/index.js'</span>, <span class="comment">// 入口文件</span></div><div class="line">    output: &#123;</div><div class="line">      <span class="attr">path</span>: path.resolve(__dirname, <span class="string">'build'</span>), <span class="comment">// 必须使用绝对地址，输出文件夹</span></div><div class="line">      filename: <span class="string">"bundle.js"</span> <span class="comment">// 打包后输出文件的文件名</span></div><div class="line">    &#125;</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
<p>现在我们可以开始使用 webpack 了，在命令行中输入</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">node_modules/.bin/webpack</div></pre></td></tr></table></figure>
<p>没问题的话你应该可以看到类似的样子</p>
<p><img src="http://orzuutv5f.bkt.clouddn.com/webpack%E8%BF%90%E8%A1%8C%E7%BB%93%E6%9E%9C.png" alt="webpack运行结果"></p>
<p>可以发现原本两个 JS 文件只有 100B，但是打包后却增长到 2.66KB，这之中 webpack 肯定做了什么事情，我们去 bundle.js 文件中看看。</p>
<p>把代码简化以后，核心思路是这样的</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> array = [(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> sum = array[<span class="number">1</span>]</div><div class="line">        <span class="built_in">console</span>.log(sum(<span class="number">1</span>, <span class="number">2</span>))</div><div class="line">    &#125;),</div><div class="line">    (<span class="function"><span class="keyword">function</span> (<span class="params">a,b</span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> a + b</div><div class="line">    &#125;)</div><div class="line">]</div><div class="line">array[<span class="number">0</span>]() <span class="comment">// -&gt; 3</span></div></pre></td></tr></table></figure>
<p>因为 <code>module.export</code> 浏览器是不支持的，所以 <code>webpack</code> 将代码改成浏览器能识别的样子。现在将 <code>index.html</code> 文件在浏览器中打开，应该也可以看到正确的 <code>log</code>。</p>
<p>我们之前是在文件夹中安装的 <code>webpack</code>，每次要输入 <code>node_modules/.bin/webpack</code> 过于繁琐，可以在 <code>package.json</code> 如下修改</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="string">"scripts"</span>: &#123;</div><div class="line">    <span class="string">"start"</span>: <span class="string">"webpack"</span></div><div class="line">  &#125;,</div></pre></td></tr></table></figure>
<p>然后再次执行 <code>npm run start</code>，可以发现和之前的效果是相同的。简单的使用到此为止，接下来我们来探索 <code>webpack</code> 更多的功能。</p>
<h2 id="Loader"><a href="#Loader" class="headerlink" title="Loader"></a>Loader</h2><p>Loader 是 webpack 一个很强大功能，这个功能可以让你使用很多新的技术。</p>
<h3 id="Babel"><a href="#Babel" class="headerlink" title="Babel"></a>Babel</h3><p>Babel 可以让你使用 ES2015/16/17 写代码而不用顾忌浏览器的问题，Babel 可以帮你转换代码。首先安装必要的几个 Babel 库</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm i --save-dev babel-loader babel-core babel-preset-env</div></pre></td></tr></table></figure>
<p>先介绍下我们安装的三个库</p>
<ul>
<li>babel-loader 用于让 webpack 知道如何运行 babel</li>
<li>babel-core 可以看做编译器，这个库知道如何解析代码</li>
<li>babel-preset-env 这个库可以根据环境的不同转换代码</li>
</ul>
<p>接下来更改 <code>webpack-config.js</code> 中的代码</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line"><span class="comment">// ......</span></div><div class="line">    <span class="built_in">module</span>: &#123;</div><div class="line">        <span class="attr">rules</span>: [</div><div class="line">            &#123;</div><div class="line">            <span class="comment">// js 文件才使用 babel</span></div><div class="line">                test: <span class="regexp">/\.js$/</span>,</div><div class="line">             <span class="comment">// 使用哪个 loader</span></div><div class="line">                use: <span class="string">'babel-loader'</span>,</div><div class="line">            <span class="comment">// 不包括路径</span></div><div class="line">                exclude: <span class="regexp">/node_modules/</span></div><div class="line">            &#125;</div><div class="line">        ]</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>配置 Babel 有很多方式，这里推荐使用 .babelrc 文件管理。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ..babelrc</span></div><div class="line">&#123;</div><div class="line">    <span class="string">"presets"</span>: [<span class="string">"babel-preset-env"</span>]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>现在将之前 JS 的代码改成 ES6 的写法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// sum.js</span></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> (a, b) =&gt; &#123;</div><div class="line">    <span class="keyword">return</span> a + b</div><div class="line">&#125;</div><div class="line"><span class="comment">// index.js</span></div><div class="line"><span class="keyword">import</span> sum <span class="keyword">from</span> <span class="string">'./sum'</span></div><div class="line"><span class="built_in">console</span>.log(sum(<span class="number">1</span>, <span class="number">2</span>))</div></pre></td></tr></table></figure>
<p>执行 <code>npm run start</code>，再观察 <code>bundle.js</code> 中的代码，可以发现代码被转换过了，并且同样可以正常 输出3。</p>
<p>当然 Babel 远不止这些功能，有兴趣的可以前往官网自己探索。</p>
<h3 id="处理图片"><a href="#处理图片" class="headerlink" title="处理图片"></a>处理图片</h3><p>这一小节我们将使用 <code>url-loader</code> 和 <code>file-loader</code>，这两个库不仅可以处理图片，还有其他的功能，有兴趣的可以自行学习。</p>
<p>先安装库</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm i --save-dev url-loader file-loader</div></pre></td></tr></table></figure>
<p>创建一个 <code>images</code> 文件夹，放入两张图片，并且在 <code>app</code> 文件夹下创建一个 js 文件处理图片<br>，目前的文件夹结构如图</p>
<p><img src="http://orzuutv5f.bkt.clouddn.com/webpack%E5%A4%84%E7%90%86%E5%9B%BE%E7%89%87%E7%9A%84%E6%96%87%E4%BB%B6%E5%A4%B9%E7%BB%93%E6%9E%84.png" alt="webpack图片文件夹结构"></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// addImage.js</span></div><div class="line"><span class="keyword">let</span> smallImg = <span class="built_in">document</span>.createElement(<span class="string">'img'</span>)</div><div class="line"><span class="comment">// 必须 require 进来</span></div><div class="line">smallImg.src = <span class="built_in">require</span>(<span class="string">'../images/small.jpeg'</span>)</div><div class="line"><span class="built_in">document</span>.body.appendChild(smallImg)</div><div class="line"></div><div class="line"><span class="keyword">let</span> bigImg = <span class="built_in">document</span>.createElement(<span class="string">'img'</span>)</div><div class="line">bigImg.src = <span class="built_in">require</span>(<span class="string">'../images/big.jpeg'</span>)</div><div class="line"><span class="built_in">document</span>.body.appendChild(bigImg)</div></pre></td></tr></table></figure>
<p>接下来修改 <code>webpack.config.js</code> 代码</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line"><span class="comment">// ...</span></div><div class="line">    <span class="built_in">module</span>: &#123;</div><div class="line">        <span class="attr">rules</span>: [</div><div class="line">            <span class="comment">// ...</span></div><div class="line">            &#123;</div><div class="line">            <span class="comment">// 图片格式正则</span></div><div class="line">                test: <span class="regexp">/\.(png|jpe?g|gif|svg)(\?.*)?$/</span>,</div><div class="line">                <span class="attr">use</span>: [</div><div class="line">                  &#123;</div><div class="line">                    <span class="attr">loader</span>: <span class="string">'url-loader'</span>,</div><div class="line">                    <span class="comment">// 配置 url-loader 的可选项</span></div><div class="line">                    options: &#123;</div><div class="line">                    <span class="comment">// 限制 图片大小 10000B，小于限制会将图片转换为 base64格式</span></div><div class="line">                      limit: <span class="number">10000</span>,</div><div class="line">                    <span class="comment">// 超出限制，创建的文件格式</span></div><div class="line">                    <span class="comment">// build/images/[图片名].[hash].[图片格式]</span></div><div class="line">                      name: <span class="string">'images/[name].[hash].[ext]'</span></div><div class="line">                   &#125;</div><div class="line">                  &#125;</div><div class="line">                ]</div><div class="line">            &#125;</div><div class="line">        ]</div><div class="line">    &#125;</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
<p>运行 <code>npm run start</code>，打包成功如下图</p>
<p><img src="http://orzuutv5f.bkt.clouddn.com/webpack%E5%AF%B9%E4%BA%8E%E5%9B%BE%E7%89%87%E7%9A%84%E5%A4%84%E7%90%86%E7%BB%93%E6%9E%9C.png" alt="webpack对于图片处理结果"></p>
<p>可以发现大的图片被单独提取了出来，小的图片打包进了 <code>bundle.js</code> 中。</p>
<p>在浏览器中打开 HTML 文件，发现小图确实显示出来了，但是却没有看到大图，打开开发者工具栏，可以发现我们大图的图片路径是有问题的，所以我们又要修改 <code>webpack.config.js</code> 代码了。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">    <span class="attr">entry</span>:  <span class="string">'./app/index.js'</span>, <span class="comment">// 入口文件</span></div><div class="line">    output: &#123;</div><div class="line">      <span class="attr">path</span>: path.resolve(__dirname, <span class="string">'build'</span>), <span class="comment">// 必须使用绝对地址，输出文件夹</span></div><div class="line">      filename: <span class="string">"bundle.js"</span>, <span class="comment">// 打包后输出文件的文件名</span></div><div class="line">      publicPath: <span class="string">'build/'</span> <span class="comment">// 知道如何寻找资源</span></div><div class="line">    &#125;</div><div class="line">    <span class="comment">// ...</span></div><div class="line">  &#125;</div></pre></td></tr></table></figure>
<p>最后运行下 <code>npm run start</code>，编译成功了，再次刷新下页面，可以发现这次大图被正确的显示了。下一小节我们将介绍如何处理 CSS 文件。</p>
<h3 id="处理-CSS-文件"><a href="#处理-CSS-文件" class="headerlink" title="处理 CSS 文件"></a>处理 CSS 文件</h3><p>添加 <code>styles</code> 文件夹，新增 <code>addImage.css</code> 文件，然后在该文件中新增代码</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">img &#123;</div><div class="line">    <span class="attr">border</span>: <span class="number">5</span>px black solid;</div><div class="line">&#125;</div><div class="line">.test &#123;<span class="attr">border</span>: <span class="number">5</span>px black solid;&#125;</div></pre></td></tr></table></figure>
<p>这一小节我们先使用 <code>css-loader</code> 和 <code>style-loader</code> 库。前者可以让 CSS 文件也支持 <code>impost</code>，并且会解析 CSS 文件，后者可以将解析出来的 CSS 通过标签的形式插入到 HTML 中，所以后面依赖前者。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm i --save-dev css-loader style-loader</div></pre></td></tr></table></figure>
<p>首先修改 <code>addImage.js</code> 文件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> <span class="string">'../styles/addImage.css'</span></div><div class="line"></div><div class="line"><span class="keyword">let</span> smallImg = <span class="built_in">document</span>.createElement(<span class="string">'img'</span>)</div><div class="line">smallImg.src = <span class="built_in">require</span>(<span class="string">'../images/small.jpeg'</span>)</div><div class="line"><span class="built_in">document</span>.body.appendChild(smallImg)</div><div class="line"></div><div class="line"><span class="comment">// let bigImg = document.createElement('img')</span></div><div class="line"><span class="comment">// bigImg.src = require('../images/big.jpeg')</span></div><div class="line"><span class="comment">// document.body.appendChild(bigImg)</span></div></pre></td></tr></table></figure>
<p>然后修改 <code>webpack.config.js</code> 代码</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line"><span class="comment">// ...</span></div><div class="line">    <span class="built_in">module</span>: &#123;</div><div class="line">      <span class="attr">rules</span>: [</div><div class="line">        &#123;</div><div class="line">            <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</div><div class="line">            <span class="attr">use</span>: [<span class="string">'style-loader'</span>,</div><div class="line">                &#123;</div><div class="line">                    <span class="attr">loader</span>: <span class="string">'css-loader'</span>,</div><div class="line">                    <span class="attr">options</span>: &#123;</div><div class="line">                        <span class="attr">modules</span>: <span class="literal">true</span></div><div class="line">                       &#125;</div><div class="line">                &#125;</div><div class="line">            ]</div><div class="line">        &#125;,</div><div class="line">      ]</div><div class="line">    &#125;</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
<p>运行下 <code>npm run start</code>，然后刷新页面，可以发现图片被正确的加上了边框，现在我们来看一下 HTML 的文件结构</p>
<p><img src="http://orzuutv5f.bkt.clouddn.com/webpack%E5%A4%84%E7%90%86css%E8%BF%87%E7%A8%8B.png" alt="webpack处理css过程"></p>
<p>从上图可以看到，我们在 <code>addImage.css</code> 文件中写的代码被加入到了 <code>style</code> 标签中，并且因为我们开启了 CSS 模块化的选项，所以 <code>.test</code> 被转成了唯一的哈希值，这样就解决了 CSS 的变量名重复问题。</p>
<p>但是将 CSS 代码整合进 JS 文件也是有弊端的，大量的 CSS 代码会造成 JS 文件的大小变大，操作 DOM 也会造成性能上的问题，所以接下来我们将使用 <code>extract-text-webpack-plugin</code> 插件将 CSS 文件打包为一个单独文件</p>
<p>首先安装 <code>npm i --save-dev extract-text-webpack-plugin</code></p>
<p>然后修改 <code>webpack.config.js</code> 代码</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> ExtractTextPlugin = <span class="built_in">require</span>(<span class="string">"extract-text-webpack-plugin"</span>)</div><div class="line"></div><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line"><span class="comment">// ....</span></div><div class="line">    <span class="built_in">module</span>: &#123;</div><div class="line">      <span class="attr">rules</span>: [</div><div class="line">        &#123;</div><div class="line">          <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</div><div class="line">          <span class="comment">// 写法和之前基本一致</span></div><div class="line">          loader: ExtractTextPlugin.extract(&#123;</div><div class="line">          <span class="comment">// 必须这样写，否则会报错</span></div><div class="line">                fallback: <span class="string">'style-loader'</span>,</div><div class="line">                <span class="attr">use</span>: [&#123;</div><div class="line">                    <span class="attr">loader</span>: <span class="string">'css-loader'</span>,</div><div class="line">                    <span class="attr">options</span>: &#123; </div><div class="line">                        <span class="attr">modules</span>: <span class="literal">true</span></div><div class="line">                    &#125;</div><div class="line">                &#125;]</div><div class="line">            &#125;)</div><div class="line">        ]</div><div class="line">        &#125;</div><div class="line">      ]</div><div class="line">    &#125;,</div><div class="line">    <span class="comment">// 插件列表</span></div><div class="line">    plugins: [</div><div class="line">    <span class="comment">// 输出的文件路径</span></div><div class="line">      <span class="keyword">new</span> ExtractTextPlugin(<span class="string">"css/[name].[hash].css"</span>)</div><div class="line">    ]</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
<p>运行下 <code>npm run start</code>，可以发现 CSS 文件被单独打包出来了</p>
<p><img src="http://orzuutv5f.bkt.clouddn.com/webpack%E7%9A%84css%E6%96%87%E4%BB%B6%E6%89%93%E5%8C%85.png" alt="webpack的css文件打包"></p>
<p>但是这时候刷新页面会发现图片的边框消失了，那是因为我们的 HTML 文件没有引用新的 CSS 文件，所以这里需要我们手动引入下，在下面的章节我们会通过插件的方式自动引入新的文件。</p>
<p>接下来，会用一个项目来继续我们的 webpack 学习，在这之前，先 clone 一下项目。该项目原地址是 <a href="https://github.com/StephenGrider/WebpackProject" target="_blank" rel="external">这里</a>，因为使用的 webpack 版本太低，并且依赖的库也有点问题，故我将项目拷贝了过来并修改了几个库的版本号。</p>
<p>请依次按照以下代码操作</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">git clone https:<span class="comment">//github.com/KieSun/webpack-demo.git</span></div><div class="line">cd webpack-demo</div><div class="line"><span class="comment">// 切换到 0.1 标签上并创建一个新分支</span></div><div class="line">git checkout -b demo <span class="number">0.1</span></div><div class="line">cd project</div><div class="line">npm i </div><div class="line"><span class="comment">// 查看分支是否为 demo，没问题的话就可以进行下一步</span></div></pre></td></tr></table></figure>
<h2 id="如何在项目中使用-webpack"><a href="#如何在项目中使用-webpack" class="headerlink" title="如何在项目中使用 webpack"></a>如何在项目中使用 webpack</h2><p>项目中已经配置了很简单的 babel 和 webpack，直接运行 <code>npm run start</code> 即可</p>
<p><img src="http://orzuutv5f.bkt.clouddn.com/%E5%A6%82%E4%BD%95%E5%9C%A8%E9%A1%B9%E7%9B%AE%E4%B8%AD%E4%BD%BF%E7%94%A8webpack.png" alt="如何在项目中使用webpack"></p>
<p>这时候你会发现这个 bundle.js 居然有这么大，这肯定是不能接受的，所以接下来章节的主要目的就是将单个文件拆分为多个文件，优化项目。</p>
<h2 id="分离代码"><a href="#分离代码" class="headerlink" title="分离代码"></a>分离代码</h2><p>先让我们考虑下缓存机制。对于代码中依赖的库很少会去主动升级版本，但是我们自己的代码却每时每刻都在变更，所以我们可以考虑将依赖的库和自己的代码分割开来，这样用户在下一次使用应用时就可以尽量避免重复下载没有变更的代码，那么既然要将依赖代码提取出来，我们需要变更下入口和出口的部分代码。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 这是 packet.json 中 dependencies 下的</span></div><div class="line"><span class="keyword">const</span> VENOR = [<span class="string">"faker"</span>,</div><div class="line">  <span class="string">"lodash"</span>,</div><div class="line">  <span class="string">"react"</span>,</div><div class="line">  <span class="string">"react-dom"</span>,</div><div class="line">  <span class="string">"react-input-range"</span>,</div><div class="line">  <span class="string">"react-redux"</span>,</div><div class="line">  <span class="string">"redux"</span>,</div><div class="line">  <span class="string">"redux-form"</span>,</div><div class="line">  <span class="string">"redux-thunk"</span></div><div class="line">]</div><div class="line"></div><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line"><span class="comment">// 之前我们都是使用了单文件入口</span></div><div class="line"><span class="comment">// entry 同时也支持多文件入口，现在我们有两个入口</span></div><div class="line"><span class="comment">// 一个是我们自己的代码，一个是依赖库的代码</span></div><div class="line">  entry: &#123;</div><div class="line">  <span class="comment">// bundle 和 vendor 都是自己随便取名的，会映射到 [name] 中</span></div><div class="line">    bundle: <span class="string">'./src/index.js'</span>,</div><div class="line">    <span class="attr">vendor</span>: VENOR</div><div class="line">  &#125;,</div><div class="line">  <span class="attr">output</span>: &#123;</div><div class="line">    <span class="attr">path</span>: path.join(__dirname, <span class="string">'dist'</span>),</div><div class="line">    <span class="attr">filename</span>: <span class="string">'[name].js'</span></div><div class="line">  &#125;,</div><div class="line">  <span class="comment">// ...</span></div><div class="line"> &#125;</div></pre></td></tr></table></figure>
<p>现在我们 build 一下，看看是否有惊喜出现</p>
<p><img src="http://orzuutv5f.bkt.clouddn.com/webpack%E9%A1%B9%E7%9B%AE%E5%88%86%E7%A6%BB.png" alt="webpack项目分离"></p>
<p><img src="http://orzuutv5f.bkt.clouddn.com/webpack%E9%A1%B9%E7%9B%AE%E5%88%86%E7%A6%BB%EF%BC%882%EF%BC%89.png" alt=""></p>
<p>真的有惊喜。。为什么 bundle 文件大小压根没变。这是因为 bundle 中也引入了依赖库的代码,刚才的步骤并没有抽取 bundle 中引入的代码，接下来让我们学习如何将共同的代码抽取出来。</p>
<h3 id="抽取共同代码"><a href="#抽取共同代码" class="headerlink" title="抽取共同代码"></a>抽取共同代码</h3><p>在这小节我们使用 webpack 自带的插件 <code>CommonsChunkPlugin</code>。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line"><span class="comment">//...</span></div><div class="line">  output: &#123;</div><div class="line">    <span class="attr">path</span>: path.join(__dirname, <span class="string">'dist'</span>),</div><div class="line">    <span class="comment">// 既然我们希望缓存生效，就应该每次在更改代码以后修改文件名</span></div><div class="line">    <span class="comment">// [chunkhash]会自动根据文件是否更改而更换哈希</span></div><div class="line">    filename: <span class="string">'[name].[chunkhash].js'</span></div><div class="line">  &#125;,</div><div class="line">  <span class="attr">plugins</span>: [</div><div class="line">    <span class="keyword">new</span> webpack.optimize.CommonsChunkPlugin(&#123;</div><div class="line">    <span class="comment">// vendor 的意义和之前相同</span></div><div class="line">    <span class="comment">// manifest文件是将每次打包都会更改的东西单独提取出来，保证没有更改的代码无需重新打包，这样可以加快打包速度</span></div><div class="line">      names: [<span class="string">'vendor'</span>, <span class="string">'manifest'</span>],</div><div class="line">      <span class="comment">// 配合 manifest 文件使用</span></div><div class="line">      minChunks: <span class="literal">Infinity</span></div><div class="line">    &#125;)</div><div class="line">  ]</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>当我们重新 build 以后，会发现 bundle 文件很明显的减小了体积</p>
<p><img src="http://orzuutv5f.bkt.clouddn.com/webpack%E6%8A%BD%E5%8F%96%E5%85%B1%E5%90%8C%E4%BB%A3%E7%A0%81.png" alt="webpack抽取公共代码"></p>
<p>但是我们使用哈希来保证缓存的同时会发现每次 build 都会生成不一样的文件，这时候我们引入另一个插件来帮助我们删除不需要的文件。</p>
<blockquote>
<p>npm install –save-dev clean-webpack-plugin</p>
</blockquote>
<p>然后修改配置文件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line"><span class="comment">//...</span></div><div class="line">  plugins: [</div><div class="line">  <span class="comment">// 只删除 dist 文件夹下的 bundle 和 manifest 文件</span></div><div class="line">    <span class="keyword">new</span> CleanWebpackPlugin([<span class="string">'dist/bundle.*.js'</span>,<span class="string">'dist/manifest.*.js'</span>], &#123;</div><div class="line">    <span class="comment">// 打印 log</span></div><div class="line">      verbose: <span class="literal">true</span>,</div><div class="line">      <span class="comment">// 删除文件</span></div><div class="line">      dry: <span class="literal">false</span></div><div class="line">    &#125;),</div><div class="line">  ]</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>然后 build 的时候会发现以上文件被删除了。</p>
<p>因为我们现在将文件已经打包成三个 JS 了，以后也许会更多，每次新增 JS 文件我们都需要手动在 HTML 中新增标签，现在我们可以通过一个插件来自动完成这个功能。</p>
<blockquote>
<p>npm install html-webpack-plugin –save-dev</p>
</blockquote>
<p>然后修改配置文件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line"><span class="comment">//...</span></div><div class="line">  plugins: [</div><div class="line">  <span class="comment">// 我们这里将之前的 HTML 文件当做模板</span></div><div class="line">  <span class="comment">// 注意在之前 HTML 文件中请务必删除之前引入的 JS 文件</span></div><div class="line">    <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</div><div class="line">      <span class="attr">template</span>: <span class="string">'index.html'</span></div><div class="line">    &#125;)</div><div class="line">  ]</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>执行 build 操作会发现同时生成了 HTML 文件，并且已经自动引入了 JS 文件</p>
<p><img src="http://orzuutv5f.bkt.clouddn.com/webpack%E5%88%A0%E9%99%A4%E5%A4%9A%E4%BD%99%E7%9A%84%E4%BB%A3%E7%A0%81.png" alt=""></p>
<h3 id="按需加载代码"><a href="#按需加载代码" class="headerlink" title="按需加载代码"></a>按需加载代码</h3><p>在这一小节我们将学习如何按需加载代码，在这之前的 vendor 入口我发现忘记加入 router 这个库了，大家可以加入这个库并且重新 build 下，会发现 bundle 只有不到 300KB 了。</p>
<p>现在我们的 bundle 文件包含了我们全部的自己代码。但是当用户访问我们的首页时，其实我们根本无需让用户加载除了首页以外的代码，这个优化我们可以通过路由的异步加载来完成。</p>
<p>现在修改 <code>src/router.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 注意在最新版的 V4路由版本中，更改了按需加载的方式，如果安装了 V4版，可以自行前往官网学习</span></div><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</div><div class="line"><span class="keyword">import</span> &#123; Router, Route, IndexRoute, hashHistory &#125; <span class="keyword">from</span> <span class="string">'react-router'</span>;</div><div class="line"></div><div class="line"><span class="keyword">import</span> Home <span class="keyword">from</span> <span class="string">'./components/Home'</span>;</div><div class="line"><span class="keyword">import</span> ArtistMain <span class="keyword">from</span> <span class="string">'./components/artists/ArtistMain'</span>;</div><div class="line"></div><div class="line"><span class="keyword">const</span> rootRoute = &#123;</div><div class="line">  <span class="attr">component</span>: Home,</div><div class="line">  <span class="attr">path</span>: <span class="string">'/'</span>,</div><div class="line">  <span class="attr">indexRoute</span>: &#123; <span class="attr">component</span>: ArtistMain &#125;,</div><div class="line">  <span class="attr">childRoutes</span>: [</div><div class="line">    &#123;</div><div class="line">      <span class="attr">path</span>: <span class="string">'artists/new'</span>,</div><div class="line">      getComponent(location, cb) &#123;</div><div class="line">        System.import(<span class="string">'./components/artists/ArtistCreate'</span>)</div><div class="line">          .then(<span class="function"><span class="params">module</span> =&gt;</span> cb(<span class="literal">null</span>, <span class="built_in">module</span>.default))</div><div class="line">      &#125;</div><div class="line">    &#125;,</div><div class="line">    &#123;</div><div class="line">      <span class="attr">path</span>: <span class="string">'artists/:id/edit'</span>,</div><div class="line">      getComponent(location, cb) &#123;</div><div class="line">        System.import(<span class="string">'./components/artists/ArtistEdit'</span>)</div><div class="line">          .then(<span class="function"><span class="params">module</span> =&gt;</span> cb(<span class="literal">null</span>, <span class="built_in">module</span>.default))</div><div class="line">      &#125;</div><div class="line">    &#125;,</div><div class="line">    &#123;</div><div class="line">      <span class="attr">path</span>: <span class="string">'artists/:id'</span>,</div><div class="line">      getComponent(location, cb) &#123;</div><div class="line">        System.import(<span class="string">'./components/artists/ArtistDetail'</span>)</div><div class="line">          .then(<span class="function"><span class="params">module</span> =&gt;</span> cb(<span class="literal">null</span>, <span class="built_in">module</span>.default))</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  ]</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> Routes = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">  <span class="keyword">return</span> (</div><div class="line">    <span class="xml"><span class="tag">&lt;<span class="name">Router</span> <span class="attr">history</span>=<span class="string">&#123;hashHistory&#125;</span> <span class="attr">routes</span>=<span class="string">&#123;rootRoute&#125;</span> /&gt;</span></span></div><div class="line">  );</div><div class="line">&#125;;</div><div class="line"></div><div class="line">export default Routes;</div></pre></td></tr></table></figure>
<p>然后执行 build 命令，可以发现我们的 bundle 文件又瘦身了，并且新增了几个文件</p>
<p><img src="http://orzuutv5f.bkt.clouddn.com/webpack%E6%8C%89%E9%9C%80%E5%8A%A0%E8%BD%BD.png" alt="webpack按需加载代码"></p>
<p>将 HTML 文件在浏览器中打开，当点击路由跳转时，可以在开发者工具中的 Network 一栏中看到加载了一个 JS 文件。</p>
<p>首页</p>
<p><img src="https://user-gold-cdn.xitu.io/2017/9/17/a5a9c677fc770d8a99bbed9e79fdd730?imageView2/0/w/1280/h/960" alt="webpack首页加载"></p>
<p>点击右上角 Random Artist 以后</p>
<p><img src="https://user-gold-cdn.xitu.io/2017/9/17/93e7c9d86eeb7076b6f5e7434b0012e9?imageView2/0/w/1280/h/960" alt="点击右上角 Random Artist 以后"></p>
<h2 id="自动刷新"><a href="#自动刷新" class="headerlink" title="自动刷新"></a>自动刷新</h2><p>每次更新代码都需要执行依次 build，并且还要等上一会很麻烦，这一小节介绍如何使用自动刷新的功能。</p>
<p>首先安装插件</p>
<blockquote>
<p>npm i –save-dev webpack-dev-server</p>
</blockquote>
<p>然后修改 packet.json 文件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="string">"scripts"</span>: &#123;</div><div class="line">    <span class="string">"build"</span>: <span class="string">"webpack"</span>,</div><div class="line">    <span class="string">"dev"</span>: <span class="string">"webpack-dev-server --open"</span></div><div class="line">  &#125;,</div></pre></td></tr></table></figure>
<p>现在直接执行 <code>npm run dev</code> 可以发现浏览器自动打开了一个空的页面，并且在命令行中也多了新的输出</p>
<p><img src="https://user-gold-cdn.xitu.io/2017/9/17/43f5b70bd82152ce21379120dfab8d71?imageView2/0/w/1280/h/960" alt=""></p>
<p>等待编译完成以后，修改 JS 或者 CSS 文件，可以发现 webpack 自动帮我们完成了编译，并且只更新了需要更新的代码</p>
<p><img src="https://user-gold-cdn.xitu.io/2017/9/17/7a5769363d0782abc59902d370c52472?imageView2/0/w/1280/h/960" alt=""></p>
<p>但是每次重新刷新页面对于 debug 来说很不友好，这时候就需要用到模块热替换了。但是因为项目中使用了 React，并且 Vue 或者其他框架都有自己的一套 hot-loader，所以这里就略过了，有兴趣的可以自己学习下。</p>
<h2 id="生成生产环境代码"><a href="#生成生产环境代码" class="headerlink" title="生成生产环境代码"></a>生成生产环境代码</h2><p>现在我们可以将之前所学和一些新加的插件整合在一起，build 生产环境代码。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm i --save-dev url-loader optimize-css-assets-webpack-plugin file-loader extract-text-webpack-plugin</div></pre></td></tr></table></figure>
<p>修改 webpack 配置</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>);</div><div class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</div><div class="line"><span class="keyword">var</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>)</div><div class="line"><span class="keyword">var</span> CleanWebpackPlugin = <span class="built_in">require</span>(<span class="string">'clean-webpack-plugin'</span>)</div><div class="line"><span class="keyword">var</span> ExtractTextPlugin = <span class="built_in">require</span>(<span class="string">'extract-text-webpack-plugin'</span>)</div><div class="line"><span class="keyword">var</span> OptimizeCSSPlugin = <span class="built_in">require</span>(<span class="string">'optimize-css-assets-webpack-plugin'</span>)</div><div class="line"></div><div class="line"><span class="keyword">const</span> VENOR = [<span class="string">"faker"</span>,</div><div class="line">  <span class="string">"lodash"</span>,</div><div class="line">  <span class="string">"react"</span>,</div><div class="line">  <span class="string">"react-dom"</span>,</div><div class="line">  <span class="string">"react-input-range"</span>,</div><div class="line">  <span class="string">"react-redux"</span>,</div><div class="line">  <span class="string">"redux"</span>,</div><div class="line">  <span class="string">"redux-form"</span>,</div><div class="line">  <span class="string">"redux-thunk"</span>,</div><div class="line">  <span class="string">"react-router"</span></div><div class="line">]</div><div class="line"></div><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">  <span class="attr">entry</span>: &#123;</div><div class="line">    <span class="attr">bundle</span>: <span class="string">'./src/index.js'</span>,</div><div class="line">    <span class="attr">vendor</span>: VENOR</div><div class="line">  &#125;,</div><div class="line">  <span class="comment">// 如果想修改 webpack-dev-server 配置，在这个对象里面修改</span></div><div class="line">  devServer: &#123;</div><div class="line">    <span class="attr">port</span>: <span class="number">8081</span></div><div class="line">  &#125;,</div><div class="line">  <span class="attr">output</span>: &#123;</div><div class="line">    <span class="attr">path</span>: path.join(__dirname, <span class="string">'dist'</span>),</div><div class="line">    <span class="attr">filename</span>: <span class="string">'[name].[chunkhash].js'</span></div><div class="line">  &#125;,</div><div class="line">  <span class="attr">module</span>: &#123;</div><div class="line">    <span class="attr">rules</span>: [&#123;</div><div class="line">        <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</div><div class="line">        <span class="attr">use</span>: <span class="string">'babel-loader'</span></div><div class="line">      &#125;,</div><div class="line">      &#123;</div><div class="line">        <span class="attr">test</span>: <span class="regexp">/\.(png|jpe?g|gif|svg)(\?.*)?$/</span>,</div><div class="line">        <span class="attr">use</span>: [&#123;</div><div class="line">            <span class="attr">loader</span>: <span class="string">'url-loader'</span>,</div><div class="line">            <span class="attr">options</span>: &#123;</div><div class="line">                <span class="attr">limit</span>: <span class="number">10000</span>,</div><div class="line">                <span class="attr">name</span>: <span class="string">'images/[name].[hash:7].[ext]'</span></div><div class="line">            &#125;</div><div class="line">        &#125;]</div><div class="line">    &#125;,</div><div class="line">    &#123;</div><div class="line">        <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</div><div class="line">        <span class="attr">loader</span>: ExtractTextPlugin.extract(&#123;</div><div class="line">            <span class="attr">fallback</span>: <span class="string">'style-loader'</span>,</div><div class="line">            <span class="attr">use</span>: [&#123;</div><div class="line">            <span class="comment">// 这边其实还可以使用 postcss 先处理下 CSS 代码</span></div><div class="line">                loader: <span class="string">'css-loader'</span></div><div class="line">            &#125;]</div><div class="line">        &#125;)</div><div class="line">    &#125;,</div><div class="line">    ]</div><div class="line">  &#125;,</div><div class="line">  <span class="attr">plugins</span>: [</div><div class="line">    <span class="keyword">new</span> webpack.optimize.CommonsChunkPlugin(&#123;</div><div class="line">      <span class="attr">name</span>: [<span class="string">'vendor'</span>, <span class="string">'manifest'</span>],</div><div class="line">      <span class="attr">minChunks</span>: <span class="literal">Infinity</span></div><div class="line">    &#125;),</div><div class="line">    <span class="keyword">new</span> CleanWebpackPlugin([<span class="string">'dist/*.js'</span>], &#123;</div><div class="line">      <span class="attr">verbose</span>: <span class="literal">true</span>,</div><div class="line">      <span class="attr">dry</span>: <span class="literal">false</span></div><div class="line">    &#125;),</div><div class="line">    <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</div><div class="line">      <span class="attr">template</span>: <span class="string">'index.html'</span></div><div class="line">    &#125;),</div><div class="line">    <span class="comment">// 生成全局变量</span></div><div class="line">    <span class="keyword">new</span> webpack.DefinePlugin(&#123;</div><div class="line">      <span class="string">"process.env.NODE_ENV"</span>: <span class="built_in">JSON</span>.stringify(<span class="string">"process.env.NODE_ENV"</span>)</div><div class="line">    &#125;),</div><div class="line">    <span class="comment">// 分离 CSS 代码</span></div><div class="line">    <span class="keyword">new</span> ExtractTextPlugin(<span class="string">"css/[name].[contenthash].css"</span>),</div><div class="line">    <span class="comment">// 压缩提取出的 CSS，并解决ExtractTextPlugin分离出的 JS 重复问题</span></div><div class="line">    <span class="keyword">new</span> OptimizeCSSPlugin(&#123;</div><div class="line">      <span class="attr">cssProcessorOptions</span>: &#123;</div><div class="line">        <span class="attr">safe</span>: <span class="literal">true</span></div><div class="line">      &#125;</div><div class="line">    &#125;),</div><div class="line">    <span class="comment">// 压缩 JS 代码</span></div><div class="line">    <span class="keyword">new</span> webpack.optimize.UglifyJsPlugin(&#123;</div><div class="line">      <span class="attr">compress</span>: &#123;</div><div class="line">        <span class="attr">warnings</span>: <span class="literal">false</span></div><div class="line">      &#125;</div><div class="line">    &#125;)</div><div class="line">  ]</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>修改 packet.json 文件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="string">"scripts"</span>: &#123;</div><div class="line">    <span class="string">"build"</span>: <span class="string">"NODE_ENV=production webpack -p"</span>,</div><div class="line">    <span class="string">"dev"</span>: <span class="string">"webpack-dev-server --open"</span></div><div class="line">  &#125;</div></pre></td></tr></table></figure>
<p>执行 <code>npm run build</code></p>
<p><img src="https://user-gold-cdn.xitu.io/2017/9/17/ff8acf374946ee6db118117f22ec48f5?imageView2/0/w/1280/h/960" alt=""></p>
<p>可以看到我们在经历了这么多步以后，将 bundle 缩小到了只有 27.1KB，像 vendor 这种常用的库我们一般可以使用 CDN 的方式外链进来。</p>
<h2 id="补充"><a href="#补充" class="headerlink" title="补充"></a>补充</h2><p>webpack 配置上有些实用的小点在上文没有提到，统一在这里提一下。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">  <span class="attr">resolve</span>: &#123;</div><div class="line">  <span class="comment">// 文件扩展名，写明以后就不需要每个文件写后缀</span></div><div class="line">    extensions: [<span class="string">'.js'</span>, <span class="string">'.css'</span>, <span class="string">'.json'</span>],</div><div class="line"> <span class="comment">// 路径别名，比如这里可以使用 css 指向 static/css 路径</span></div><div class="line">    alias: &#123;</div><div class="line">      <span class="string">'@'</span>: resolve(<span class="string">'src'</span>),</div><div class="line">      <span class="string">'css'</span>: resolve(<span class="string">'static/css'</span>)</div><div class="line">    &#125;</div><div class="line">  &#125;,</div><div class="line">  <span class="comment">// 生成 source-map，用于打断点，这里有好几个选项</span></div><div class="line">  devtool: <span class="string">'#cheap-module-eval-source-map'</span>,</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h2><p>如果你是跟着本文一个个步骤敲下来的，那么大部分的 webpack 配置你应该都是可以看懂了，并且自己应该也知道如何去配置。谢谢大家看到这里，<a href="https://github.com/Modify01/webpack" target="_blank" rel="external">这是本项目对应的仓库</a>，每个小节基本都对应了一次 commit。</p>
<p>文章较长，有错误也难免，如果你发现了任何问题或者我有任何表述的不明白的地方，都可以留言给我。</p>

      
    </div>
      
        
        
      
      <div class="clearfix"></div>
      </footer>
  </div>
</article>





  <article class="post">
  <div class="post-content">
    <header>
      
  
    <h1 class="title"><a href="/2017/09/11/js 的正则表达式/">js 的正则表达式</a></h1>
  

      
        <time datetime="2017-09-11T02:17:02.000Z">2017-09-11</time>
      
    </header>
    <div class="entry">
      
        <a id="more"></a>
<h1 id="正文开始"><a href="#正文开始" class="headerlink" title="正文开始"></a>正文开始</h1><center style="font-size: 30px"><code>js 的正则表达式</code></center>

<hr>
<h2 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h2><blockquote>
<p>一种几乎可以在所有的程序设计语言里和所有的计算机平台上使用的文字处理工具。它可以用来查找特定的信息（搜索），也可以用来查找并编辑特定的信息（替换）。<br>核心是 匹配，匹配位置或者匹配字符</p>
</blockquote>
<p>先简单的介绍一下语法:</p>
<h2 id="基本元字符"><a href="#基本元字符" class="headerlink" title="基本元字符"></a>基本元字符</h2><p>1, <code>.</code>： 匹配除了换行符之外的任何单个字符</p>
<p>2,  <code>\</code>： 在非特殊字符之前的反斜杠表示下一个字符是特殊的，不能从字面上解释。例如，没有前<code>\</code>的<code>&#39;b&#39;</code>通常匹配小写<code>&#39;b&#39;</code>，无论它们出现在哪里。如果加了’\’,这个字符变成了一个特殊意义的字符，反斜杠也可以将其后的特殊字符，转义为字面量。例如，模式 <code>/a*/</code> 代表会匹配 0 个或者多个 a。相反，模式 <code>/a\*/</code> 将 <code>&#39;*&#39;</code> 的特殊性移除，从而可以匹配像 <code>&quot;a*&quot;</code> 这样的字符串。</p>
<p>3,  <code>|</code> ： 逻辑或操作符</p>
<p>4,  <code>[]</code> ：定义一个字符集合，匹配字符集合中的一个字符，在字符集合里面像 .，\这些字符都表示其本身</p>
<p>5,  <code>[^]</code>：对上面一个集合取非</p>
<p>6,  <code>-</code> ：定义一个区间，例如<code>[A-Z]</code>，其首尾字符在 ASCII 字符集里面</p>
<h2 id="数量元字符"><a href="#数量元字符" class="headerlink" title="数量元字符"></a>数量元字符</h2><p>1, <code>{m,n}</code> ：匹配前面一个字符至少 m 次至多 n 次重复，还有<code>{m}</code>表示匹配 m 次，<code>{m,}</code>表示至少 m 次</p>
<p>2, <code>+</code> ： 匹配前面一个表达式一次或者多次，相当于 <code>{1,}</code>，记忆方式追加<code>(+)</code>，起码得有一次</p>
<p>3, <code>*</code>： 匹配前面一个表达式零次或者多次，相当于 <code>{0,}</code>，记忆方式乘法<code>(*)</code>，可以一次都没有</p>
<p>4, <code>?</code> ： 单独使用匹配前面一个表达式零次或者一次，相当于 <code>{0,1}</code>，记忆方式，有吗？，有<code>(1)</code>或者没有<code>(1)</code>，如果跟在任何量词<code>*,+,?,{}</code>后面的时候将会使量词变为非贪婪模式（尽量匹配少的字符），默认是使用贪婪模式。比如对 “123abc” 应用 <code>/\d+/</code> 将会返回 “123”，如果使用 <code>/\d+?/</code>,那么就只会匹配到 “1”。</p>
<h2 id="位置元字符"><a href="#位置元字符" class="headerlink" title="位置元字符"></a>位置元字符</h2><p>1, <code>^</code>： 单独使用匹配表达式的开始</p>
<p>2, <code>\$</code> ： 匹配表达式的结束</p>
<p>3, <code>\b</code>：匹配单词边界</p>
<p>4, <code>\B</code>：匹配非单词边界</p>
<p>5, <code>(?=p)</code>：匹配 p 前面的位置</p>
<p>6, <code>(?!p)</code>：匹配不是 p 前面的位置</p>
<h2 id="特殊元字符"><a href="#特殊元字符" class="headerlink" title="特殊元字符"></a>特殊元字符</h2><p>1, <code>\d</code>：<code>[0-9]</code>，表示一位数字，记忆方式 digit</p>
<p>2, <code>\D</code>：<code>[^0-9]</code>，表示一位非数字</p>
<p>3, <code>\s</code>：<code>[\t\v\n\r\f]</code>，表示空白符，包括空格，水平制表符<code>（\t）</code>，垂直制表符<code>（\v）</code>，换行符<code>（\n）</code>，回车符<code>（\r）</code>，换页符<code>（\f）</code>，记忆方式 space character</p>
<p>4, <code>\S</code>：<code>[^\t\v\n\r\f]</code>，表示非空白符</p>
<p>5, <code>\w</code>：<code>[0-9a-zA-Z]</code>，表示数字大小写字母和下划线，记忆方式 word</p>
<p>6, <code>\W</code>：<code>[^0-9a-zA-Z]</code>，表示非单词字符</p>
<h2 id="标志字符"><a href="#标志字符" class="headerlink" title="标志字符"></a>标志字符</h2><p>1, <code>g</code> : 全局搜索 记忆方式global<br>2, <code>i</code> ：不区分大小写 记忆方式 ignore<br>3, <code>m</code> ：多行搜索</p>
<h2 id="在-js-中的使用"><a href="#在-js-中的使用" class="headerlink" title="在 js 中的使用"></a><center style="font-size: 30px"><code>在 js 中的使用</code></center></h2><hr>
<h3 id="支持正则的-String-对象的方法"><a href="#支持正则的-String-对象的方法" class="headerlink" title="支持正则的 String 对象的方法"></a>支持正则的 String 对象的方法</h3><h4 id="1-search"><a href="#1-search" class="headerlink" title="1. search"></a>1. search</h4><p>search 接受一个正则作为参数，如果参入的参数不是正则会隐式的使用 <code>new RegExp(obj)</code>将其转换成一个正则，返回匹配到子串的起始位置，匹配不到返回-1</p>
<h4 id="2-match"><a href="#2-match" class="headerlink" title="2. match"></a>2. match</h4><p>接受参数和上面的方法一致。返回值是依赖传入的正则是否包含 g ，如果没有 g 标识，那么 match 方法对 string 做一次匹配，如果没有找到任何匹配的文本时，match 会返回 null ，否则，会返回一个数组，数组第 0 个元素包含匹配到的文本，其余元素放的是正则捕获的文本，数组还包含两个对象，index 表示匹配文本在字符串中的位置，input 表示被解析的原始字符串。如果有 g 标识，则返回一个数组，包含每一次的匹配结果。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> str = <span class="string">'For more information, see Chapter 3.4.5.1'</span>;</div><div class="line"><span class="keyword">var</span> re = <span class="regexp">/see (chapter \d+(\.\d)*)/i</span>;</div><div class="line"><span class="keyword">var</span> found = str.match(re);</div><div class="line"><span class="built_in">console</span>.log(found);</div><div class="line"><span class="comment">// (3) ["see Chapter 3.4.5.1", "Chapter 3.4.5.1", ".1", index: 22, input: "For more information, see Chapter 3.4.5.1"]</span></div><div class="line"><span class="comment">// 0:"see Chapter 3.4.5.1"</span></div><div class="line"><span class="comment">// 1:"Chapter 3.4.5.1"</span></div><div class="line"><span class="comment">// 2:".1"</span></div><div class="line"><span class="comment">// index:22</span></div><div class="line"><span class="comment">// input:"For more information, see Chapter 3.4.5.1"</span></div><div class="line"><span class="comment">// length:3</span></div><div class="line"><span class="comment">// __proto__:Array(0)</span></div><div class="line"></div><div class="line"><span class="comment">// 'see Chapter 3.4.5.1' 是整个匹配。</span></div><div class="line"><span class="comment">// 'Chapter 3.4.5.1' 被'(chapter \d+(\.\d)*)'捕获。</span></div><div class="line"><span class="comment">// '.1' 是被'(\.\d)'捕获的最后一个值。</span></div><div class="line"><span class="comment">// 'index' 属性(22) 是整个匹配从零开始的索引。</span></div><div class="line"><span class="comment">// 'input' 属性是被解析的原始字符串。</span></div></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> str = <span class="string">'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz'</span>;</div><div class="line"><span class="keyword">var</span> regexp = <span class="regexp">/[A-E]/gi</span>;</div><div class="line"><span class="keyword">var</span> matches_array = str.match(regexp);</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(matches_array);</div><div class="line"><span class="comment">// ['A', 'B', 'C', 'D', 'E', 'a', 'b', 'c', 'd', 'e']</span></div></pre></td></tr></table></figure>
<h4 id="3-replace"><a href="#3-replace" class="headerlink" title="3. replace"></a>3. replace</h4><p>接受两个参数，第一个是要被替换的文本，可以是正则也可以是字符串，如果是字符串的时候不会被转换成正则，而是作为检索的直接量文本。第二个是替换成的文本，可以是字符串或者函数，字符串可以使用一些特殊的变量来替代前面捕获到的子串</p>
<table>
<thead>
<tr>
<th style="text-align:center">变量名</th>
<th style="text-align:center">代表的值</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">  $$</td>
<td style="text-align:center">插入一个 “$”。                          </td>
</tr>
<tr>
<td style="text-align:center">  $&amp;</td>
<td style="text-align:center">插入匹配的子串。                         </td>
</tr>
<tr>
<td style="text-align:center">  $`</td>
<td style="text-align:center">插入当前匹配的子串左边的内容。                         </td>
</tr>
<tr>
<td style="text-align:center">  $’</td>
<td style="text-align:center">插入当前匹配的子串右边的内容。                          </td>
</tr>
<tr>
<td style="text-align:center">  $n</td>
<td style="text-align:center">第一个参数是RegExp对象,n是个小于100的非负整数,那么插入第n个括号匹配的字符串。</td>
</tr>
</tbody>
</table>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> re = <span class="regexp">/(\w+)\s(\w+)/</span>;</div><div class="line"><span class="keyword">var</span> str = <span class="string">"John Smith"</span>;</div><div class="line"><span class="keyword">var</span> newstr = str.replace(re, <span class="string">"$2, $1"</span>);</div><div class="line"><span class="comment">// Smith, John</span></div><div class="line"><span class="built_in">console</span>.log(newstr);</div></pre></td></tr></table></figure>
<p>如果是函数的话，函数入参如下，返回替换成的文本</p>
<table>
<thead>
<tr>
<th style="text-align:left">变量名</th>
<th style="text-align:center">代表的值</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">  match</td>
<td style="text-align:center">匹配的子串。（对应于上述的$&amp;。）                          </td>
</tr>
<tr>
<td style="text-align:left">  p1,p2,…</td>
<td style="text-align:center">假如replace()方法的第一个参数是一个RegExp 对象，则代表第n个括号匹配的字符串。（对应于上述的$1，$2等。）                         </td>
</tr>
<tr>
<td style="text-align:left">  offset</td>
<td style="text-align:center">匹配到的子字符串在原字符串中的偏移量。（比如，如果原字符串是“abcd”，匹配到的子字符串是“bc”，那么这个参数将是1）                                                 </td>
</tr>
<tr>
<td style="text-align:left">  string</td>
<td style="text-align:center">被匹配的原字符串。</td>
</tr>
</tbody>
</table>

      
    </div>
      
        
        
      
      <div class="clearfix"></div>
      </footer>
  </div>
</article>





  <article class="post">
  <div class="post-content">
    <header>
      
  
    <h1 class="title"><a href="/2017/09/07/剖析Vue原理&实现双向绑定MVVM/">剖析Vue原理&amp;实现双向绑定MVVM</a></h1>
  

      
        <time datetime="2017-09-07T06:36:02.000Z">2017-09-07</time>
      
    </header>
    <div class="entry">
      
        <a id="more"></a>
<h1 id="正文开始"><a href="#正文开始" class="headerlink" title="正文开始"></a>正文开始</h1><center style="font-size: 30px"><code>剖析Vue原理&amp;实现双向绑定MVVM</code></center>

<blockquote>
<p>本文能帮你做什么？<br>1、了解vue的双向数据绑定原理以及核心代码模块<br>2、缓解好奇心的同时了解如何实现双向绑定<br>为了便于说明原理与实现，本文相关代码主要摘自<a href="https://github.com/vuejs/vue" target="_blank" rel="external">vue</a>源码, 并进行了简化改造，相对较简陋，并未考虑到数组的处理、数据的循环依赖等，也难免存在一些问题，欢迎大家指正。不过这些并不会影响大家的阅读和理解，相信看完本文后对大家在阅读vue源码的时候会更有帮助&lt;<br>本文所有相关代码均在github上面可找到 <a href="https://github.com/DMQ/mvvm" target="_blank" rel="external">https://github.com/DMQ/mvvm</a></p>
</blockquote>
<p>相信大家对mvvm双向绑定应该都不陌生了，一言不合上代码，下面先看一个本文最终实现的效果吧，和vue一样的语法，如果还不了解双向绑定，猛戳<a href="https://www.google.com.hk/search?q=%E5%8F%8C%E5%90%91%E7%BB%91%E5%AE%9A" target="_blank" rel="external">Google</a></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"mvvm-app"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">v-model</span>=<span class="string">"word"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123;word&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">v-on:click</span>=<span class="string">"sayHi"</span>&gt;</span>change model<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./js/observer.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./js/watcher.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./js/compile.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./js/mvvm.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="keyword">var</span> vm = <span class="keyword">new</span> MVVM(&#123;</div><div class="line">        <span class="attr">el</span>: <span class="string">'#mvvm-app'</span>,</div><div class="line">        <span class="attr">data</span>: &#123;</div><div class="line">            <span class="attr">word</span>: <span class="string">'Hello World!'</span></div><div class="line">        &#125;,</div><div class="line">        <span class="attr">methods</span>: &#123;</div><div class="line">            <span class="attr">sayHi</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">                <span class="keyword">this</span>.word = <span class="string">'Hi, everybody!'</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;);</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<p>效果:<br><img src="http://orzuutv5f.bkt.clouddn.com/%E5%8F%8C%E5%90%91%E6%95%B0%E6%8D%AE%E7%BB%91%E5%AE%9A%E6%95%88%E6%9E%9C.gif" alt=""></p>
<h2 id="几种实现双向绑定的做法"><a href="#几种实现双向绑定的做法" class="headerlink" title="几种实现双向绑定的做法"></a>几种实现双向绑定的做法</h2><p>目前几种主流的mvc(vm)框架都实现了单向数据绑定，而我所理解的双向数据绑定无非就是在单向绑定的基础上给可输入元素（input、textare等）添加了change(input)事件，来动态修改model和 view，并没有多高深。所以无需太过介怀是实现的单向或双向绑定。</p>
<p>实现数据绑定的做法有大致如下几种：</p>
<blockquote>
<p>发布者-订阅者模式（backbone.js）</p>
<p>脏值检查（angular.js） </p>
<p>数据劫持（vue.js）</p>
</blockquote>
 <left style="font-size: 14px;font-weight: bold;">发布者-订阅者模式:</left>一般通过sub, pub的方式实现数据和视图的绑定监听，更新数据方式通常做法是<code>vm.set(&#39;property&#39;, value)</code>，这里有篇文章讲的比较详细，有兴趣可点<a href="http://www.html-js.com/article/Study-of-twoway-data-binding-JavaScript-talk-about-JavaScript-every-day" target="_blank" rel="external">这里</a><br><br>这种方式现在毕竟太low了，我们更希望通过 <code>vm.property = value</code> 这种方式更新数据，同时自动更新视图，于是有了下面两种方式<br><br><left style="font-size: 14px;font-weight: bold;">脏值检查:</left> angular.js 是通过脏值检测的方式比对数据是否有变更，来决定是否更新视图，最简单的方式就是通过 <code>setInterval()</code> 定时轮询检测数据变动，当然Google不会这么low，angular只有在指定的事件触发时进入脏值检测，大致如下：<br><br>- DOM事件，譬如用户输入文本，点击按钮等。( ng-click )<br>- XHR响应事件 ( $http )<br>- 浏览器Location变更事件 ( $location )<br>- Timer事件( $timeout , $interval )<br>- 执行 $digest() 或 $apply()<br>- 数据劫持: vue.js 则是采用数据劫持结合发布者-订阅者模式的方式，通过Object.defineProperty()来劫持各个属性的setter，getter，在数据变动时发布消息给订阅者，触发相应的监听回调。<br><br><left style="font-size: 14px;font-weight: bold;">数据劫持:</left> vue.js 则是采用数据劫持结合发布者-订阅者模式的方式，通过<code>Object.defineProperty()</code>来劫持各个属性的<code>setter</code>，<code>getter</code>，在数据变动时发布消息给订阅者，触发相应的监听回调。<br><br>## 思路整理<br><br>已经了解到vue是通过数据劫持的方式来做数据绑定的，其中最核心的方法便是通过<code>Object.defineProperty()</code>来实现对属性的劫持，达到监听数据变动的目的，无疑这个方法是本文中最重要、最基础的内容之一，如果不熟悉defineProperty，猛戳<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty" target="_blank" rel="external">这里</a><br><left style="font-size: 16px;font-weight: bold;">整理了一下，要实现mvvm的双向绑定，就必须要实现以下几点：</left>

<p>1, 实现一个数据监听器Observer，能够对数据对象的所有属性进行监听，如有变动可拿到最新值并通知订阅者<br>2, 实现一个指令解析器Compile，对每个元素节点的指令进行扫描和解析，根据指令模板替换数据，以及绑定相应的更新函数<br>3, 实现一个Watcher，作为连接Observer和Compile的桥梁，能够订阅并收到每个属性变动的通知，执行指令绑定的相应回调函数，从而更新视图<br>4, mvvm入口函数，整合以上三者</p>
<p>上述流程如图所示：<br><img src="http://orzuutv5f.bkt.clouddn.com/mvvm%E6%95%B0%E6%8D%AE%E7%BB%91%E5%AE%9A%E6%B5%81%E7%A8%8B%E5%9B%BE.png" alt="数据绑定流程图"></p>
<h2 id="实现Observer"><a href="#实现Observer" class="headerlink" title="实现Observer"></a>实现Observer</h2><p>ok, 思路已经整理完毕，也已经比较明确相关逻辑和模块功能了，let’s do it<br>我们知道可以利用<code>Obeject.defineProperty()</code>来监听属性变动<br>那么将需要observe的数据对象进行递归遍历，包括子属性对象的属性，都加上<code>setter</code>和<code>getter</code><br>这样的话，给这个对象的某个值赋值，就会触发<code>setter</code>，那么就能监听到了数据变化。。相关代码可以是这样：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> data = &#123;<span class="attr">name</span>: <span class="string">'kindeng'</span>&#125;;</div><div class="line">observe(data);</div><div class="line">data.name = <span class="string">'dmq'</span>; <span class="comment">// 哈哈哈，监听到值变化了 kindeng --&gt; dmq</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">observe</span>(<span class="params">data</span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span> (!data || <span class="keyword">typeof</span> data !== <span class="string">'object'</span>) &#123;</div><div class="line">        <span class="keyword">return</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">// 取出所有属性遍历</span></div><div class="line">    <span class="built_in">Object</span>.keys(data).forEach(<span class="function"><span class="keyword">function</span>(<span class="params">key</span>) </span>&#123;</div><div class="line">        defineReactive(data, key, data[key]);</div><div class="line">    &#125;);</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">defineReactive</span>(<span class="params">data, key, val</span>) </span>&#123;</div><div class="line">    observe(val); <span class="comment">// 监听子属性</span></div><div class="line">    <span class="built_in">Object</span>.defineProperty(data, key, &#123;</div><div class="line">        <span class="attr">enumerable</span>: <span class="literal">true</span>, <span class="comment">// 可枚举</span></div><div class="line">        configurable: <span class="literal">false</span>, <span class="comment">// 不能再define</span></div><div class="line">        get: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="keyword">return</span> val;</div><div class="line">        &#125;,</div><div class="line">        <span class="attr">set</span>: <span class="function"><span class="keyword">function</span>(<span class="params">newVal</span>) </span>&#123;</div><div class="line">            <span class="built_in">console</span>.log(<span class="string">'哈哈哈，监听到值变化了 '</span>, val, <span class="string">' --&gt; '</span>, newVal);</div><div class="line">            val = newVal;</div><div class="line">        &#125;</div><div class="line">    &#125;);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>这样我们已经可以监听每个数据的变化了，那么监听到变化之后就是怎么通知订阅者了，所以接下来我们需要实现一个消息订阅器，很简单，维护一个数组，用来收集订阅者，数据变动触发notify，再调用订阅者的update方法，代码改善之后是这样：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ... 省略</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">defineReactive</span>(<span class="params">data, key, val</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> dep = <span class="keyword">new</span> Dep();</div><div class="line">    observe(val); <span class="comment">// 监听子属性</span></div><div class="line"></div><div class="line">    <span class="built_in">Object</span>.defineProperty(data, key, &#123;</div><div class="line">        <span class="comment">// ... 省略</span></div><div class="line">        set: <span class="function"><span class="keyword">function</span>(<span class="params">newVal</span>) </span>&#123;</div><div class="line">            <span class="keyword">if</span> (val === newVal) <span class="keyword">return</span>;</div><div class="line">            <span class="built_in">console</span>.log(<span class="string">'哈哈哈，监听到值变化了 '</span>, val, <span class="string">' --&gt; '</span>, newVal);</div><div class="line">            val = newVal;</div><div class="line">            dep.notify(); <span class="comment">// 通知所有订阅者</span></div><div class="line">        &#125;</div><div class="line">    &#125;);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Dep</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">this</span>.subs = [];</div><div class="line">&#125;</div><div class="line">Dep.prototype = &#123;</div><div class="line">    <span class="attr">addSub</span>: <span class="function"><span class="keyword">function</span>(<span class="params">sub</span>) </span>&#123;</div><div class="line">        <span class="keyword">this</span>.subs.push(sub);</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">notify</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">this</span>.subs.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">sub</span>) </span>&#123;</div><div class="line">            sub.update();</div><div class="line">        &#125;);</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>那么问题来了，谁是订阅者？怎么往订阅器添加订阅者？<br>没错，上面的思路整理中我们已经明确订阅者应该是Watcher, 而且<code>var dep = new Dep();</code>是在 <code>defineReactive</code>方法内部定义的，所以想通过dep添加订阅者，就必须要在闭包内操作，所以我们可以在 <code>getter</code>里面动手脚：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Observer.js</span></div><div class="line"><span class="comment">// ...省略</span></div><div class="line"><span class="built_in">Object</span>.defineProperty(data, key, &#123;</div><div class="line">    <span class="attr">get</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="comment">// 由于需要在闭包内添加watcher，所以通过Dep定义一个全局target属性，暂存watcher, 添加完移除</span></div><div class="line">        Dep.target &amp;&amp; dep.addDep(Dep.target);</div><div class="line">        <span class="keyword">return</span> val;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">// ... 省略</span></div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="comment">// Watcher.js</span></div><div class="line">Watcher.prototype = &#123;</div><div class="line">    <span class="attr">get</span>: <span class="function"><span class="keyword">function</span>(<span class="params">key</span>) </span>&#123;</div><div class="line">        Dep.target = <span class="keyword">this</span>;</div><div class="line">        <span class="keyword">this</span>.value = data[key];    <span class="comment">// 这里会触发属性的getter，从而添加订阅者</span></div><div class="line">        Dep.target = <span class="literal">null</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>这里已经实现了一个Observer了，已经具备了监听数据和数据变化通知订阅者的功能，完整代码。那么接下来就是实现Compile了</p>
<h2 id="实现Compile"><a href="#实现Compile" class="headerlink" title="实现Compile"></a>实现Compile</h2><p>compile主要做的事情是解析模板指令，将模板中的变量替换成数据，然后初始化渲染页面视图，并将每个指令对应的节点绑定更新函数，添加监听数据的订阅者，一旦数据有变动，收到通知，更新视图，如图所示：</p>
<p><img src="http://orzuutv5f.bkt.clouddn.com/Compile%E6%95%B0%E6%8D%AE%E7%BB%91%E5%AE%9A.png" alt="实现Compile"></p>
<p>因为遍历解析的过程有多次操作dom节点，为提高性能和效率，会先将跟节点<code>el</code>转换成文档碎片<code>fragment</code>进行解析编译操作，解析完成，再将<code>fragment</code>添加回原来的真实dom节点中</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Compile</span>(<span class="params">el</span>) </span>&#123;</div><div class="line">    <span class="keyword">this</span>.$el = <span class="keyword">this</span>.isElementNode(el) ? el : <span class="built_in">document</span>.querySelector(el);</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.$el) &#123;</div><div class="line">        <span class="keyword">this</span>.$fragment = <span class="keyword">this</span>.node2Fragment(<span class="keyword">this</span>.$el);</div><div class="line">        <span class="keyword">this</span>.init();</div><div class="line">        <span class="keyword">this</span>.$el.appendChild(<span class="keyword">this</span>.$fragment);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">Compile.prototype = &#123;</div><div class="line">    <span class="attr">init</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="keyword">this</span>.compileElement(<span class="keyword">this</span>.$fragment); &#125;,</div><div class="line">    <span class="attr">node2Fragment</span>: <span class="function"><span class="keyword">function</span>(<span class="params">el</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> fragment = <span class="built_in">document</span>.createDocumentFragment(), child;</div><div class="line">        <span class="comment">// 将原生节点拷贝到fragment</span></div><div class="line">        <span class="keyword">while</span> (child = el.firstChild) &#123;</div><div class="line">            fragment.appendChild(child);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> fragment;</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>compileElement方法将遍历所有节点及其子节点，进行扫描解析编译，调用对应的指令渲染函数进行数据渲染，并调用对应的指令更新函数进行绑定，详看代码及注释说明：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div></pre></td><td class="code"><pre><div class="line">Compile.prototype = &#123;</div><div class="line">    <span class="comment">// ... 省略</span></div><div class="line">    compileElement: <span class="function"><span class="keyword">function</span>(<span class="params">el</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> childNodes = el.childNodes, me = <span class="keyword">this</span>;</div><div class="line">        [].slice.call(childNodes).forEach(<span class="function"><span class="keyword">function</span>(<span class="params">node</span>) </span>&#123;</div><div class="line">            <span class="keyword">var</span> text = node.textContent;</div><div class="line">            <span class="keyword">var</span> reg = <span class="regexp">/\&#123;\&#123;(.*)\&#125;\&#125;/</span>;    <span class="comment">// 表达式文本</span></div><div class="line">            <span class="comment">// 按元素节点方式编译</span></div><div class="line">            <span class="keyword">if</span> (me.isElementNode(node)) &#123;</div><div class="line">                me.compile(node);</div><div class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (me.isTextNode(node) &amp;&amp; reg.test(text)) &#123;</div><div class="line">                me.compileText(node, <span class="built_in">RegExp</span>.$<span class="number">1</span>);</div><div class="line">            &#125;</div><div class="line">            <span class="comment">// 遍历编译子节点</span></div><div class="line">            <span class="keyword">if</span> (node.childNodes &amp;&amp; node.childNodes.length) &#123;</div><div class="line">                me.compileElement(node);</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">    &#125;,</div><div class="line"></div><div class="line">    <span class="attr">compile</span>: <span class="function"><span class="keyword">function</span>(<span class="params">node</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> nodeAttrs = node.attributes, me = <span class="keyword">this</span>;</div><div class="line">        [].slice.call(nodeAttrs).forEach(<span class="function"><span class="keyword">function</span>(<span class="params">attr</span>) </span>&#123;</div><div class="line">            <span class="comment">// 规定：指令以 v-xxx 命名</span></div><div class="line">            <span class="comment">// 如 &lt;span v-text="content"&gt;&lt;/span&gt; 中指令为 v-text</span></div><div class="line">            <span class="keyword">var</span> attrName = attr.name;    <span class="comment">// v-text</span></div><div class="line">            <span class="keyword">if</span> (me.isDirective(attrName)) &#123;</div><div class="line">                <span class="keyword">var</span> exp = attr.value; <span class="comment">// content</span></div><div class="line">                <span class="keyword">var</span> dir = attrName.substring(<span class="number">2</span>);    <span class="comment">// text</span></div><div class="line">                <span class="keyword">if</span> (me.isEventDirective(dir)) &#123;</div><div class="line">                    <span class="comment">// 事件指令, 如 v-on:click</span></div><div class="line">                    compileUtil.eventHandler(node, me.$vm, exp, dir);</div><div class="line">                &#125; <span class="keyword">else</span> &#123;</div><div class="line">                    <span class="comment">// 普通指令</span></div><div class="line">                    compileUtil[dir] &amp;&amp; compileUtil[dir](node, me.$vm, exp);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">// 指令处理集合</span></div><div class="line"><span class="keyword">var</span> compileUtil = &#123;</div><div class="line">    <span class="attr">text</span>: <span class="function"><span class="keyword">function</span>(<span class="params">node, vm, exp</span>) </span>&#123;</div><div class="line">        <span class="keyword">this</span>.bind(node, vm, exp, <span class="string">'text'</span>);</div><div class="line">    &#125;,</div><div class="line">    <span class="comment">// ...省略</span></div><div class="line">    bind: <span class="function"><span class="keyword">function</span>(<span class="params">node, vm, exp, dir</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> updaterFn = updater[dir + <span class="string">'Updater'</span>];</div><div class="line">        <span class="comment">// 第一次初始化视图</span></div><div class="line">        updaterFn &amp;&amp; updaterFn(node, vm[exp]);</div><div class="line">        <span class="comment">// 实例化订阅者，此操作会在对应的属性消息订阅器中添加了该订阅者watcher</span></div><div class="line">        <span class="keyword">new</span> Watcher(vm, exp, <span class="function"><span class="keyword">function</span>(<span class="params">value, oldValue</span>) </span>&#123;</div><div class="line">            <span class="comment">// 一旦属性值有变化，会收到通知执行此更新函数，更新视图</span></div><div class="line">            updaterFn &amp;&amp; updaterFn(node, value, oldValue);</div><div class="line">        &#125;);</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">// 更新函数</span></div><div class="line"><span class="keyword">var</span> updater = &#123;</div><div class="line">    <span class="attr">textUpdater</span>: <span class="function"><span class="keyword">function</span>(<span class="params">node, value</span>) </span>&#123;</div><div class="line">        node.textContent = <span class="keyword">typeof</span> value == <span class="string">'undefined'</span> ? <span class="string">''</span> : value;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">// ...省略</span></div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>这里通过递归遍历保证了每个节点及子节点都会解析编译到，包括了{ { } }表达式声明的文本节点。指令的声明规定是通过特定前缀的节点属性来标记，如<code>&lt;span v-text=\&quot;content\&quot; other-attr</code>中<code>v-text</code>便是指令，而<code>other-attr</code>不是指令，只是普通的属性。<br>监听数据、绑定更新函数的处理是在<code>compileUtil.bind()</code>这个方法中，通过<code>new Watcher()</code>添加回调来接收数据变化的通知</p>
<p>至此，一个简单的Compile就完成了，<a href="https://github.com/DMQ/mvvm/blob/master/js/compile.js" target="_blank" rel="external">完整代码</a>。接下来要看看Watcher这个订阅者的具体实现了</p>
<h2 id="实现Watcher"><a href="#实现Watcher" class="headerlink" title="实现Watcher"></a>实现Watcher</h2><p>Watcher订阅者作为Observer和Compile之间通信的桥梁，主要做的事情是:<br>1、在自身实例化时往属性订阅器(dep)里面添加自己<br>2、自身必须有一个update()方法<br>3、待属性变动dep.notice()通知时，能调用自身的update()方法，并触发Compile中绑定的回调，则功成身退。<br>如果有点乱，可以回顾下前面的思路整理</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Watcher</span>(<span class="params">vm, exp, cb</span>) </span>&#123;</div><div class="line">    <span class="keyword">this</span>.cb = cb;</div><div class="line">    <span class="keyword">this</span>.vm = vm;</div><div class="line">    <span class="keyword">this</span>.exp = exp;</div><div class="line">    <span class="comment">// 此处为了触发属性的getter，从而在dep添加自己，结合Observer更易理解</span></div><div class="line">    <span class="keyword">this</span>.value = <span class="keyword">this</span>.get(); </div><div class="line">&#125;</div><div class="line">Watcher.prototype = &#123;</div><div class="line">    <span class="attr">update</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">this</span>.run();    <span class="comment">// 属性值变化收到通知</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">run</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> value = <span class="keyword">this</span>.get(); <span class="comment">// 取到最新值</span></div><div class="line">        <span class="keyword">var</span> oldVal = <span class="keyword">this</span>.value;</div><div class="line">        <span class="keyword">if</span> (value !== oldVal) &#123;</div><div class="line">            <span class="keyword">this</span>.value = value;</div><div class="line">            <span class="keyword">this</span>.cb.call(<span class="keyword">this</span>.vm, value, oldVal); <span class="comment">// 执行Compile中绑定的回调，更新视图</span></div><div class="line">        &#125;</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">get</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        Dep.target = <span class="keyword">this</span>;    <span class="comment">// 将当前订阅者指向自己</span></div><div class="line">        <span class="keyword">var</span> value = <span class="keyword">this</span>.vm[exp];    <span class="comment">// 触发getter，添加自己到属性订阅器中</span></div><div class="line">        Dep.target = <span class="literal">null</span>;    <span class="comment">// 添加完毕，重置</span></div><div class="line">        <span class="keyword">return</span> value;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"><span class="comment">// 这里再次列出Observer和Dep，方便理解</span></div><div class="line"><span class="built_in">Object</span>.defineProperty(data, key, &#123;</div><div class="line">    <span class="attr">get</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="comment">// 由于需要在闭包内添加watcher，所以可以在Dep定义一个全局target属性，暂存watcher, 添加完移除</span></div><div class="line">        Dep.target &amp;&amp; dep.addDep(Dep.target);</div><div class="line">        <span class="keyword">return</span> val;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">// ... 省略</span></div><div class="line">&#125;);</div><div class="line">Dep.prototype = &#123;</div><div class="line">    <span class="attr">notify</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">this</span>.subs.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">sub</span>) </span>&#123;</div><div class="line">            sub.update(); <span class="comment">// 调用订阅者的update方法，通知变化</span></div><div class="line">        &#125;);</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>实例化<code>Watcher</code>的时候，调用<code>get()</code>方法，通过<code>Dep.target = watcherInstance</code>标记订阅者是当前watcher实例，强行触发属性定义的<code>getter</code>方法，<code>getter</code>方法执行的时候，就会在属性的订阅器<code>dep</code>添加当前watcher实例，从而在属性值有变化的时候，watcherInstance就能收到更新通知。</p>
<p>ok, Watcher也已经实现了，<a href="https://github.com/DMQ/mvvm/blob/master/js/watcher.js" target="_blank" rel="external">完整代码</a>。<br>基本上vue中数据绑定相关比较核心的几个模块也是这几个，<a href="https://github.com/vuejs/vue" target="_blank" rel="external">猛戳这里</a> , 在src 目录可找到vue源码。</p>
<p>最后来讲讲MVVM入口文件的相关逻辑和实现吧，相对就比较简单了~</p>
<h2 id="实现MVVM"><a href="#实现MVVM" class="headerlink" title="实现MVVM"></a>实现MVVM</h2><p>MVVM作为数据绑定的入口，整合Observer、Compile和Watcher三者，通过Observer来监听自己的model数据变化，通过Compile来解析编译模板指令，最终利用Watcher搭起Observer和Compile之间的通信桥梁，达到数据变化 -&gt; 视图更新；视图交互变化(input) -&gt; 数据model变更的双向绑定效果。</p>
<p>一个简单的MVVM构造器是这样子：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">MVVM</span>(<span class="params">options</span>) </span>&#123;</div><div class="line">    <span class="keyword">this</span>.$options = options;</div><div class="line">    <span class="keyword">var</span> data = <span class="keyword">this</span>._data = <span class="keyword">this</span>.$options.data;</div><div class="line">    observe(data, <span class="keyword">this</span>);</div><div class="line">    <span class="keyword">this</span>.$compile = <span class="keyword">new</span> Compile(options.el || <span class="built_in">document</span>.body, <span class="keyword">this</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>但是这里有个问题，从代码中可看出监听的数据对象是options.data，每次需要更新视图，则必须通过<code>var vm = new MVVM({data:{name: &#39;kindeng&#39;}}); vm._data.name = &#39;dmq&#39;</code>; 这样的方式来改变数据。</p>
<p>显然不符合我们一开始的期望，我们所期望的调用方式应该是这样的：<br><code>var vm = new MVVM({data: {name: &#39;kindeng&#39;}}); vm.name = &#39;dmq&#39;;</code></p>
<p>所以这里需要给MVVM实例添加一个属性代理的方法，使访问vm的属性代理为访问vm._data的属性，改造后的代码如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">MVVM</span>(<span class="params">options</span>) </span>&#123;</div><div class="line">    <span class="keyword">this</span>.$options = options;</div><div class="line">    <span class="keyword">var</span> data = <span class="keyword">this</span>._data = <span class="keyword">this</span>.$options.data, me = <span class="keyword">this</span>;</div><div class="line">    <span class="comment">// 属性代理，实现 vm.xxx -&gt; vm._data.xxx</span></div><div class="line">    <span class="built_in">Object</span>.keys(data).forEach(<span class="function"><span class="keyword">function</span>(<span class="params">key</span>) </span>&#123;</div><div class="line">        me._proxy(key);</div><div class="line">    &#125;);</div><div class="line">    observe(data, <span class="keyword">this</span>);</div><div class="line">    <span class="keyword">this</span>.$compile = <span class="keyword">new</span> Compile(options.el || <span class="built_in">document</span>.body, <span class="keyword">this</span>)</div><div class="line">&#125;</div><div class="line"></div><div class="line">MVVM.prototype = &#123;</div><div class="line">    <span class="attr">_proxy</span>: <span class="function"><span class="keyword">function</span>(<span class="params">key</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> me = <span class="keyword">this</span>;</div><div class="line">        <span class="built_in">Object</span>.defineProperty(me, key, &#123;</div><div class="line">            <span class="attr">configurable</span>: <span class="literal">false</span>,</div><div class="line">            <span class="attr">enumerable</span>: <span class="literal">true</span>,</div><div class="line">            <span class="attr">get</span>: <span class="function"><span class="keyword">function</span> <span class="title">proxyGetter</span>(<span class="params"></span>) </span>&#123;</div><div class="line">                <span class="keyword">return</span> me._data[key];</div><div class="line">            &#125;,</div><div class="line">            <span class="attr">set</span>: <span class="function"><span class="keyword">function</span> <span class="title">proxySetter</span>(<span class="params">newVal</span>) </span>&#123;</div><div class="line">                me._data[key] = newVal;</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>这里主要还是利用了<code>Object.defineProperty()</code>这个方法来劫持了vm实例对象的属性的读写权，使读写vm实例的属性转成读写了<code>vm._data</code>的属性值，达到鱼目混珠的效果，哈哈</p>
<p>至此，全部模块和功能已经完成了，如本文开头所承诺的两点。一个简单的MVVM模块已经实现，其思想和原理大部分来自经过简化改造的<a href="https://github.com/vuejs/vue" target="_blank" rel="external">vue源码</a>，<a href="https://github.com/DMQ/mvvm" target="_blank" rel="external">猛戳这里</a>可以看到本文的所有相关代码。<br>由于本文内容偏实践，所以代码量较多，且不宜列出大篇幅代码，所以建议想深入了解的童鞋可以再次结合本文源代码来进行阅读，这样会更加容易理解和掌握。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>本文主要围绕“几种实现双向绑定的做法”、“实现Observer”、“实现Compile”、“实现Watcher”、“实现MVVM”这几个模块来阐述了双向绑定的原理和实现。并根据思路流程渐进梳理讲解了一些细节思路和比较关键的内容点，以及通过展示部分关键代码讲述了怎样一步步实现一个双向绑定MVVM。文中肯定会有一些不够严谨的思考和错误，欢迎大家指正，有兴趣欢迎一起探讨和改进~</p>
<p>最后，感谢您的阅读！</p>

      
    </div>
      
        
        
      
      <div class="clearfix"></div>
      </footer>
  </div>
</article>





  <article class="post">
  <div class="post-content">
    <header>
      
  
    <h1 class="title"><a href="/2017/09/07/关于eslint使用规则，和各种报错对应规则/">关于eslint使用规则，和各种报错对应规则</a></h1>
  

      
        <time datetime="2017-09-07T02:03:02.000Z">2017-09-07</time>
      
    </header>
    <div class="entry">
      
        <a id="more"></a>
<h1 id="正文开始"><a href="#正文开始" class="headerlink" title="正文开始"></a>正文开始</h1><p><center style="font-size: 30px"><code>关于eslint使用规则，和各种报错对应规则</code></center></p>
<hr>
<p><img src="http://orzuutv5f.bkt.clouddn.com/eslint.png" alt="eslint"></p>
<blockquote>
<p>在用vue2.0写项目时，由于vue-cli脚 架自动带了带了代码规范监测，稍微不小心就会出现一些Warning,这时就需要，根据自己习惯的代码规范，用一下代码进行对Eslint规范的一些忽略。下面详细介绍一下：</p>
</blockquote>
<p>ESLint 由 JavaScript 红宝书 作者 Nicholas C. Zakas 编写， 2013 年发布第一个版本。 NCZ 的初衷不是重复造一个轮子，而是在实际需求得不到 JSHint 团队响应 的情况下做出的选择：以可扩展、每条规则独立、不内置编码风格为理念编写一个 lint 工具。</p>
<hr>
<h2 id="ESLint-主要有以下特点"><a href="#ESLint-主要有以下特点" class="headerlink" title="ESLint 主要有以下特点:"></a>ESLint 主要有以下特点:</h2><ul>
<li>默认规则包含所有 JSLint、JSHint 中存在的规则，易迁移；</li>
<li>规则可配置性高：可设置「警告」、「错误」两个 error 等级，或者直接禁用；</li>
<li>包含代码风格检测的规则（可以丢掉 JSCS 了）；</li>
<li>支持插件扩展、自定义规则。</li>
</ul>
<p>下面说一下如何配置：<br>比如，我写vue过程中，出现了下面的<code>warning</code>:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">WARNING Compiled <span class="keyword">with</span> <span class="number">1</span> warnings11:<span class="number">26</span>:<span class="number">30</span>http:<span class="comment">//eslint.org/docs/rules/quotes Strings must use singlequote</span></div></pre></td></tr></table></figure>
<p>警告的意思就是字符串必须用单引号<br>如下图：</p>
<p><img src="http://orzuutv5f.bkt.clouddn.com/eslint%E8%AD%A6%E5%91%8A1.png" alt=""></p>
<p>这时候，你就可以在.eslintrc.js配置你的规则rule</p>
<blockquote>
<p>“quotes”: [1, “single”],//引号类型 `` “” ‘’<br>Use /<em> eslint-disable </em>/ to ignore all warnings in a file.</p>
</blockquote>
<p>还有一种万能方法，就是在报错的JS文件中第一行写上</p>
<blockquote>
<p>/<em> eslint-disable </em>/</p>
</blockquote>
<p>如下图</p>
<p><img src="http://orzuutv5f.bkt.clouddn.com/elint%E8%AD%A6%E5%91%8A%E6%BA%90%E7%A0%811.png" alt=""></p>
<p>这样就可以和Eslint携手并进了</p>
<p><em><em>配置(我主要用第三种方法,为了方便查看，特记录如下:)</em></em></p>
<p>可以通过以下三种方式配置 ESLint:</p>
<ul>
<li><p>使用 .eslintrc 文件（支持 JSON 和 YAML 两种语法）；</p>
</li>
<li><p>在 package.json 中添加 eslintConfig 配置块；直接在代码文件中定义。</p>
</li>
<li><p>以下是<code>.eslintrc</code> 文件示例和解释：<code>为了方便查看，特记录如下,需要用的规则，到时候直接搜索就可以了，简直开心极了：</code></p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div><div class="line">273</div><div class="line">274</div><div class="line">275</div><div class="line">276</div><div class="line">277</div><div class="line">278</div><div class="line">279</div><div class="line">280</div><div class="line">281</div><div class="line">282</div><div class="line">283</div><div class="line">284</div><div class="line">285</div><div class="line">286</div><div class="line">287</div><div class="line">288</div><div class="line">289</div><div class="line">290</div><div class="line">291</div><div class="line">292</div><div class="line">293</div><div class="line">294</div><div class="line">295</div><div class="line">296</div><div class="line">297</div><div class="line">298</div></pre></td><td class="code"><pre><div class="line">&#123;  </div><div class="line">  <span class="string">"env"</span>: &#123;  </div><div class="line">    <span class="string">"browser"</span>: <span class="literal">true</span>,  </div><div class="line">    <span class="string">"node"</span>: <span class="literal">true</span>,  </div><div class="line">    <span class="string">"commonjs"</span>: <span class="literal">true</span>  </div><div class="line">  &#125;,  </div><div class="line">  <span class="string">"ecmaFeatures"</span>: &#123;  </div><div class="line">    <span class="comment">// lambda表达式  </span></div><div class="line">    <span class="string">"arrowFunctions"</span>: <span class="literal">true</span>,  </div><div class="line">    <span class="comment">// 解构赋值  </span></div><div class="line">    <span class="string">"destructuring"</span>: <span class="literal">true</span>,  </div><div class="line">    <span class="comment">// class  </span></div><div class="line">    <span class="string">"classes"</span>: <span class="literal">true</span>,  </div><div class="line">    <span class="comment">// http://es6.ruanyifeng.com/#docs/function#函数参数的默认值  </span></div><div class="line">    <span class="string">"defaultParams"</span>: <span class="literal">true</span>,  </div><div class="line">    <span class="comment">// 块级作用域，允许使用let const  </span></div><div class="line">    <span class="string">"blockBindings"</span>: <span class="literal">true</span>,  </div><div class="line">    <span class="comment">// 允许使用模块，模块内默认严格模式  </span></div><div class="line">    <span class="string">"modules"</span>: <span class="literal">true</span>,  </div><div class="line">    <span class="comment">// 允许字面量定义对象时，用表达式做属性名  </span></div><div class="line">    <span class="comment">// http://es6.ruanyifeng.com/#docs/object#属性名表达式  </span></div><div class="line">    <span class="string">"objectLiteralComputedProperties"</span>: <span class="literal">true</span>,  </div><div class="line">    <span class="comment">// 允许对象字面量方法名简写  </span></div><div class="line">    <span class="comment">/*var o = &#123; </span></div><div class="line">        method() &#123; </div><div class="line">          return "Hello!"; </div><div class="line">        &#125; </div><div class="line">     &#125;; </div><div class="line"> </div><div class="line">     等同于 </div><div class="line"> </div><div class="line">     var o = &#123; </div><div class="line">       method: function() &#123; </div><div class="line">         return "Hello!"; </div><div class="line">       &#125; </div><div class="line">     &#125;; </div><div class="line">    */  </div><div class="line">    <span class="string">"objectLiteralShorthandMethods"</span>: <span class="literal">true</span>,  </div><div class="line">    <span class="comment">/* </span></div><div class="line">      对象字面量属性名简写 </div><div class="line">      var foo = 'bar'; </div><div class="line">      var baz = &#123;foo&#125;; </div><div class="line">      baz // &#123;foo: "bar"&#125; </div><div class="line"> </div><div class="line">      // 等同于 </div><div class="line">      var baz = &#123;foo: foo&#125;; </div><div class="line">    */  </div><div class="line">    <span class="string">"objectLiteralShorthandProperties"</span>: <span class="literal">true</span>,  </div><div class="line">    <span class="comment">// http://es6.ruanyifeng.com/#docs/function#rest参数  </span></div><div class="line">    <span class="string">"restParams"</span>: <span class="literal">true</span>,  </div><div class="line">    <span class="comment">// http://es6.ruanyifeng.com/#docs/function#扩展运算符  </span></div><div class="line">    <span class="string">"spread"</span>: <span class="literal">true</span>,  </div><div class="line">    <span class="comment">// http://es6.ruanyifeng.com/#docs/iterator#for---of循环  </span></div><div class="line">    <span class="string">"forOf"</span>: <span class="literal">true</span>,  </div><div class="line">    <span class="comment">// http://es6.ruanyifeng.com/#docs/generator  </span></div><div class="line">    <span class="string">"generators"</span>: <span class="literal">true</span>,  </div><div class="line">    <span class="comment">// http://es6.ruanyifeng.com/#docs/string#模板字符串  </span></div><div class="line">    <span class="string">"templateStrings"</span>: <span class="literal">true</span>,  </div><div class="line">    <span class="string">"superInFunctions"</span>: <span class="literal">true</span>,  </div><div class="line">    <span class="comment">// http://es6.ruanyifeng.com/#docs/object#对象的扩展运算符  </span></div><div class="line">    <span class="string">"experimentalObjectRestSpread"</span>: <span class="literal">true</span>  </div><div class="line">  &#125;,  </div><div class="line">  </div><div class="line">  <span class="string">"rules"</span>: &#123;  </div><div class="line">    <span class="comment">// 定义对象的set存取器属性时，强制定义get  </span></div><div class="line">    <span class="string">"accessor-pairs"</span>: <span class="number">2</span>,  </div><div class="line">    <span class="comment">// 指定数组的元素之间要以空格隔开(,后面)， never参数：[ 之前和 ] 之后不能带空格，always参数：[ 之前和 ] 之后必须带空格  </span></div><div class="line">    <span class="string">"array-bracket-spacing"</span>: [<span class="number">2</span>, <span class="string">"never"</span>],  </div><div class="line">    <span class="comment">// 在块级作用域外访问块内定义的变量是否报错提示  </span></div><div class="line">    <span class="string">"block-scoped-var"</span>: <span class="number">0</span>,  </div><div class="line">    <span class="comment">// if while function 后面的&#123;必须与if在同一行，java风格。  </span></div><div class="line">    <span class="string">"brace-style"</span>: [<span class="number">2</span>, <span class="string">"1tbs"</span>, &#123; <span class="string">"allowSingleLine"</span>: <span class="literal">true</span> &#125;],  </div><div class="line">    <span class="comment">// 双峰驼命名格式  </span></div><div class="line">    <span class="string">"camelcase"</span>: <span class="number">2</span>,  </div><div class="line">    <span class="comment">// 数组和对象键值对最后一个逗号， never参数：不能带末尾的逗号, always参数：必须带末尾的逗号，  </span></div><div class="line">    <span class="comment">// always-multiline：多行模式必须带逗号，单行模式不能带逗号  </span></div><div class="line">    <span class="string">"comma-dangle"</span>: [<span class="number">2</span>, <span class="string">"never"</span>],  </div><div class="line">    <span class="comment">// 控制逗号前后的空格  </span></div><div class="line">    <span class="string">"comma-spacing"</span>: [<span class="number">2</span>, &#123; <span class="string">"before"</span>: <span class="literal">false</span>, <span class="string">"after"</span>: <span class="literal">true</span> &#125;],  </div><div class="line">    <span class="comment">// 控制逗号在行尾出现还是在行首出现  </span></div><div class="line">    <span class="comment">// http://eslint.org/docs/rules/comma-style  </span></div><div class="line">    <span class="string">"comma-style"</span>: [<span class="number">2</span>, <span class="string">"last"</span>],  </div><div class="line">    <span class="comment">// 圈复杂度  </span></div><div class="line">    <span class="string">"complexity"</span>: [<span class="number">2</span>,<span class="number">9</span>],  </div><div class="line">    <span class="comment">// 以方括号取对象属性时，[ 后面和 ] 前面是否需要空格, 可选参数 never, always  </span></div><div class="line">    <span class="string">"computed-property-spacing"</span>: [<span class="number">2</span>,<span class="string">"never"</span>],  </div><div class="line">    <span class="comment">// 强制方法必须返回值，TypeScript强类型，不配置  </span></div><div class="line">    <span class="string">"consistent-return"</span>: <span class="number">0</span>,  </div><div class="line">    <span class="comment">// 用于指统一在回调函数中指向this的变量名，箭头函数中的this已经可以指向外层调用者，应该没卵用了  </span></div><div class="line">    <span class="comment">// e.g [0,"that"] 指定只能 var that = this. that不能指向其他任何值，this也不能赋值给that以外的其他值  </span></div><div class="line">    <span class="string">"consistent-this"</span>: <span class="number">0</span>,  </div><div class="line">    <span class="comment">// 强制在子类构造函数中用super()调用父类构造函数，TypeScrip的编译器也会提示  </span></div><div class="line">    <span class="string">"constructor-super"</span>: <span class="number">0</span>,  </div><div class="line">    <span class="comment">// if else while for do后面的代码块是否需要&#123; &#125;包围，参数：  </span></div><div class="line">    <span class="comment">//    multi  只有块中有多行语句时才需要&#123; &#125;包围  </span></div><div class="line">    <span class="comment">//    multi-line  只有块中有多行语句时才需要&#123; &#125;包围, 但是块中的执行语句只有一行时，  </span></div><div class="line">    <span class="comment">//                   块中的语句只能跟和if语句在同一行。if (foo) foo++; else doSomething();  </span></div><div class="line">    <span class="comment">//    multi-or-nest 只有块中有多行语句时才需要&#123; &#125;包围, 如果块中的执行语句只有一行，执行语句可以零另起一行也可以跟在if语句后面  </span></div><div class="line">    <span class="comment">//    [2, "multi", "consistent"] 保持前后语句的&#123; &#125;一致  </span></div><div class="line">    <span class="comment">//    default: [2, "all"] 全都需要&#123; &#125;包围  </span></div><div class="line">    <span class="string">"curly"</span>: [<span class="number">2</span>, <span class="string">"all"</span>],  </div><div class="line">    <span class="comment">// switch语句强制default分支，也可添加 // no default 注释取消此次警告  </span></div><div class="line">    <span class="string">"default-case"</span>: <span class="number">2</span>,  </div><div class="line">    <span class="comment">// 强制object.key 中 . 的位置，参数:  </span></div><div class="line">    <span class="comment">//      property，'.'号应与属性在同一行  </span></div><div class="line">    <span class="comment">//      object, '.' 号应与对象名在同一行  </span></div><div class="line">    <span class="string">"dot-location"</span>: [<span class="number">2</span>, <span class="string">"property"</span>],  </div><div class="line">    <span class="comment">// 强制使用.号取属性  </span></div><div class="line">    <span class="comment">//    参数： allowKeywords：true 使用保留字做属性名时，只能使用.方式取属性  </span></div><div class="line">    <span class="comment">//                          false 使用保留字做属性名时, 只能使用[]方式取属性 e.g [2, &#123;"allowKeywords": false&#125;]  </span></div><div class="line">    <span class="comment">//           allowPattern:  当属性名匹配提供的正则表达式时，允许使用[]方式取值,否则只能用.号取值 e.g [2, &#123;"allowPattern": "^[a-z]+(_[a-z]+)+$"&#125;]  </span></div><div class="line">    <span class="string">"dot-notation"</span>: [<span class="number">2</span>, &#123;<span class="string">"allowKeywords"</span>: <span class="literal">true</span>&#125;],  </div><div class="line">    <span class="comment">// 文件末尾强制换行  </span></div><div class="line">    <span class="string">"eol-last"</span>: <span class="number">2</span>,  </div><div class="line">    <span class="comment">// 使用 === 替代 ==  </span></div><div class="line">    <span class="string">"eqeqeq"</span>: [<span class="number">2</span>, <span class="string">"allow-null"</span>],  </div><div class="line">    <span class="comment">// 方法表达式是否需要命名  </span></div><div class="line">    <span class="string">"func-names"</span>: <span class="number">0</span>,  </div><div class="line">    <span class="comment">// 方法定义风格，参数：  </span></div><div class="line">    <span class="comment">//    declaration: 强制使用方法声明的方式，function f()&#123;&#125; e.g [2, "declaration"]  </span></div><div class="line">    <span class="comment">//    expression：强制使用方法表达式的方式，var f = function() &#123;&#125;  e.g [2, "expression"]  </span></div><div class="line">    <span class="comment">//    allowArrowFunctions: declaration风格中允许箭头函数。 e.g [2, "declaration", &#123; "allowArrowFunctions": true &#125;]  </span></div><div class="line">    <span class="string">"func-style"</span>: <span class="number">0</span>,  </div><div class="line"><span class="string">"no-alert"</span>: <span class="number">0</span>,<span class="comment">//禁止使用alert confirm prompt</span></div><div class="line"><span class="string">"no-array-constructor"</span>: <span class="number">2</span>,<span class="comment">//禁止使用数组构造器</span></div><div class="line"><span class="string">"no-bitwise"</span>: <span class="number">0</span>,<span class="comment">//禁止使用按位运算符</span></div><div class="line"><span class="string">"no-caller"</span>: <span class="number">1</span>,<span class="comment">//禁止使用arguments.caller或arguments.callee</span></div><div class="line"><span class="string">"no-catch-shadow"</span>: <span class="number">2</span>,<span class="comment">//禁止catch子句参数与外部作用域变量同名</span></div><div class="line"><span class="string">"no-class-assign"</span>: <span class="number">2</span>,<span class="comment">//禁止给类赋值</span></div><div class="line"><span class="string">"no-cond-assign"</span>: <span class="number">2</span>,<span class="comment">//禁止在条件表达式中使用赋值语句</span></div><div class="line"><span class="string">"no-console"</span>: <span class="number">2</span>,<span class="comment">//禁止使用console</span></div><div class="line"><span class="string">"no-const-assign"</span>: <span class="number">2</span>,<span class="comment">//禁止修改const声明的变量</span></div><div class="line"><span class="string">"no-constant-condition"</span>: <span class="number">2</span>,<span class="comment">//禁止在条件中使用常量表达式 if(true) if(1)</span></div><div class="line"><span class="string">"no-continue"</span>: <span class="number">0</span>,<span class="comment">//禁止使用continue</span></div><div class="line"><span class="string">"no-control-regex"</span>: <span class="number">2</span>,<span class="comment">//禁止在正则表达式中使用控制字符</span></div><div class="line"><span class="string">"no-debugger"</span>: <span class="number">2</span>,<span class="comment">//禁止使用debugger</span></div><div class="line"><span class="string">"no-delete-var"</span>: <span class="number">2</span>,<span class="comment">//不能对var声明的变量使用delete操作符</span></div><div class="line"><span class="string">"no-div-regex"</span>: <span class="number">1</span>,<span class="comment">//不能使用看起来像除法的正则表达式/=foo/</span></div><div class="line"><span class="string">"no-dupe-keys"</span>: <span class="number">2</span>,<span class="comment">//在创建对象字面量时不允许键重复 &#123;a:1,a:1&#125;</span></div><div class="line"><span class="string">"no-dupe-args"</span>: <span class="number">2</span>,<span class="comment">//函数参数不能重复</span></div><div class="line"><span class="string">"no-duplicate-case"</span>: <span class="number">2</span>,<span class="comment">//switch中的case标签不能重复</span></div><div class="line"><span class="string">"no-else-return"</span>: <span class="number">2</span>,<span class="comment">//如果if语句里面有return,后面不能跟else语句</span></div><div class="line"><span class="string">"no-empty"</span>: <span class="number">2</span>,<span class="comment">//块语句中的内容不能为空</span></div><div class="line"><span class="string">"no-empty-character-class"</span>: <span class="number">2</span>,<span class="comment">//正则表达式中的[]内容不能为空</span></div><div class="line"><span class="string">"no-empty-label"</span>: <span class="number">2</span>,<span class="comment">//禁止使用空label</span></div><div class="line"><span class="string">"no-eq-null"</span>: <span class="number">2</span>,<span class="comment">//禁止对null使用==或!=运算符</span></div><div class="line"><span class="string">"no-eval"</span>: <span class="number">1</span>,<span class="comment">//禁止使用eval</span></div><div class="line"><span class="string">"no-ex-assign"</span>: <span class="number">2</span>,<span class="comment">//禁止给catch语句中的异常参数赋值</span></div><div class="line"><span class="string">"no-extend-native"</span>: <span class="number">2</span>,<span class="comment">//禁止扩展native对象</span></div><div class="line"><span class="string">"no-extra-bind"</span>: <span class="number">2</span>,<span class="comment">//禁止不必要的函数绑定</span></div><div class="line"><span class="string">"no-extra-boolean-cast"</span>: <span class="number">2</span>,<span class="comment">//禁止不必要的bool转换</span></div><div class="line"><span class="string">"no-extra-parens"</span>: <span class="number">2</span>,<span class="comment">//禁止非必要的括号</span></div><div class="line"><span class="string">"no-extra-semi"</span>: <span class="number">2</span>,<span class="comment">//禁止多余的冒号</span></div><div class="line"><span class="string">"no-fallthrough"</span>: <span class="number">1</span>,<span class="comment">//禁止switch穿透</span></div><div class="line"><span class="string">"no-floating-decimal"</span>: <span class="number">2</span>,<span class="comment">//禁止省略浮点数中的0 .5 3.</span></div><div class="line"><span class="string">"no-func-assign"</span>: <span class="number">2</span>,<span class="comment">//禁止重复的函数声明</span></div><div class="line"><span class="string">"no-implicit-coercion"</span>: <span class="number">1</span>,<span class="comment">//禁止隐式转换</span></div><div class="line"><span class="string">"no-implied-eval"</span>: <span class="number">2</span>,<span class="comment">//禁止使用隐式eval</span></div><div class="line"><span class="string">"no-inline-comments"</span>: <span class="number">0</span>,<span class="comment">//禁止行内备注</span></div><div class="line"><span class="string">"no-inner-declarations"</span>: [<span class="number">2</span>, <span class="string">"functions"</span>],<span class="comment">//禁止在块语句中使用声明（变量或函数）</span></div><div class="line"><span class="string">"no-invalid-regexp"</span>: <span class="number">2</span>,<span class="comment">//禁止无效的正则表达式</span></div><div class="line"><span class="string">"no-invalid-this"</span>: <span class="number">2</span>,<span class="comment">//禁止无效的this，只能用在构造器，类，对象字面量</span></div><div class="line"><span class="string">"no-irregular-whitespace"</span>: <span class="number">2</span>,<span class="comment">//不能有不规则的空格</span></div><div class="line"><span class="string">"no-iterator"</span>: <span class="number">2</span>,<span class="comment">//禁止使用__iterator__ 属性</span></div><div class="line"><span class="string">"no-label-var"</span>: <span class="number">2</span>,<span class="comment">//label名不能与var声明的变量名相同</span></div><div class="line"><span class="string">"no-labels"</span>: <span class="number">2</span>,<span class="comment">//禁止标签声明</span></div><div class="line"><span class="string">"no-lone-blocks"</span>: <span class="number">2</span>,<span class="comment">//禁止不必要的嵌套块</span></div><div class="line"><span class="string">"no-lonely-if"</span>: <span class="number">2</span>,<span class="comment">//禁止else语句内只有if语句</span></div><div class="line"><span class="string">"no-loop-func"</span>: <span class="number">1</span>,<span class="comment">//禁止在循环中使用函数（如果没有引用外部变量不形成闭包就可以）</span></div><div class="line"><span class="string">"no-mixed-requires"</span>: [<span class="number">0</span>, <span class="literal">false</span>],<span class="comment">//声明时不能混用声明类型</span></div><div class="line"><span class="string">"no-mixed-spaces-and-tabs"</span>: [<span class="number">2</span>, <span class="literal">false</span>],<span class="comment">//禁止混用tab和空格</span></div><div class="line"><span class="string">"linebreak-style"</span>: [<span class="number">0</span>, <span class="string">"windows"</span>],<span class="comment">//换行风格</span></div><div class="line"><span class="string">"no-multi-spaces"</span>: <span class="number">1</span>,<span class="comment">//不能用多余的空格</span></div><div class="line"><span class="string">"no-multi-str"</span>: <span class="number">2</span>,<span class="comment">//字符串不能用\换行</span></div><div class="line"><span class="string">"no-multiple-empty-lines"</span>: [<span class="number">1</span>, &#123;<span class="string">"max"</span>: <span class="number">2</span>&#125;],<span class="comment">//空行最多不能超过2行</span></div><div class="line"><span class="string">"no-native-reassign"</span>: <span class="number">2</span>,<span class="comment">//不能重写native对象</span></div><div class="line"><span class="string">"no-negated-in-lhs"</span>: <span class="number">2</span>,<span class="comment">//in 操作符的左边不能有!</span></div><div class="line"><span class="string">"no-nested-ternary"</span>: <span class="number">0</span>,<span class="comment">//禁止使用嵌套的三目运算</span></div><div class="line"><span class="string">"no-new"</span>: <span class="number">1</span>,<span class="comment">//禁止在使用new构造一个实例后不赋值</span></div><div class="line"><span class="string">"no-new-func"</span>: <span class="number">1</span>,<span class="comment">//禁止使用new Function</span></div><div class="line"><span class="string">"no-new-object"</span>: <span class="number">2</span>,<span class="comment">//禁止使用new Object()</span></div><div class="line"><span class="string">"no-new-require"</span>: <span class="number">2</span>,<span class="comment">//禁止使用new require</span></div><div class="line"><span class="string">"no-new-wrappers"</span>: <span class="number">2</span>,<span class="comment">//禁止使用new创建包装实例，new String new Boolean new Number</span></div><div class="line"><span class="string">"no-obj-calls"</span>: <span class="number">2</span>,<span class="comment">//不能调用内置的全局对象，比如Math() JSON()</span></div><div class="line"><span class="string">"no-octal"</span>: <span class="number">2</span>,<span class="comment">//禁止使用八进制数字</span></div><div class="line"><span class="string">"no-octal-escape"</span>: <span class="number">2</span>,<span class="comment">//禁止使用八进制转义序列</span></div><div class="line"><span class="string">"no-param-reassign"</span>: <span class="number">2</span>,<span class="comment">//禁止给参数重新赋值</span></div><div class="line"><span class="string">"no-path-concat"</span>: <span class="number">0</span>,<span class="comment">//node中不能使用__dirname或__filename做路径拼接</span></div><div class="line"><span class="string">"no-plusplus"</span>: <span class="number">0</span>,<span class="comment">//禁止使用++，--</span></div><div class="line"><span class="string">"no-process-env"</span>: <span class="number">0</span>,<span class="comment">//禁止使用process.env</span></div><div class="line"><span class="string">"no-process-exit"</span>: <span class="number">0</span>,<span class="comment">//禁止使用process.exit()</span></div><div class="line"><span class="string">"no-proto"</span>: <span class="number">2</span>,<span class="comment">//禁止使用__proto__属性</span></div><div class="line"><span class="string">"no-redeclare"</span>: <span class="number">2</span>,<span class="comment">//禁止重复声明变量</span></div><div class="line"><span class="string">"no-regex-spaces"</span>: <span class="number">2</span>,<span class="comment">//禁止在正则表达式字面量中使用多个空格 /foo bar/</span></div><div class="line"><span class="string">"no-restricted-modules"</span>: <span class="number">0</span>,<span class="comment">//如果禁用了指定模块，使用就会报错</span></div><div class="line"><span class="string">"no-return-assign"</span>: <span class="number">1</span>,<span class="comment">//return 语句中不能有赋值表达式</span></div><div class="line"><span class="string">"no-script-url"</span>: <span class="number">0</span>,<span class="comment">//禁止使用javascript:void(0)</span></div><div class="line"><span class="string">"no-self-compare"</span>: <span class="number">2</span>,<span class="comment">//不能比较自身</span></div><div class="line"><span class="string">"no-sequences"</span>: <span class="number">0</span>,<span class="comment">//禁止使用逗号运算符</span></div><div class="line"><span class="string">"no-shadow"</span>: <span class="number">2</span>,<span class="comment">//外部作用域中的变量不能与它所包含的作用域中的变量或参数同名</span></div><div class="line"><span class="string">"no-shadow-restricted-names"</span>: <span class="number">2</span>,<span class="comment">//严格模式中规定的限制标识符不能作为声明时的变量名使用</span></div><div class="line"><span class="string">"no-spaced-func"</span>: <span class="number">2</span>,<span class="comment">//函数调用时 函数名与()之间不能有空格</span></div><div class="line"><span class="string">"no-sparse-arrays"</span>: <span class="number">2</span>,<span class="comment">//禁止稀疏数组， [1,,2]</span></div><div class="line"><span class="string">"no-sync"</span>: <span class="number">0</span>,<span class="comment">//nodejs 禁止同步方法</span></div><div class="line"><span class="string">"no-ternary"</span>: <span class="number">0</span>,<span class="comment">//禁止使用三目运算符</span></div><div class="line"><span class="string">"no-trailing-spaces"</span>: <span class="number">1</span>,<span class="comment">//一行结束后面不要有空格</span></div><div class="line"><span class="string">"no-this-before-super"</span>: <span class="number">0</span>,<span class="comment">//在调用super()之前不能使用this或super</span></div><div class="line"><span class="string">"no-throw-literal"</span>: <span class="number">2</span>,<span class="comment">//禁止抛出字面量错误 throw "error";</span></div><div class="line"><span class="string">"no-undef"</span>: <span class="number">1</span>,<span class="comment">//不能有未定义的变量</span></div><div class="line"><span class="string">"no-undef-init"</span>: <span class="number">2</span>,<span class="comment">//变量初始化时不能直接给它赋值为undefined</span></div><div class="line"><span class="string">"no-undefined"</span>: <span class="number">2</span>,<span class="comment">//不能使用undefined</span></div><div class="line"><span class="string">"no-unexpected-multiline"</span>: <span class="number">2</span>,<span class="comment">//避免多行表达式</span></div><div class="line"><span class="string">"no-underscore-dangle"</span>: <span class="number">1</span>,<span class="comment">//标识符不能以_开头或结尾</span></div><div class="line"><span class="string">"no-unneeded-ternary"</span>: <span class="number">2</span>,<span class="comment">//禁止不必要的嵌套 var isYes = answer === 1 ? true : false;</span></div><div class="line"><span class="string">"no-unreachable"</span>: <span class="number">2</span>,<span class="comment">//不能有无法执行的代码</span></div><div class="line"><span class="string">"no-unused-expressions"</span>: <span class="number">2</span>,<span class="comment">//禁止无用的表达式</span></div><div class="line"><span class="string">"no-unused-vars"</span>: [<span class="number">2</span>, &#123;<span class="string">"vars"</span>: <span class="string">"all"</span>, <span class="string">"args"</span>: <span class="string">"after-used"</span>&#125;],<span class="comment">//不能有声明后未被使用的变量或参数</span></div><div class="line"><span class="string">"no-use-before-define"</span>: <span class="number">2</span>,<span class="comment">//未定义前不能使用</span></div><div class="line"><span class="string">"no-useless-call"</span>: <span class="number">2</span>,<span class="comment">//禁止不必要的call和apply</span></div><div class="line"><span class="string">"no-void"</span>: <span class="number">2</span>,<span class="comment">//禁用void操作符</span></div><div class="line"><span class="string">"no-var"</span>: <span class="number">0</span>,<span class="comment">//禁用var，用let和const代替</span></div><div class="line"><span class="string">"no-warning-comments"</span>: [<span class="number">1</span>, &#123; <span class="string">"terms"</span>: [<span class="string">"todo"</span>, <span class="string">"fixme"</span>, <span class="string">"xxx"</span>], <span class="string">"location"</span>: <span class="string">"start"</span> &#125;],<span class="comment">//不能有警告备注</span></div><div class="line"><span class="string">"no-with"</span>: <span class="number">2</span>,<span class="comment">//禁用with</span></div><div class="line"><span class="string">"array-bracket-spacing"</span>: [<span class="number">2</span>, <span class="string">"never"</span>],<span class="comment">//是否允许非空数组里面有多余的空格</span></div><div class="line"><span class="string">"arrow-parens"</span>: <span class="number">0</span>,<span class="comment">//箭头函数用小括号括起来</span></div><div class="line"><span class="string">"arrow-spacing"</span>: <span class="number">0</span>,<span class="comment">//=&gt;的前/后括号</span></div><div class="line"><span class="string">"accessor-pairs"</span>: <span class="number">0</span>,<span class="comment">//在对象中使用getter/setter</span></div><div class="line"><span class="string">"block-scoped-var"</span>: <span class="number">0</span>,<span class="comment">//块语句中使用var</span></div><div class="line"><span class="string">"brace-style"</span>: [<span class="number">1</span>, <span class="string">"1tbs"</span>],<span class="comment">//大括号风格</span></div><div class="line"><span class="string">"callback-return"</span>: <span class="number">1</span>,<span class="comment">//避免多次调用回调什么的</span></div><div class="line"><span class="string">"camelcase"</span>: <span class="number">2</span>,<span class="comment">//强制驼峰法命名</span></div><div class="line"><span class="string">"comma-dangle"</span>: [<span class="number">2</span>, <span class="string">"never"</span>],<span class="comment">//对象字面量项尾不能有逗号</span></div><div class="line"><span class="string">"comma-spacing"</span>: <span class="number">0</span>,<span class="comment">//逗号前后的空格</span></div><div class="line"><span class="string">"comma-style"</span>: [<span class="number">2</span>, <span class="string">"last"</span>],<span class="comment">//逗号风格，换行时在行首还是行尾</span></div><div class="line"><span class="string">"complexity"</span>: [<span class="number">0</span>, <span class="number">11</span>],<span class="comment">//循环复杂度</span></div><div class="line"><span class="string">"computed-property-spacing"</span>: [<span class="number">0</span>, <span class="string">"never"</span>],<span class="comment">//是否允许计算后的键名什么的</span></div><div class="line"><span class="string">"consistent-return"</span>: <span class="number">0</span>,<span class="comment">//return 后面是否允许省略</span></div><div class="line"><span class="string">"consistent-this"</span>: [<span class="number">2</span>, <span class="string">"that"</span>],<span class="comment">//this别名</span></div><div class="line"><span class="string">"constructor-super"</span>: <span class="number">0</span>,<span class="comment">//非派生类不能调用super，派生类必须调用super</span></div><div class="line"><span class="string">"curly"</span>: [<span class="number">2</span>, <span class="string">"all"</span>],<span class="comment">//必须使用 if()&#123;&#125; 中的&#123;&#125;</span></div><div class="line"><span class="string">"default-case"</span>: <span class="number">2</span>,<span class="comment">//switch语句最后必须有default</span></div><div class="line"><span class="string">"dot-location"</span>: <span class="number">0</span>,<span class="comment">//对象访问符的位置，换行的时候在行首还是行尾</span></div><div class="line"><span class="string">"dot-notation"</span>: [<span class="number">0</span>, &#123; <span class="string">"allowKeywords"</span>: <span class="literal">true</span> &#125;],<span class="comment">//避免不必要的方括号</span></div><div class="line"><span class="string">"eol-last"</span>: <span class="number">0</span>,<span class="comment">//文件以单一的换行符结束</span></div><div class="line"><span class="string">"eqeqeq"</span>: <span class="number">2</span>,<span class="comment">//必须使用全等</span></div><div class="line"><span class="string">"func-names"</span>: <span class="number">0</span>,<span class="comment">//函数表达式必须有名字</span></div><div class="line"><span class="string">"func-style"</span>: [<span class="number">0</span>, <span class="string">"declaration"</span>],<span class="comment">//函数风格，规定只能使用函数声明/函数表达式</span></div><div class="line"><span class="string">"generator-star-spacing"</span>: <span class="number">0</span>,<span class="comment">//生成器函数*的前后空格</span></div><div class="line"><span class="string">"guard-for-in"</span>: <span class="number">0</span>,<span class="comment">//for in循环要用if语句过滤</span></div><div class="line"><span class="string">"handle-callback-err"</span>: <span class="number">0</span>,<span class="comment">//nodejs 处理错误</span></div><div class="line"><span class="string">"id-length"</span>: <span class="number">0</span>,<span class="comment">//变量名长度</span></div><div class="line"><span class="string">"indent"</span>: [<span class="number">2</span>, <span class="number">4</span>],<span class="comment">//缩进风格</span></div><div class="line"><span class="string">"init-declarations"</span>: <span class="number">0</span>,<span class="comment">//声明时必须赋初值</span></div><div class="line"><span class="string">"key-spacing"</span>: [<span class="number">0</span>, &#123; <span class="string">"beforeColon"</span>: <span class="literal">false</span>, <span class="string">"afterColon"</span>: <span class="literal">true</span> &#125;],<span class="comment">//对象字面量中冒号的前后空格</span></div><div class="line"><span class="string">"lines-around-comment"</span>: <span class="number">0</span>,<span class="comment">//行前/行后备注</span></div><div class="line"><span class="string">"max-depth"</span>: [<span class="number">0</span>, <span class="number">4</span>],<span class="comment">//嵌套块深度</span></div><div class="line"><span class="string">"max-len"</span>: [<span class="number">0</span>, <span class="number">80</span>, <span class="number">4</span>],<span class="comment">//字符串最大长度</span></div><div class="line"><span class="string">"max-nested-callbacks"</span>: [<span class="number">0</span>, <span class="number">2</span>],<span class="comment">//回调嵌套深度</span></div><div class="line"><span class="string">"max-params"</span>: [<span class="number">0</span>, <span class="number">3</span>],<span class="comment">//函数最多只能有3个参数</span></div><div class="line"><span class="string">"max-statements"</span>: [<span class="number">0</span>, <span class="number">10</span>],<span class="comment">//函数内最多有几个声明</span></div><div class="line"><span class="string">"new-cap"</span>: <span class="number">2</span>,<span class="comment">//函数名首行大写必须使用new方式调用，首行小写必须用不带new方式调用</span></div><div class="line"><span class="string">"new-parens"</span>: <span class="number">2</span>,<span class="comment">//new时必须加小括号</span></div><div class="line"><span class="string">"newline-after-var"</span>: <span class="number">2</span>,<span class="comment">//变量声明后是否需要空一行</span></div><div class="line"><span class="string">"object-curly-spacing"</span>: [<span class="number">0</span>, <span class="string">"never"</span>],<span class="comment">//大括号内是否允许不必要的空格</span></div><div class="line"><span class="string">"object-shorthand"</span>: <span class="number">0</span>,<span class="comment">//强制对象字面量缩写语法</span></div><div class="line"><span class="string">"one-var"</span>: <span class="number">1</span>,<span class="comment">//连续声明</span></div><div class="line"><span class="string">"operator-assignment"</span>: [<span class="number">0</span>, <span class="string">"always"</span>],<span class="comment">//赋值运算符 += -=什么的</span></div><div class="line"><span class="string">"operator-linebreak"</span>: [<span class="number">2</span>, <span class="string">"after"</span>],<span class="comment">//换行时运算符在行尾还是行首</span></div><div class="line"><span class="string">"padded-blocks"</span>: <span class="number">0</span>,<span class="comment">//块语句内行首行尾是否要空行</span></div><div class="line"><span class="string">"prefer-const"</span>: <span class="number">0</span>,<span class="comment">//首选const</span></div><div class="line"><span class="string">"prefer-spread"</span>: <span class="number">0</span>,<span class="comment">//首选展开运算</span></div><div class="line"><span class="string">"prefer-reflect"</span>: <span class="number">0</span>,<span class="comment">//首选Reflect的方法</span></div><div class="line"><span class="string">"quotes"</span>: [<span class="number">1</span>, <span class="string">"single"</span>],<span class="comment">//引号类型 `` "" ''</span></div><div class="line"><span class="string">"quote-props"</span>:[<span class="number">2</span>, <span class="string">"always"</span>],<span class="comment">//对象字面量中的属性名是否强制双引号</span></div><div class="line"><span class="string">"radix"</span>: <span class="number">2</span>,<span class="comment">//parseInt必须指定第二个参数</span></div><div class="line"><span class="string">"id-match"</span>: <span class="number">0</span>,<span class="comment">//命名检测</span></div><div class="line"><span class="string">"require-yield"</span>: <span class="number">0</span>,<span class="comment">//生成器函数必须有yield</span></div><div class="line"><span class="string">"semi"</span>: [<span class="number">2</span>, <span class="string">"always"</span>],<span class="comment">//语句强制分号结尾</span></div><div class="line"><span class="string">"semi-spacing"</span>: [<span class="number">0</span>, &#123;<span class="string">"before"</span>: <span class="literal">false</span>, <span class="string">"after"</span>: <span class="literal">true</span>&#125;],<span class="comment">//分号前后空格</span></div><div class="line"><span class="string">"sort-vars"</span>: <span class="number">0</span>,<span class="comment">//变量声明时排序</span></div><div class="line"><span class="string">"space-after-keywords"</span>: [<span class="number">0</span>, <span class="string">"always"</span>],<span class="comment">//关键字后面是否要空一格</span></div><div class="line"><span class="string">"space-before-blocks"</span>: [<span class="number">0</span>, <span class="string">"always"</span>],<span class="comment">//不以新行开始的块&#123;前面要不要有空格</span></div><div class="line"><span class="string">"space-before-function-paren"</span>: [<span class="number">0</span>, <span class="string">"always"</span>],<span class="comment">//函数定义时括号前面要不要有空格</span></div><div class="line"><span class="string">"space-in-parens"</span>: [<span class="number">0</span>, <span class="string">"never"</span>],<span class="comment">//小括号里面要不要有空格</span></div><div class="line"><span class="string">"space-infix-ops"</span>: <span class="number">0</span>,<span class="comment">//中缀操作符周围要不要有空格</span></div><div class="line"><span class="string">"space-return-throw-case"</span>: <span class="number">2</span>,<span class="comment">//return throw case后面要不要加空格</span></div><div class="line"><span class="string">"space-unary-ops"</span>: [<span class="number">0</span>, &#123; <span class="string">"words"</span>: <span class="literal">true</span>, <span class="string">"nonwords"</span>: <span class="literal">false</span> &#125;],<span class="comment">//一元运算符的前/后要不要加空格</span></div><div class="line"><span class="string">"spaced-comment"</span>: <span class="number">0</span>,<span class="comment">//注释风格不要有空格什么的</span></div><div class="line"><span class="string">"strict"</span>: <span class="number">2</span>,<span class="comment">//使用严格模式</span></div><div class="line"><span class="string">"use-isnan"</span>: <span class="number">2</span>,<span class="comment">//禁止比较时使用NaN，只能用isNaN()</span></div><div class="line"><span class="string">"valid-jsdoc"</span>: <span class="number">0</span>,<span class="comment">//jsdoc规则</span></div><div class="line"><span class="string">"valid-typeof"</span>: <span class="number">2</span>,<span class="comment">//必须使用合法的typeof的值</span></div><div class="line"><span class="string">"vars-on-top"</span>: <span class="number">2</span>,<span class="comment">//var必须放在作用域顶部</span></div><div class="line"><span class="string">"wrap-iife"</span>: [<span class="number">2</span>, <span class="string">"inside"</span>],<span class="comment">//立即执行函数表达式的小括号风格</span></div><div class="line"><span class="string">"wrap-regex"</span>: <span class="number">0</span>,<span class="comment">//正则表达式字面量用小括号包起来</span></div><div class="line"><span class="string">"yoda"</span>: [<span class="number">2</span>, <span class="string">"never"</span>]<span class="comment">//禁止尤达条件</span></div><div class="line">  &#125;  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="参考文章："><a href="#参考文章：" class="headerlink" title="参考文章："></a>参考文章：</h3><p><a href="https://segmentfault.com/a/1190000004468428" target="_blank" rel="external">ESLint配置参数介绍</a><br><a href="http://www.cnblogs.com/nklong/p/7233631.html" target="_blank" rel="external">关于eslint使用规则，和各种报错应对书写规则。</a></p>
<p> vue2.0</p>

      
    </div>
      
        
        
      
      <div class="clearfix"></div>
      </footer>
  </div>
</article>





  <article class="post">
  <div class="post-content">
    <header>
      
  
    <h1 class="title"><a href="/2017/06/25/Vue之入门综合项目实战/">Vue(Vue综合实战项目)</a></h1>
  

      
        <time datetime="2017-06-25T05:17:02.000Z">2017-06-25</time>
      
    </header>
    <div class="entry">
      
        <a id="more"></a>
<h1 id="正文开始"><a href="#正文开始" class="headerlink" title="正文开始"></a>正文开始</h1><p><center style="font-size: 30px"><code>Vue综合实战项目</code></center></p>
<hr>
<h1 id="Vue综合实战项目"><a href="#Vue综合实战项目" class="headerlink" title="Vue综合实战项目"></a>Vue综合实战项目</h1><h2 id="前置知识学习"><a href="#前置知识学习" class="headerlink" title="前置知识学习"></a>前置知识学习</h2><ul>
<li>npm 学习<ul>
<li><a href="https://docs.npmjs.com/" target="_blank" rel="external">官方文档</a></li>
<li>推荐资料<ul>
<li><a href="http://www.cnblogs.com/kelsen/p/4947859.html" target="_blank" rel="external">npm入门</a></li>
<li><a href="http://www.nodeclass.com/articles/810142" target="_blank" rel="external">npm介绍</a></li>
</ul>
</li>
<li>需要了解的知识点<ul>
<li><code>package.json</code> 文件相关配置选项</li>
<li>npm 本地安装、全局安装、本地开发安装等区别及相关命令</li>
<li>npm script脚步的基本编写能力</li>
</ul>
</li>
</ul>
</li>
</ul>
<blockquote>
<p>有时间专门写一个这样的专题，如果需要可以邮件我。modifywyx@gmail.com</p>
</blockquote>
<ul>
<li><p>webpack基础学习</p>
<ul>
<li><a href="https://webpack.js.org/" target="_blank" rel="external">官方文档</a></li>
<li>Webpack了解的知识点：<ul>
<li>webpack的基本配置</li>
<li>了解webpack常用的loader： less-loader、sass-loader、 vue-loader、style-loader、css-loader、eslint-loader、babel-loader等</li>
<li>熟悉Webpack的webpack-dev-server的基本配置和使用，会配置热更新</li>
</ul>
</li>
</ul>
</li>
<li><p>es6语法学习</p>
<ul>
<li>阮一峰老师的大作<a href="http://es6.ruanyifeng.com/" target="_blank" rel="external">《ECMAScript 6 入门》</a></li>
<li>需要学习的知识点<ul>
<li>es6的模块机制</li>
<li>各种最新语法糖，简写、geter、setter、箭头函数</li>
<li>类、继承的心机制<br>…</li>
</ul>
</li>
</ul>
</li>
<li><p>nodejs基础知识</p>
<ul>
<li>知识点学习：<ul>
<li>文件操作</li>
<li>http服务</li>
<li>express</li>
</ul>
</li>
</ul>
</li>
<li><p>组件化开发思想</p>
</li>
</ul>
<h2 id="Vue脚手架工具：vue-cli构建实战项目"><a href="#Vue脚手架工具：vue-cli构建实战项目" class="headerlink" title="Vue脚手架工具：vue-cli构建实战项目"></a>Vue脚手架工具：<code>vue-cli</code>构建实战项目</h2><p>其实如果编写Vue的前端项目，直接使用vue的官方vue-cli构建工具最好用，一个命令就可以直接生成项目的结构和目录。<br>而且官方需要依赖的包也可以自动配置好，只需要npm instal一下，然后就可以开发测试了。</p>
<h3 id="vue-cli安装"><a href="#vue-cli安装" class="headerlink" title="vue-cli安装"></a><code>vue-cli</code>安装</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#</span> 安装vue-cli。  安装之前首先确保你已经安装好了nodejs 而且打开命令行</div><div class="line"><span class="meta">$</span> npm install -g vue-cli</div><div class="line"><span class="meta"></span></div><div class="line"># 校验一下是否安装成功</div><div class="line"><span class="meta">$</span> vue -V</div><div class="line"><span class="meta"></span></div><div class="line">#=&gt;  2.5.1  我当前的版本是这个，你的可能比这个新</div></pre></td></tr></table></figure>
<h3 id="使用vue-cli初始化项目"><a href="#使用vue-cli初始化项目" class="headerlink" title="使用vue-cli初始化项目"></a>使用<code>vue-cli</code>初始化项目</h3><p>通过以下命令的方式可以创建一个项目文件夹，并初始化对应的文件。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span> vue init &lt;template-name&gt; &lt;project-name&gt;</div></pre></td></tr></table></figure>
<p>其中template-name可以取以下值，每个值对应不同的项目构建的模板。</p>
<ul>
<li><a href="https://github.com/vuejs-templates/webpack" target="_blank" rel="external">webpack</a>–全功能的Webpack + vueify，包括热加载，静态检测，单元测试</li>
<li><a href="https://github.com/vuejs-templates/webpack-simple" target="_blank" rel="external">webpack</a>-simple–一个简易的Webpack + vueify，以便于快速开始。</li>
<li><a href="https://github.com/vuejs-templates/browserify" target="_blank" rel="external">browserify</a>–全功能的Browserify + vueify，包括热加载，静态检测，单元测试</li>
<li><a href="https://github.com/vuejs-templates/browserify-simple" target="_blank" rel="external">browserify</a>-simple–一个简易的Browserify + vueify，以便于快速开始。</li>
</ul>
<p>安装和开发控制台的命令：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#</span> 如果已经安装，请省略</div><div class="line"><span class="meta">$</span> npm install -g vue-cli</div><div class="line"><span class="meta"></span></div><div class="line"># 初始化一个webpack全功能包的vue项目，请您把my-project换成你自己的项目名。</div><div class="line"><span class="meta">$</span> vue init webpack my-project</div><div class="line"><span class="meta"></span></div><div class="line"># 用命令行进入当前项目目录</div><div class="line"><span class="meta">$</span> cd my-project</div><div class="line"><span class="meta"></span></div><div class="line"># npm安装所有的依赖的包</div><div class="line"><span class="meta">$</span> npm install</div><div class="line"><span class="meta"></span></div><div class="line"># 运行测试的首页</div><div class="line"><span class="meta">$</span> npm run dev</div></pre></td></tr></table></figure>
<h3 id="综合实例开发记录"><a href="#综合实例开发记录" class="headerlink" title="综合实例开发记录"></a>综合实例开发记录</h3><ol>
<li>通过vue-cli构建工具初始化项目目录</li>
</ol>
<blockquote>
<p>安装过程，控制台会问你项目名称是什么？项目描述？项目作者，是否使用eslint校验，是否使用单元测试等….</p>
</blockquote>
<p>我的安装过程如下请参考：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span> vue init webpack ttl                        # =&gt; 安装webpack模板的项目 ttl（项目名可以随便取）</div><div class="line"></div><div class="line">  A newer version of vue-cli is available.</div><div class="line"></div><div class="line">  latest:    2.6.0</div><div class="line">  installed: 2.5.1</div><div class="line"></div><div class="line">  This will install Vue 2.x version of template.</div><div class="line"></div><div class="line">  For Vue 1.x use: vue init webpack#1.0 ttl</div><div class="line"></div><div class="line">? Project name mydemovue                        # =&gt; 项目名称</div><div class="line">? Project description A Vue.js project          # =&gt; 项目描述</div><div class="line">? Author malun &lt;malun666@126.com&gt;               # =&gt; 作者</div><div class="line">? Vue build standalone                          # =&gt; 是否支持单文件组件</div><div class="line">? Use ESLint to lint your code? Yes             # =&gt; 是否支持ESLint代码校验</div><div class="line">? Pick an ESLint preset Standard                # =&gt; 校验的标准是什么？</div><div class="line">? Setup unit tests with Karma + Mocha? Yes      # =&gt; 是否使用单元测试</div><div class="line">? Setup e2e tests with Nightwatch? Yes          # =&gt; 是否使用e2e测试</div><div class="line"></div><div class="line">   vue-cli · Generated "ttl".</div><div class="line"></div><div class="line">   To get started:</div><div class="line"></div><div class="line">     cd ttl</div><div class="line">     npm install</div><div class="line">     npm run dev</div><div class="line"></div><div class="line">   Documentation can be found at https://vuejs-templates.github.io/webpack</div></pre></td></tr></table></figure>
<p>通过上面一系列的命令后，我们就会创建一个webpack配置好的项目包。目录结构如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">ttl</div><div class="line">|--.babelrc           #=&gt; babel的配置文件，主要用于转换es6等最新的js语法。</div><div class="line">|--.editorconfig      #=&gt; 编辑器配置</div><div class="line">|--.eslintignore      #=&gt; eslint的忽略校验的配置文件</div><div class="line">|--.eslintrc.js       #=&gt; eslint的配置校验js是否规范的配置文件</div><div class="line">|--.gitignore         #=&gt; 设置git忽略的管理的文件</div><div class="line">|--README.md          #=&gt; readme说明文件</div><div class="line">|--build/             #=&gt; 自动构建存放的文件地方</div><div class="line">|--config/            #=&gt; 当前开发、测试等配置的文件，需要懂点nodejs了啊。</div><div class="line">|--index.html         #=&gt; 项目的主入口的模板</div><div class="line">|--package.json       #=&gt; npm的配置文件</div><div class="line">|--src/               #=&gt; 源码目录</div><div class="line">|--static/            #=&gt; 静态资源存放的目录</div><div class="line">|--test/              #=&gt; 测试相关目录</div></pre></td></tr></table></figure>
<ol>
<li>初始化依赖包</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span> cd ttl              #=&gt; 进入上面创建好的项目目录</div><div class="line"><span class="meta">$</span> npm install         #=&gt; 安装所有的依赖包。  安装过程可能非常长，网络也可能有问题，请耐心等待。</div><div class="line"><span class="meta"></span></div><div class="line"># 安装完成后，可以直接运行测试,如果自动打开浏览器，并跳转到http://localhost:8080/ 说明一切都ok了。</div><div class="line"><span class="meta">$</span> npm run dev</div></pre></td></tr></table></figure>
<blockquote>
<p>npm 安装的时候经常网会断开，国内的网（哎，说多了都是泪）你懂的。最好能科学上网，或者是用淘宝的npm的镜像</p>
</blockquote>
<ol>
<li>安装<code>vue-router</code>组件</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span> npm i -S vue-router</div></pre></td></tr></table></figure>
<ol>
<li>到项目的 <code>/src/components/</code> 目录下创建三个组件文件。</li>
</ol>
<p>分别是：</p>
<ul>
<li><p>首页组件</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"home"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>&#123;&#123; msg &#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</div><div class="line">  <span class="attr">name</span>: <span class="string">'home'</span>,     <span class="comment">// 组件可以有自己的名字。</span></div><div class="line">  data () &#123;         <span class="comment">// 组件的data必须是函数</span></div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">      <span class="attr">msg</span>: <span class="string">'这里是Home视图'</span></div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="undefined"></span></div><div class="line">h3 &#123;</div><div class="line">  background-color: #82c;</div><div class="line">&#125;</div><div class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p>用户首页组件</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>&#123;&#123; msg &#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;    <span class="comment">// es6的模块导出定义语法，此模块导出默认的对象</span></div><div class="line">  name: <span class="string">'user'</span>,     <span class="comment">// 组件可以有自己的名字。</span></div><div class="line">  data () &#123;         <span class="comment">// 组件的data必须是函数</span></div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">      <span class="attr">msg</span>: <span class="string">'这里是User视图'</span></div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="undefined"></span></div><div class="line">h3 &#123;</div><div class="line">  background-color: red;</div><div class="line">&#125;</div><div class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p>产品组件</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"product"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>&#123;&#123; msg &#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</div><div class="line">  <span class="attr">name</span>: <span class="string">'product'</span>,     <span class="comment">// 组件可以有自己的名字。</span></div><div class="line">  data () &#123;         <span class="comment">// 组件的data必须是函数</span></div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">      <span class="attr">msg</span>: <span class="string">'这里是Home视图'</span></div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="undefined"></span></div><div class="line">h3 &#123;</div><div class="line">  background-color: green;</div><div class="line">&#125;</div><div class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
</ul>
<p>项目的目录结构为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">ttl</div><div class="line">|-- src</div><div class="line">|--|-- Hello.vue</div><div class="line">|--|-- Home.vue</div><div class="line">|--|-- Product.vue</div><div class="line">|--|-- User.vue</div></pre></td></tr></table></figure>
<ol>
<li>创建router对象及配置路由</li>
</ol>
<p>在<code>src</code>目录下创建<code>approuter.js</code>文件。<br>然后添加如下代码：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> VueRouter <span class="keyword">from</span> <span class="string">'vue-router'</span>              <span class="comment">// 导入路由模块</span></div><div class="line"><span class="keyword">import</span> Home <span class="keyword">from</span> <span class="string">'./components/Home.vue'</span>        <span class="comment">// 导入Home组件</span></div><div class="line"><span class="keyword">import</span> User <span class="keyword">from</span> <span class="string">'./components/User.vue'</span></div><div class="line"><span class="keyword">import</span> Product <span class="keyword">from</span> <span class="string">'./components/Product.vue'</span></div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> VueRouter(&#123;                  <span class="comment">// 定义路由规则对象</span></div><div class="line">  routes: [</div><div class="line">    &#123;<span class="attr">path</span>: <span class="string">'/home'</span>, <span class="attr">component</span>: Home&#125;,</div><div class="line">    &#123;<span class="attr">path</span>: <span class="string">'/user/:id'</span>, <span class="attr">component</span>: User&#125;,</div><div class="line">    &#123;<span class="attr">path</span>: <span class="string">'/product/:id'</span>, <span class="attr">component</span>: Product&#125;</div><div class="line">  ]</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<ol>
<li>修改main.js文件<br>找到<code>src/</code>目录下的main.js文件，<br>共修改4处，添加路由引用、添加路由规则对象导入、启用路由、将路由键入到Vue中。<br>修改此文件为：</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// The Vue build version to load with the `import` command</span></div><div class="line"><span class="comment">// (runtime-only or standalone) has been set in webpack.base.conf with an alias.</span></div><div class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></div><div class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">'./App'</span></div><div class="line"><span class="keyword">import</span> VueRouter <span class="keyword">from</span> <span class="string">'vue-router'</span>      <span class="comment">// +++1、导入路由组件</span></div><div class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">'./approuter'</span>        <span class="comment">// +++2、导入我们自己写的路由配置文件</span></div><div class="line"></div><div class="line"><span class="comment">// +++ 3、使用路由组件</span></div><div class="line">Vue.use(VueRouter)</div><div class="line"></div><div class="line"><span class="comment">/* eslint-disable no-new */</span></div><div class="line"><span class="keyword">new</span> Vue(&#123;</div><div class="line">  <span class="attr">el</span>: <span class="string">'#app'</span>,</div><div class="line">  <span class="attr">template</span>: <span class="string">'&lt;App/&gt;'</span>,</div><div class="line">  <span class="attr">components</span>: &#123; App &#125;,</div><div class="line">  <span class="attr">router</span>: router                        <span class="comment">// +++4、添加路由对象</span></div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<ol>
<li>在app.vue中添加路由导航</li>
</ol>
<p>最终代码如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">nav</span> <span class="attr">class</span>=<span class="string">"top-menu"</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">ul</span> &gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">"item in menuList"</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">:to</span>=<span class="string">"item.url"</span>&gt;</span>&#123;&#123; item.name &#125;&#125;<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">nav</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">hr</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</div><div class="line">  <span class="attr">name</span>: <span class="string">'app'</span>,</div><div class="line">  <span class="attr">data</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">      <span class="attr">menuList</span>: [</div><div class="line">        &#123; <span class="attr">name</span>: <span class="string">'首页'</span>, <span class="attr">url</span>: <span class="string">'/home'</span> &#125;,</div><div class="line">        &#123; <span class="attr">name</span>: <span class="string">'用户'</span>, <span class="attr">url</span>: <span class="string">'/user/19'</span> &#125;,</div><div class="line">        &#123; <span class="attr">name</span>: <span class="string">'产品'</span>, <span class="attr">url</span>: <span class="string">'/product/20'</span> &#125;</div><div class="line">      ]</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></div><div class="line">#app &#123;</div><div class="line"></div><div class="line">&#125;</div><div class="line">.top-menu ul, .top-menu li &#123;</div><div class="line">  list-style: none;</div><div class="line">&#125;</div><div class="line">.top-menu &#123;</div><div class="line">  overflow: hidden;</div><div class="line">&#125;</div><div class="line">.top-menu li &#123;</div><div class="line">  float: left;</div><div class="line">  width: 100px;</div><div class="line">&#125;</div><div class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></div></pre></td></tr></table></figure>
<p>刷新一下浏览器，你将会看到最终的运行结果。</p>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>Vue的入门系列基本都写完了，大部分内容是参考了官网的文档。</p>
<p>还有很多内容没有整理到这个系列中。比如：vue的过渡动画，vue的异步刷新队列，vue的过滤器等，我相信你通过本文档就能<br>实现vue的入门了，那些琐碎的知识点只要看一下官方的文档应该很容入门。</p>
<p>这一次整理过程，让我对Vue有了更深入的认识，之前不熟悉的东西，强迫自己把<br>文档写一遍后，认识比以前更清晰了。Vue确实带来很多的惊喜。希望这个文档对你有用。</p>

      
    </div>
      
        
        
      
      <div class="clearfix"></div>
      </footer>
  </div>
</article>





  <article class="post">
  <div class="post-content">
    <header>
      
  
    <h1 class="title"><a href="/2017/06/25/vue入门之vuex实战/">Vue入门之Vuex实战</a></h1>
  

      
        <time datetime="2017-06-25T05:17:02.000Z">2017-06-25</time>
      
    </header>
    <div class="entry">
      
        <a id="more"></a>
<h1 id="正文开始"><a href="#正文开始" class="headerlink" title="正文开始"></a>正文开始</h1><p><center style="font-size: 30px"><code>Vue入门之Vuex实战</code></center></p>
<hr>
<h1 id="Vue入门之Vuex实战"><a href="#Vue入门之Vuex实战" class="headerlink" title="Vue入门之Vuex实战"></a>Vue入门之Vuex实战</h1><h2 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h2><p>Vue组件化做的确实非常彻底，它独有的vue单文件组件也是做的非常有特色。组件化的同时带来的是：组件之间的数据共享和通信的难题。<br>尤其Vue组件设计的就是，父组件通过子组件的prop进行传递数据，而且数据传递是<code>单向</code>的。也就是说：父组件可以把数据传递给子组件，但是<br>反之则不同。如下图所示：</p>
<p><img src="http://orzuutv5f.bkt.clouddn.com/05vue.png" alt="vue父子传递"></p>
<h2 id="单向数据流动"><a href="#单向数据流动" class="headerlink" title="单向数据流动"></a>单向数据流动</h2><p>单方向的数据流动带来了非常简洁和清晰的数据流，纯展示性或者独立性较强的模块的开发确实非常方便和省事。<br>但是复杂的页面逻辑，组件之间的数据共享处理就会需要通过事件总线的方式解决或者使用Vue的Vuex框架了。</p>
<h2 id="子组件通知父组件数据更新：事件方式的实现"><a href="#子组件通知父组件数据更新：事件方式的实现" class="headerlink" title="子组件通知父组件数据更新：事件方式的实现"></a>子组件通知父组件数据更新：事件方式的实现</h2><p>子组件可以在子组件内触发事件，然后在父容器中添加子组件时绑定父容器的方法为事件响应方法的方式.如下图所示：</p>
<p><img src="http://orzuutv5f.bkt.clouddn.com/06vue.png" alt="vue父子传递"></p>
<ul>
<li>使用 v-on 绑定自定义事件</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">每个 Vue 实例都实现了事件接口(Events interface)，即：</div><div class="line">使用 $on(eventName) 监听事件</div><div class="line">使用 $emit(eventName) 触发事件</div></pre></td></tr></table></figure>
<p>参考代码案例：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Vue入门之event message<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">  <span class="comment">&lt;!-- 新 Bootstrap 核心 CSS 文件 --&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"http://cdn.bootcss.com/bootstrap/3.3.0/css/bootstrap.min.css"</span>&gt;</span></div><div class="line"></div><div class="line">  <span class="comment">&lt;!-- 可选的Bootstrap主题文件（一般不用引入） --&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"http://cdn.bootcss.com/bootstrap/3.3.0/css/bootstrap-theme.min.css"</span>&gt;</span></div><div class="line"></div><div class="line">  <span class="comment">&lt;!-- jQuery文件。务必在bootstrap.min.js 之前引入 --&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"http://cdn.bootcss.com/jquery/1.11.1/jquery.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"></div><div class="line">  <span class="comment">&lt;!-- 最新的 Bootstrap 核心 JavaScript 文件 --&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"http://cdn.bootcss.com/bootstrap/3.3.0/js/bootstrap.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"></div><div class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://unpkg.com/vue/dist/vue.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://unpkg.com/vue-router/dist/vue-router.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>推荐次数：&#123;&#123; voteCount &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">hr</span>&gt;</span></div><div class="line">    <span class="comment">&lt;!--绑定两个自定义事件，当组件内部触发了事件后，会自定调用父容器绑定的methods的方法，达到了子容器向父容器数据进行通信同步的方法--&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">vote-btn</span> <span class="attr">v-on:vote</span>=<span class="string">"voteAction"</span> <span class="attr">v-on:sendmsg</span>=<span class="string">"sendMsgAction"</span>&gt;</span><span class="tag">&lt;/<span class="name">vote-btn</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">hr</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"list-group"</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">"o in msg"</span> <span class="attr">class</span>=<span class="string">"list-group-item"</span>&gt;</span>&#123;&#123;o&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    Vue.component(<span class="string">'vote-btn'</span>, &#123;</div><div class="line">      <span class="attr">template</span>: <span class="string">`</span></div><div class="line">        &lt;div&gt;</div><div class="line">          &lt;button class="btn btn-success" v-on:click="voteArticle"&gt;推荐&lt;/button&gt;</div><div class="line">          &lt;hr/&gt;</div><div class="line">          &lt;input type="text" v-model="txtMsg" /&gt;</div><div class="line">          &lt;button v-on:click="sendMsg" class="btn btn-success"&gt;发送消息&lt;/button&gt;</div><div class="line">        &lt;/div&gt;</div><div class="line">      `,</div><div class="line">      <span class="attr">data</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> &#123;</div><div class="line">          <span class="attr">txtMsg</span>: <span class="string">""</span></div><div class="line">        &#125;</div><div class="line">      &#125;,</div><div class="line">      <span class="attr">methods</span>: &#123;</div><div class="line">        <span class="attr">voteArticle</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">          <span class="comment">// 触发事件，vote</span></div><div class="line">          <span class="keyword">this</span>.$emit(<span class="string">'vote'</span>)</div><div class="line">        &#125;,</div><div class="line">        <span class="attr">sendMsg</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">          <span class="comment">// 触发事件，sendmsg，并</span></div><div class="line">          <span class="keyword">this</span>.$emit(<span class="string">'sendmsg'</span>, <span class="keyword">this</span>.txtMsg)</div><div class="line">        &#125;</div><div class="line">      &#125;</div><div class="line">    &#125;)</div><div class="line"></div><div class="line">    <span class="keyword">var</span> app = <span class="keyword">new</span> Vue(&#123;</div><div class="line">      <span class="attr">el</span>: <span class="string">'#app'</span>,</div><div class="line">      <span class="attr">data</span>: &#123;</div><div class="line">        <span class="attr">voteCount</span>: <span class="number">0</span>,</div><div class="line">        <span class="attr">msg</span>: []</div><div class="line">      &#125;,</div><div class="line">      <span class="attr">methods</span>: &#123;</div><div class="line">        <span class="attr">voteAction</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;  <span class="comment">// 事件触发后，会直接执行此方法</span></div><div class="line">          <span class="keyword">this</span>.voteCount += <span class="number">1</span></div><div class="line">        &#125;,</div><div class="line">        <span class="attr">sendMsgAction</span>: <span class="function"><span class="keyword">function</span> (<span class="params">item</span>) </span>&#123;</div><div class="line">          <span class="keyword">this</span>.msg.push(item)</div><div class="line">        &#125;</div><div class="line">      &#125;</div><div class="line">    &#125;);</div><div class="line">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure></p>
<h2 id="事件总线方式解决非父子组件数据同步"><a href="#事件总线方式解决非父子组件数据同步" class="headerlink" title="事件总线方式解决非父子组件数据同步"></a>事件总线方式解决非父子组件数据同步</h2><p>如果非父子组件怎么通过事件进行同步数据，或者同步消息呢？Vue中的事件触发和监听都是跟一个具体的Vue实例挂钩。<br>所以在不同的Vue实例中想进行事件的统一跟踪和触发，那就需要一个公共的Vue实例，这个实例就是公共的事件对象。</p>
<p><img src="http://orzuutv5f.bkt.clouddn.com/07eventbus.png" alt=""></p>
<p>参考下面做的一个购物车的案例的代码：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Vue入门之event message<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">  <span class="comment">&lt;!-- 新 Bootstrap 核心 CSS 文件 --&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"http://cdn.bootcss.com/bootstrap/3.3.0/css/bootstrap.min.css"</span>&gt;</span></div><div class="line"></div><div class="line">  <span class="comment">&lt;!-- 可选的Bootstrap主题文件（一般不用引入） --&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"http://cdn.bootcss.com/bootstrap/3.3.0/css/bootstrap-theme.min.css"</span>&gt;</span></div><div class="line"></div><div class="line">  <span class="comment">&lt;!-- jQuery文件。务必在bootstrap.min.js 之前引入 --&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"http://cdn.bootcss.com/jquery/1.11.1/jquery.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"></div><div class="line">  <span class="comment">&lt;!-- 最新的 Bootstrap 核心 JavaScript 文件 --&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"http://cdn.bootcss.com/bootstrap/3.3.0/js/bootstrap.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"></div><div class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://unpkg.com/vue/dist/vue.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://unpkg.com/vue-router/dist/vue-router.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">product-list</span> <span class="attr">:products</span>=<span class="string">"products"</span> <span class="attr">v-on:addpro</span>=<span class="string">"addToCarts"</span>&gt;</span> <span class="tag">&lt;/<span class="name">product-list</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">hr</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">cart</span> <span class="attr">:cart-products</span>=<span class="string">"carts"</span>&gt;</span> <span class="tag">&lt;/<span class="name">cart</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="keyword">var</span> eventBus = <span class="keyword">new</span> Vue()</div><div class="line"></div><div class="line">    Vue.component(<span class="string">'cart'</span>, &#123;</div><div class="line">      <span class="attr">template</span>: <span class="string">`</span></div><div class="line">      &lt;table class="table table-borderd table-striped table-hover"&gt;</div><div class="line">      &lt;thead&gt;</div><div class="line">        &lt;tr&gt;</div><div class="line">          &lt;th&gt;商品编号&lt;/th&gt;</div><div class="line">          &lt;th&gt;商品名&lt;/th&gt;</div><div class="line">          &lt;th&gt;数量&lt;/th&gt;</div><div class="line">          &lt;th&gt;操作&lt;/th&gt;</div><div class="line">        &lt;/tr&gt;</div><div class="line">      &lt;/thead&gt;</div><div class="line">      &lt;tbody&gt;</div><div class="line">        &lt;tr v-for="item in cartProducts"&gt;</div><div class="line"></div><div class="line">          &lt;td&gt;&#123;&#123; item.id &#125;&#125;&lt;/td&gt;</div><div class="line">          &lt;td&gt;&#123;&#123; item.name &#125;&#125;&lt;/td&gt;</div><div class="line">          &lt;td&gt;</div><div class="line">            &#123;&#123; item.count &#125;&#125;</div><div class="line">          &lt;/td&gt;</div><div class="line">          &lt;td&gt;</div><div class="line">            &lt;button type="button" @click="removeCarts(item)" class="btn btn-success"&gt;&lt;i class="glyphicon glyphicon-remove"&gt;&lt;/i&gt;&lt;/button&gt;</div><div class="line">          &lt;/td&gt;</div><div class="line">        &lt;/tr&gt;</div><div class="line">      &lt;/tbody&gt;</div><div class="line">    &lt;/table&gt;</div><div class="line">      `,</div><div class="line">      <span class="attr">data</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> &#123;</div><div class="line">        &#125;</div><div class="line">      &#125;,</div><div class="line">      <span class="attr">methods</span>: &#123;</div><div class="line">        <span class="attr">removeCarts</span>: <span class="function"><span class="keyword">function</span> (<span class="params">item</span>) </span>&#123;</div><div class="line">          eventBus.$emit(<span class="string">'remo'</span>, item)</div><div class="line">        &#125;</div><div class="line">      &#125;,</div><div class="line">      <span class="attr">props</span>: [<span class="string">'cartProducts'</span>]</div><div class="line">    &#125;)</div><div class="line"></div><div class="line">    Vue.component(<span class="string">'product-list'</span>, &#123;</div><div class="line">      <span class="attr">template</span>: <span class="string">`</span></div><div class="line">      &lt;table class="table table-borderd table-striped table-hover"&gt;</div><div class="line">      &lt;thead&gt;</div><div class="line">        &lt;tr&gt;</div><div class="line">          &lt;th&gt;商品编号&lt;/th&gt;</div><div class="line">          &lt;th&gt;商品名&lt;/th&gt;</div><div class="line">          &lt;th&gt;操作&lt;/th&gt;</div><div class="line">        &lt;/tr&gt;</div><div class="line">      &lt;/thead&gt;</div><div class="line">      &lt;tbody&gt;</div><div class="line">        &lt;tr v-for="item in products"&gt;</div><div class="line">          &lt;td&gt;&#123;&#123; item.id &#125;&#125;&lt;/td&gt;</div><div class="line">          &lt;td&gt;&#123;&#123; item.name &#125;&#125;&lt;/td&gt;</div><div class="line">          &lt;td&gt;</div><div class="line">            &lt;button type="button" v-on:click="addToCarts(item)" class="btn btn-success"&gt;&lt;i class="glyphicon glyphicon-shopping-cart"&gt;&lt;/i&gt;&lt;/button&gt;</div><div class="line">          &lt;/td&gt;</div><div class="line">        &lt;/tr&gt;</div><div class="line">      &lt;/tbody&gt;</div><div class="line">    &lt;/table&gt;</div><div class="line">      `,</div><div class="line">      <span class="attr">data</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> &#123;</div><div class="line">        &#125;</div><div class="line">      &#125;,</div><div class="line">      <span class="attr">methods</span>: &#123;</div><div class="line">        <span class="attr">addToCarts</span>: <span class="function"><span class="keyword">function</span> (<span class="params">item</span>) </span>&#123;</div><div class="line">          <span class="keyword">this</span>.$emit(<span class="string">'addpro'</span>, item)</div><div class="line">        &#125;</div><div class="line">      &#125;,</div><div class="line">      <span class="attr">props</span>: [<span class="string">'products'</span>],</div><div class="line"></div><div class="line">    &#125;)</div><div class="line"></div><div class="line">    <span class="keyword">var</span> app = <span class="keyword">new</span> Vue(&#123;</div><div class="line">      <span class="attr">el</span>: <span class="string">'#app'</span>,</div><div class="line">      <span class="attr">data</span>: &#123;</div><div class="line">        <span class="attr">products</span>: [</div><div class="line">          &#123; <span class="attr">id</span>: <span class="string">'1'</span>, <span class="attr">name</span>: <span class="string">'鳄鱼'</span> &#125;,</div><div class="line">          &#123; <span class="attr">id</span>: <span class="string">'2'</span>, <span class="attr">name</span>: <span class="string">'蛇'</span> &#125;,</div><div class="line">          &#123; <span class="attr">id</span>: <span class="string">'3'</span>, <span class="attr">name</span>: <span class="string">'兔子'</span> &#125;,</div><div class="line">          &#123; <span class="attr">id</span>: <span class="string">'4'</span>, <span class="attr">name</span>: <span class="string">'驴'</span> &#125;,</div><div class="line">          &#123; <span class="attr">id</span>: <span class="string">'5'</span>, <span class="attr">name</span>: <span class="string">'孔雀'</span> &#125;</div><div class="line">        ],</div><div class="line">        <span class="attr">carts</span>: []</div><div class="line">      &#125;,</div><div class="line">      <span class="attr">methods</span>: &#123;</div><div class="line">        <span class="attr">addToCarts</span>: <span class="function"><span class="keyword">function</span> (<span class="params">item</span>) </span>&#123;</div><div class="line">          <span class="keyword">var</span> isExist = <span class="literal">false</span></div><div class="line">          <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;<span class="keyword">this</span>.carts.length; i++) &#123;</div><div class="line">            <span class="keyword">if</span>( item.id === <span class="keyword">this</span>.carts[i].id ) &#123;</div><div class="line">              item.count = <span class="keyword">this</span>.carts[i].count + <span class="number">1</span></div><div class="line">              Vue.set(<span class="keyword">this</span>.carts, i, item)</div><div class="line">              isExist = <span class="literal">true</span></div><div class="line">            &#125;</div><div class="line">          &#125;</div><div class="line">          !isExist &amp;&amp; (item.count = <span class="number">1</span>, <span class="keyword">this</span>.carts.push(item))</div><div class="line">        &#125;,</div><div class="line">        <span class="attr">removeCarts</span>: <span class="function"><span class="keyword">function</span> (<span class="params">item</span>) </span>&#123;</div><div class="line">          <span class="keyword">for</span>(<span class="keyword">var</span> i =<span class="number">0</span>; i&lt;<span class="keyword">this</span>.carts.length; i++) &#123;</div><div class="line">            <span class="keyword">if</span>( item.id === <span class="keyword">this</span>.carts[i].id) &#123;</div><div class="line">              <span class="keyword">this</span>.carts.splice(i,<span class="number">1</span>)</div><div class="line">            &#125;</div><div class="line">          &#125;</div><div class="line">        &#125;</div><div class="line">      &#125;,</div><div class="line">      <span class="attr">mounted</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        self = <span class="keyword">this</span>;</div><div class="line">        eventBus.$on(<span class="string">'remo'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">item</span>) </span>&#123;</div><div class="line">          self.removeCarts(item)</div><div class="line">        &#125;)</div><div class="line">      &#125;</div><div class="line">    &#125;);</div><div class="line">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure></p>
<h2 id="Vuex解决复杂单页面应用"><a href="#Vuex解决复杂单页面应用" class="headerlink" title="Vuex解决复杂单页面应用"></a>Vuex解决复杂单页面应用</h2><p>上面的方式只能解决一些简单的页面中的组件的通信问题，但是如果是复杂的单页面应用就需要使用更强大的Vuex来帮我们进行状态的统一管理和同步。</p>
<p>当第一次接触Vuex的时候，眼前一亮，之前经过Redux之后，被它繁琐的使用令我痛苦不已，虽然思路很清晰，其实完全可以设计的更简单和高效。<br>当我接触到Vuex之后，发现这就是我想要的。的确简洁就是一种艺术。</p>
<p>其实本质上，Vuex就是一个大的EventBus对象的升级版本，相当于一个特定的仓库，所有数据都在统一的仓库中，进行统一的管理。</p>
<p>几个核心的概念：</p>
<ul>
<li>State： Vuex仓库中的数据。</li>
<li>Getter： 类似于Vue实例中的计算属性，Getter就是普通的获取state包装函数。</li>
<li>Mutations: Vuex 的 store 中的状态的唯一方法是提交 mutation。Vuex 中的 mutations 非常类似于事件：每个 mutation 都有一个字符串的 事件类型 (type) 和 一个 回调函数 (handler)。</li>
<li>Action: action可以触发Mutations，不能直接改变state。</li>
</ul>
<p>看下面一张图了解一下Vuex整体的数据流动：</p>
<p><img src="http://orzuutv5f.bkt.clouddn.com/04vuex%E6%A8%A1%E5%9E%8B.png" alt=""></p>
<h2 id="Vuex实例demo"><a href="#Vuex实例demo" class="headerlink" title="Vuex实例demo"></a>Vuex实例demo</h2><p>可能前面的图和概念都太多了，先看一个例子，简单了解一下Vuex中的仓库的数据 怎么整合到 Vue的实例中去。</p>
<p>创建Vuexdemo的项目</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#</span> 通过vue-cli创建vuexdemo的项目，注意首先cd到你的存放项目代码的目录</div><div class="line">vue init webpack vuexdemo</div><div class="line"><span class="meta"></span></div><div class="line"># 过程中，会有几个选项你可以选择输入Y或者n来开启或者关闭某些选项。</div><div class="line"><span class="meta"></span></div><div class="line"># 创建完成后，就可以通过以下命令，进行初始化和安装相关的依赖项了。</div><div class="line">cd vuexdemo</div><div class="line">npm install</div><div class="line">npm run dev</div><div class="line"><span class="meta"></span></div><div class="line"># 然后安装 vuex</div><div class="line">npm i vuex -S</div></pre></td></tr></table></figure>
      
    </div>
      
        
        
      
      <div class="clearfix"></div>
      </footer>
  </div>
</article>





  <article class="post">
  <div class="post-content">
    <header>
      
  
    <h1 class="title"><a href="/2017/06/25/vue入门之路由/">Vue(Vue入门之路由详解)</a></h1>
  

      
        <time datetime="2017-06-25T05:17:02.000Z">2017-06-25</time>
      
    </header>
    <div class="entry">
      
        <a id="more"></a>
<h1 id="正文开始"><a href="#正文开始" class="headerlink" title="正文开始"></a>正文开始</h1><p><center style="font-size: 30px"><code>Vue入门之路由详解</code></center></p>
<hr>
<h1 id="Vue路由详解"><a href="#Vue路由详解" class="headerlink" title="Vue路由详解"></a>Vue路由详解</h1><blockquote>
<p>对于前端来说，其实浏览器配合超级连接就很好的实现了路由功能。但是对于单页面应用来说，浏览器和超级连接的跳转方式已经不能适用，<br>所以各大框架纷纷给出了单页面应用的解决路由跳转的方案。</p>
<p>Vue框架的兼容性非常好，可以很好的跟其他第三方的路由框架进行结合。当然官方也给出了路由的方案： <code>vue-router</code>;<br>建议还是用官方的最好，使用量也是最大，相对来说Vue框架的升级路由组件升级也会及时跟上，所以为了以后的维护和升级方便还是使用Vue自家的东西最好。</p>
</blockquote>
<h2 id="Vue-router的版本对应"><a href="#Vue-router的版本对应" class="headerlink" title="Vue-router的版本对应"></a>Vue-router的版本对应</h2><blockquote>
<p>注意: vue-router@2.x 只适用于 Vue 2.x 版本。<br>vue-router@1.x 对应于Vue1.x版本。</p>
</blockquote>
<ul>
<li>的Github地址：<a href="https://github.com/vuejs/vue-router" target="_blank" rel="external">vue-router</a></li>
<li><a href="https://router.vuejs.org/zh-cn/" target="_blank" rel="external">文档地址</a></li>
</ul>
<h2 id="vue-router的安装使用"><a href="#vue-router的安装使用" class="headerlink" title="vue-router的安装使用"></a>vue-router的安装使用</h2><ul>
<li>CDN连接方式</li>
</ul>
<p><code>https://unpkg.com/vue-router/dist/vue-router.js</code></p>
<ul>
<li>npm 安装</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install vue-router</div></pre></td></tr></table></figure>
<h2 id="vue-router-入门demo"><a href="#vue-router-入门demo" class="headerlink" title="vue-router 入门demo"></a>vue-router 入门demo</h2><p>vue-router开发的步骤：</p>
<ul>
<li>第一步： 引入vue和vue-router包。<blockquote>
<p>可以使用cdn的方式或者npm的方式。如果配合npm和webpack的话可以直接作为一个模块导入即可。但是作为初学入门的话建议还是<br>直接使用cdn包的形式，先学会怎么用路由。</p>
</blockquote>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://unpkg.com/vue/dist/vue.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://unpkg.com/vue-router/dist/vue-router.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<ul>
<li><p>第二步： 定义路由跳转的组件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 1. 定义（路由）组件。</span></div><div class="line"><span class="keyword">const</span> Foo = &#123; <span class="attr">template</span>: <span class="string">'&lt;div&gt;foo&lt;/div&gt;'</span> &#125;</div><div class="line"><span class="keyword">const</span> Bar = &#123; <span class="attr">template</span>: <span class="string">'&lt;div&gt;bar&lt;/div&gt;'</span> &#125;</div></pre></td></tr></table></figure>
</li>
<li><p>第三步： 定义路由规则对象</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 每个路由path应该映射一个组件。 其中"component" 可以是</span></div><div class="line"><span class="comment">// 通过 Vue.extend() 创建的组件构造器，</span></div><div class="line"><span class="comment">// 或者，只是一个组件配置对象。</span></div><div class="line"><span class="keyword">const</span> routes = [</div><div class="line">  &#123; <span class="attr">path</span>: <span class="string">'/foo'</span>, <span class="attr">component</span>: Foo &#125;,</div><div class="line">  &#123; <span class="attr">path</span>: <span class="string">'/bar'</span>, <span class="attr">component</span>: Bar &#125;</div><div class="line">]</div><div class="line"></div><div class="line"><span class="comment">// 创建路由对象</span></div><div class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter(&#123;</div><div class="line">  routes <span class="comment">// （缩写）相当于 routes: routes，es6的新语法</span></div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<ul>
<li>第四步： 创建Vue对象，并加重上面创建的路由对象</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 记得要通过 router 配置参数注入路由，</span></div><div class="line"><span class="comment">// 从而让整个应用都有路由功能</span></div><div class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> Vue(&#123;</div><div class="line">  router</div><div class="line">&#125;).$mount(<span class="string">'#app'</span>)</div></pre></td></tr></table></figure>
<ul>
<li>第五步： 在模板中编写路由跳转链接</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello App!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span></div><div class="line">    <span class="comment">&lt;!-- 使用 router-link 组件来导航. --&gt;</span></div><div class="line">    <span class="comment">&lt;!-- 通过传入 `to` 属性指定链接. --&gt;</span></div><div class="line">    <span class="comment">&lt;!-- &lt;router-link&gt; 默认会被渲染成一个 `&lt;a&gt;` 标签 --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">"/foo"</span>&gt;</span>Go to Foo<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">"/bar"</span>&gt;</span>Go to Bar<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">  <span class="comment">&lt;!-- 路由出口 --&gt;</span></div><div class="line">  <span class="comment">&lt;!-- 路由匹配到的组件将渲染在这里 --&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
<p>最终的代码：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://unpkg.com/vue/dist/vue.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://unpkg.com/vue-router/dist/vue-router.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello App!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span></div><div class="line">    <span class="comment">&lt;!-- 使用 router-link 组件来导航. --&gt;</span></div><div class="line">    <span class="comment">&lt;!-- 通过传入 `to` 属性指定链接. --&gt;</span></div><div class="line">    <span class="comment">&lt;!-- &lt;router-link&gt; 默认会被渲染成一个 `&lt;a&gt;` 标签 --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">"/foo"</span>&gt;</span>Go to Foo<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">"/bar"</span>&gt;</span>Go to Bar<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">  <span class="comment">&lt;!-- 路由出口 --&gt;</span></div><div class="line">  <span class="comment">&lt;!-- 路由匹配到的组件将渲染在这里 --&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line"><span class="comment">// 1. 定义（路由）组件。</span></div><div class="line"><span class="comment">// 可以从其他文件 import 进来</span></div><div class="line"><span class="keyword">const</span> Foo = &#123; <span class="attr">template</span>: <span class="string">'&lt;div&gt;foo&lt;/div&gt;'</span> &#125;</div><div class="line"><span class="keyword">const</span> Bar = &#123; <span class="attr">template</span>: <span class="string">'&lt;div&gt;bar&lt;/div&gt;'</span> &#125;</div><div class="line"></div><div class="line"><span class="comment">// 2. 定义路由</span></div><div class="line"><span class="keyword">const</span> routes = [</div><div class="line">  &#123; <span class="attr">path</span>: <span class="string">'/foo'</span>, <span class="attr">component</span>: Foo &#125;,</div><div class="line">  &#123; <span class="attr">path</span>: <span class="string">'/bar'</span>, <span class="attr">component</span>: Bar &#125;</div><div class="line">]</div><div class="line"></div><div class="line"><span class="comment">// 3. 创建 router 实例，然后传 `routes` 配置</span></div><div class="line"><span class="comment">// 你还可以传别的配置参数, 不过先这么简单着吧。</span></div><div class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter(&#123;</div><div class="line">  routes <span class="comment">// （缩写）相当于 routes: routes</span></div><div class="line">&#125;)</div><div class="line"></div><div class="line"><span class="comment">// 4. 创建和挂载根实例。</span></div><div class="line"><span class="comment">// 记得要通过 router 配置参数注入路由，</span></div><div class="line"><span class="comment">// 从而让整个应用都有路由功能</span></div><div class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> Vue(&#123;</div><div class="line">  router</div><div class="line">&#125;).$mount(<span class="string">'#app'</span>)</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="使用vue-router的综合实例"><a href="#使用vue-router的综合实例" class="headerlink" title="使用vue-router的综合实例"></a>使用vue-router的综合实例</h2><p>下面是一个综合的例子, 页面上有几个导航的按钮，然后通过点击不同的按钮，可以在当前页面切换不同的组件。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Vue入门之extend全局方法<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://unpkg.com/vue/dist/vue.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://unpkg.com/vue-router/dist/vue-router.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></div><div class="line">  ul, li &#123; list-style: none; &#125;</div><div class="line">  ul &#123; overflow: hidden; &#125;</div><div class="line">  li &#123; float: left; width: 100px; &#125;</div><div class="line">  h2 &#123; background-color: #903;&#125;</div><div class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">top-bar</span>&gt;</span> <span class="tag">&lt;/<span class="name">top-bar</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">hr</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>email to: &#123;&#123; email &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">hr</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">router-view</span> <span class="attr">class</span>=<span class="string">"view one"</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">footer-bar</span>&gt;</span><span class="tag">&lt;/<span class="name">footer-bar</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="keyword">var</span> topbarTemp = <span class="string">`</span></div><div class="line">      &lt;nav&gt;</div><div class="line">        &lt;ul&gt;</div><div class="line">          &lt;li v-for="item in NavList"&gt;</div><div class="line">            &lt;router-link :to="item.url"&gt;&#123;&#123; item.name &#125;&#125;&lt;/router-link&gt;</div><div class="line">          &lt;/li&gt;</div><div class="line">        &lt;/ul&gt;</div><div class="line">      &lt;/nav&gt;</div><div class="line">    `;</div><div class="line">    <span class="comment">// 定义组件：topbar</span></div><div class="line">    Vue.component(<span class="string">'top-bar'</span>, &#123;</div><div class="line">      <span class="attr">template</span>: topbarTemp,</div><div class="line">      <span class="attr">data</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> &#123;</div><div class="line">          <span class="attr">NavList</span>: [</div><div class="line">            &#123; <span class="attr">name</span>: <span class="string">'首页'</span>, <span class="attr">url</span>: <span class="string">'/home'</span>&#125;,</div><div class="line">            &#123; <span class="attr">name</span>: <span class="string">'产品'</span>, <span class="attr">url</span>: <span class="string">'/product'</span>&#125;,</div><div class="line">            &#123; <span class="attr">name</span>: <span class="string">'服务'</span>, <span class="attr">url</span>: <span class="string">'/service'</span>&#125;,</div><div class="line">            &#123; <span class="attr">name</span>: <span class="string">'关于'</span>, <span class="attr">url</span>: <span class="string">'/about'</span>&#125;</div><div class="line">          ]</div><div class="line">        &#125;</div><div class="line">      &#125;</div><div class="line">    &#125;);</div><div class="line"></div><div class="line">    Vue.component(<span class="string">'footer-bar'</span>, &#123;  <span class="comment">// 定义组件 footerbar</span></div><div class="line">      template: <span class="string">`</span></div><div class="line">        &lt;footer&gt;</div><div class="line">          &lt;hr/&gt;</div><div class="line">          &lt;p&gt;版权所有@flydragon&lt;p&gt;</div><div class="line">        &lt;/footer&gt;</div><div class="line">      `</div><div class="line">    &#125;);</div><div class="line"></div><div class="line">    <span class="comment">// 创建home模块</span></div><div class="line">    <span class="keyword">var</span> home = &#123;</div><div class="line">      <span class="attr">template</span>: <span class="string">`&lt;div&gt; &lt;h2&gt;&#123;&#123; msg &#125;&#125;&lt;h2&gt;&lt;/div&gt;`</span>,</div><div class="line">      <span class="attr">data</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> &#123; <span class="attr">msg</span>: <span class="string">'this is home view'</span> &#125;</div><div class="line">      &#125;</div><div class="line">    &#125;;</div><div class="line"></div><div class="line">    <span class="comment">// 创建product 模块</span></div><div class="line">    <span class="keyword">var</span> product = &#123;</div><div class="line">      <span class="attr">template</span>: <span class="string">`&lt;div&gt; &#123;&#123; msg &#125;&#125;&lt;/div&gt;`</span>,</div><div class="line">      <span class="attr">data</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> &#123; <span class="attr">msg</span>: <span class="string">'this is product view'</span> &#125;</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// 定义路由对象</span></div><div class="line">    <span class="keyword">var</span> router = <span class="keyword">new</span> VueRouter(&#123;</div><div class="line">      <span class="attr">routes</span>: [</div><div class="line">        &#123; <span class="attr">path</span>: <span class="string">'/home'</span>, <span class="attr">component</span>: home &#125;,</div><div class="line">        &#123; <span class="attr">path</span>: <span class="string">'/product'</span>, <span class="attr">component</span>: product &#125;</div><div class="line">      ]</div><div class="line">    &#125;);</div><div class="line"></div><div class="line">    <span class="comment">// 初始化一个Vue实例</span></div><div class="line">    <span class="keyword">var</span> app = <span class="keyword">new</span> Vue(&#123;</div><div class="line">      <span class="attr">el</span>: <span class="string">'#app'</span>,</div><div class="line">      <span class="attr">data</span>: &#123;</div><div class="line">       <span class="attr">email</span>: <span class="string">'flydragon@gmail.com'</span></div><div class="line">      &#125;,</div><div class="line">      <span class="attr">router</span>: router</div><div class="line">    &#125;);</div><div class="line">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="路由参数获取"><a href="#路由参数获取" class="headerlink" title="路由参数获取"></a>路由参数获取</h2><p>定义路由路径的时候，可以指定参数。参数需要通过路径进行标识：<code>/user/:id</code>就是定义了一个规则，/user开头，然后后面的就是id参数的值。<br>比如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">路由规则：  /user/:id</div><div class="line">/user/9   =&gt;  id = 9</div><div class="line">/user/8   =&gt;  id = 8</div><div class="line">/user/1   =&gt;  id = 1</div></pre></td></tr></table></figure></p>
<p>然后在跳转后的vue中可以通过<code>this.$route.params.参数名</code>获取对应的参数。<br>比如代码：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Vue入门之extend全局方法<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://unpkg.com/vue/dist/vue.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://unpkg.com/vue-router/dist/vue-router.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">nav</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">"/user/9"</span>&gt;</span>用户<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">"/stu/malun"</span>&gt;</span>学生<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">hr</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">nav</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="keyword">var</span> user = &#123;</div><div class="line">      <span class="attr">template</span>: <span class="string">`</span></div><div class="line">        &lt;div&gt;user id is : &#123;&#123; $route.params.id &#125;&#125;&lt;/div&gt;</div><div class="line">      `</div><div class="line">    &#125;;</div><div class="line"></div><div class="line">    <span class="keyword">var</span> stu = &#123;</div><div class="line">      <span class="attr">template</span>: <span class="string">`</span></div><div class="line">        &lt;div&gt;</div><div class="line">          &lt;h2&gt;&#123;&#123; getName &#125;&#125;&lt;/h2&gt;</div><div class="line">        &lt;/div&gt;</div><div class="line">      `,</div><div class="line">      <span class="attr">computed</span>: &#123;</div><div class="line">        <span class="attr">getName</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">          <span class="keyword">return</span> <span class="keyword">this</span>.$route.params.name;</div><div class="line">        &#125;</div><div class="line">      &#125;</div><div class="line">    &#125;;</div><div class="line">    <span class="keyword">var</span> router = <span class="keyword">new</span> VueRouter(&#123;</div><div class="line">      <span class="attr">routes</span>: [</div><div class="line">        &#123; <span class="attr">path</span>: <span class="string">'/user/:id'</span>, <span class="attr">component</span>: user &#125;,</div><div class="line">        &#123; <span class="attr">path</span>: <span class="string">'/stu/:name'</span>, <span class="attr">component</span>: stu &#125;</div><div class="line">      ]</div><div class="line">    &#125;);</div><div class="line">    <span class="keyword">var</span> app = <span class="keyword">new</span> Vue(&#123;</div><div class="line">      <span class="attr">el</span>: <span class="string">'#app'</span>,</div><div class="line">      <span class="attr">router</span>: router</div><div class="line">    &#125;);</div><div class="line">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="js控制路由跳转"><a href="#js控制路由跳转" class="headerlink" title="js控制路由跳转"></a>js控制路由跳转</h2><p>上面我们演示的都是通过router-link进行跳转。 其实我们还可以通过js编程的方式进行路由的跳转。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 当前路由的view跳转到 /home</span></div><div class="line">router.push(<span class="string">'home'</span>)</div><div class="line"></div><div class="line"><span class="comment">// 对象,  跳转到/home</span></div><div class="line">router.push(&#123; <span class="attr">path</span>: <span class="string">'home'</span> &#125;)</div><div class="line"></div><div class="line"><span class="comment">// 命名的路由</span></div><div class="line">router.push(&#123; <span class="attr">name</span>: <span class="string">'user'</span>, <span class="attr">params</span>: &#123; <span class="attr">userId</span>: <span class="number">123</span> &#125;&#125;)</div><div class="line"></div><div class="line"><span class="comment">// 带查询参数，变成 /register?plan=private</span></div><div class="line">router.push(&#123; <span class="attr">path</span>: <span class="string">'register'</span>, <span class="attr">query</span>: &#123; <span class="attr">plan</span>: <span class="string">'private'</span> &#125;&#125;)</div></pre></td></tr></table></figure>
<h2 id="嵌套路由"><a href="#嵌套路由" class="headerlink" title="嵌套路由"></a>嵌套路由</h2><p>嵌套路由跟普通路由基本没有什么区别。但是可以让vue开发变的非常灵活。<br>官网这块写的也非常好，我就直接拷贝了（原谅我吧。）<br>实际生活中的应用界面，通常由多层嵌套的组件组合而成。同样地，URL 中各段动态路径也按某种结构对应嵌套的各层组件，例如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">/user/foo/profile                     /user/foo/posts</div><div class="line">+------------------+                  +-----------------+</div><div class="line">| User             |                  | User            |</div><div class="line">| +--------------+ |                  | +-------------+ |</div><div class="line">| | Profile      | |  +------------&gt;  | | Posts       | |</div><div class="line">| |              | |                  | |             | |</div><div class="line">| +--------------+ |                  | +-------------+ |</div><div class="line">+------------------+                  +-----------------+</div><div class="line">借助 vue-router，使用嵌套路由配置，就可以很简单地表达这种关系。</div></pre></td></tr></table></figure></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">const User = &#123;</div><div class="line">  template: '<span class="tag">&lt;<span class="name">div</span>&gt;</span>User &#123;&#123; $route.params.id &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span>'</div><div class="line">&#125;</div><div class="line"></div><div class="line">const router = new VueRouter(&#123;</div><div class="line">  routes: [</div><div class="line">    &#123; path: '/user/:id', component: User &#125;</div><div class="line">  ]</div><div class="line">&#125;)</div><div class="line">这里的 <span class="tag">&lt;<span class="name">router-view</span>&gt;</span> 是最顶层的出口，渲染最高级路由匹配到的组件。同样地，一个被渲染组件同样可以包含自己的嵌套 <span class="tag">&lt;<span class="name">router-view</span>&gt;</span>。例如，在 User 组件的模板添加一个 <span class="tag">&lt;<span class="name">router-view</span>&gt;</span>：</div><div class="line"></div><div class="line">const User = &#123;</div><div class="line">  template: `</div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"user"</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>User &#123;&#123; $route.params.id &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">  `</div><div class="line">&#125;</div><div class="line">要在嵌套的出口中渲染组件，需要在 VueRouter 的参数中使用 children 配置：</div><div class="line"></div><div class="line">const router = new VueRouter(&#123;</div><div class="line">  routes: [</div><div class="line">    &#123; path: '/user/:id', component: User,</div><div class="line">      children: [</div><div class="line">        &#123;</div><div class="line">          // 当 /user/:id/profile 匹配成功，</div><div class="line">          // UserProfile 会被渲染在 User 的 <span class="tag">&lt;<span class="name">router-view</span>&gt;</span> 中</div><div class="line">          path: 'profile',</div><div class="line">          component: UserProfile</div><div class="line">        &#125;,</div><div class="line">        &#123;</div><div class="line">          // 当 /user/:id/posts 匹配成功</div><div class="line">          // UserPosts 会被渲染在 User 的 <span class="tag">&lt;<span class="name">router-view</span>&gt;</span> 中</div><div class="line">          path: 'posts',</div><div class="line">          component: UserPosts</div><div class="line">        &#125;</div><div class="line">      ]</div><div class="line">    &#125;</div><div class="line">  ]</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>要注意，以 / 开头的嵌套路径会被当作根路径。 这让你充分的使用嵌套组件而无须设置嵌套的路径。<br>你会发现，children 配置就是像 routes 配置一样的路由配置数组，所以呢，你可以嵌套多层路由。</p>
<p>此时，基于上面的配置，当你访问 /user/foo 时，User 的出口是不会渲染任何东西，这是因为没有匹配到合适的子路由。如果你想要渲染点什么，可以提供一个 空的 子路由：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter(&#123;</div><div class="line">  <span class="attr">routes</span>: [</div><div class="line">    &#123;</div><div class="line">      <span class="attr">path</span>: <span class="string">'/user/:id'</span>, <span class="attr">component</span>: User,</div><div class="line">      <span class="attr">children</span>: [</div><div class="line">        <span class="comment">// 当 /user/:id 匹配成功，</span></div><div class="line">        <span class="comment">// UserHome 会被渲染在 User 的 &lt;router-view&gt; 中</span></div><div class="line">        &#123; <span class="attr">path</span>: <span class="string">''</span>, <span class="attr">component</span>: UserHome &#125;,</div><div class="line"></div><div class="line">        <span class="comment">// ...其他子路由</span></div><div class="line">      ]</div><div class="line">    &#125;</div><div class="line">  ]</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>其实作为入门的话，暂时先掌握这些知识，后续</p>

      
    </div>
      
        
        
      
      <div class="clearfix"></div>
      </footer>
  </div>
</article>





  <article class="post">
  <div class="post-content">
    <header>
      
  
    <h1 class="title"><a href="/2017/06/24/vue入门之列表渲染/">Vue(Vue列表渲染及条件渲染实战)</a></h1>
  

      
        <time datetime="2017-06-24T05:17:02.000Z">2017-06-24</time>
      
    </header>
    <div class="entry">
      
        <a id="more"></a>
<h1 id="正文开始"><a href="#正文开始" class="headerlink" title="正文开始"></a>正文开始</h1><p><center style="font-size: 30px"><code>Vue列表渲染及条件渲染实战</code></center></p>
<hr>
<h1 id="Vue列表渲染及条件渲染实战"><a href="#Vue列表渲染及条件渲染实战" class="headerlink" title="Vue列表渲染及条件渲染实战"></a>Vue列表渲染及条件渲染实战</h1><h2 id="条件渲染"><a href="#条件渲染" class="headerlink" title="条件渲染"></a>条件渲染</h2><p>有时候我们要根据数据的情况，决定标签是否进行显示或者有其他动作。最常见的就是，表格渲染的时候，如果表格没有数据，就显示无数据。如果有数据就显示表格数据。<br>Vue帮我们提供了一个<code>v-if</code>的指令，帮助我们完成判断的模板处理。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">h1</span> <span class="attr">v-if</span>=<span class="string">"ok"</span>&gt;</span>Yes<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">h1</span> <span class="attr">v-else</span>&gt;</span>No<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="comment">&lt;!-- 当ok为true的时候，输出： Yes， 否则输出： No --&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">  <span class="keyword">var</span> app = <span class="keyword">new</span> Vue(&#123;</div><div class="line">    <span class="attr">el</span>: <span class="string">'#app'</span>,</div><div class="line">    <span class="attr">data</span>: &#123;</div><div class="line">      <span class="attr">ok</span>: <span class="literal">true</span>      <span class="comment">// true,返回：Yes，   false=&gt; No</span></div><div class="line">    &#125;</div><div class="line">  &#125;);</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<p><code>v-if</code>指令可以根据数据绑定的情况进行插入标签或者移除标签。<br>当然，如果熟悉js的都清楚，有if，肯定会有else。 Vue提供的是 <code>v-else</code>指令。</p>
<h2 id="列表渲染"><a href="#列表渲染" class="headerlink" title="列表渲染"></a>列表渲染</h2><h3 id="基本v-for循环渲染标签"><a href="#基本v-for循环渲染标签" class="headerlink" title="基本v-for循环渲染标签"></a>基本v-for循环渲染标签</h3><p>模板引擎都会提供循环的支持。Vue也不例外，Vue是提供了一个<code>v-for</code>指令。基本的用法类似于foreach的用法。还是看例子最直接，上代码：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">table</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">thead</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">tr</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>姓名<span class="tag">&lt;/<span class="name">th</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>年龄<span class="tag">&lt;/<span class="name">th</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>地址<span class="tag">&lt;/<span class="name">th</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></div><div class="line">      <span class="comment">&lt;!-- 每次for循环，都会创建一个tr标签。item是遍历的元素。 --&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">tr</span> <span class="attr">v-for</span>=<span class="string">"item in UserList"</span> &gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; item.name &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; item.age &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; item.address &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">table</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">  <span class="keyword">var</span> app = <span class="keyword">new</span> Vue(&#123;</div><div class="line">    <span class="attr">el</span>: <span class="string">'#app'</span>,</div><div class="line">    <span class="attr">data</span>: &#123;</div><div class="line">     <span class="attr">UserList</span>: [</div><div class="line">      &#123;<span class="string">'name'</span>: <span class="string">'malun'</span>, <span class="string">'age'</span>: <span class="number">18</span>, <span class="string">'address'</span>: <span class="string">'北京黑地下室'</span>&#125;,</div><div class="line">      &#123;<span class="string">'name'</span>: <span class="string">'flydragon'</span>, <span class="string">'age'</span>: <span class="number">22</span>, <span class="string">'address'</span>: <span class="string">'厦门的很多热的地方'</span>&#125;,</div><div class="line">      &#123;<span class="string">'name'</span>: <span class="string">'temp'</span>, <span class="string">'age'</span>: <span class="number">25</span>, <span class="string">'address'</span>: <span class="string">'东北松花江上'</span>&#125;</div><div class="line">     ]</div><div class="line">    &#125;</div><div class="line">  &#125;);</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<h3 id="Template循环渲染多标签"><a href="#Template循环渲染多标签" class="headerlink" title="Template循环渲染多标签"></a>Template循环渲染多标签</h3><p>上面的例子，我们演示的是 每次循环输出一个tr标签。如果我们希望每次循环生成两个tr标签呢？如果还有生成其他的标签呢？</p>
<p>Vue给我们提供了template标签，供我们用于v-for循环中进行处理。</p>
<p>上代码喽：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></div><div class="line">  <span class="comment">&lt;!-- 通过template标签，可以一次循环，输出两个li标签 --&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-for</span>=<span class="string">"item in items"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>&#123;&#123; item.msg &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"divider"</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div></pre></td></tr></table></figure></p>
<h2 id="表格显示的综合案例"><a href="#表格显示的综合案例" class="headerlink" title="表格显示的综合案例"></a>表格显示的综合案例</h2><p>下面是一个综合的案例，每秒钟往表格中添加一条数据。<br>本案例综合使用了v-if 和 v-for循环综合案例。</p>
<h3 id="关于v-for对应的数组的更新"><a href="#关于v-for对应的数组的更新" class="headerlink" title="关于v-for对应的数组的更新"></a>关于v-for对应的数组的更新</h3><p>由于Vue的机制就是检测数据的变化，自动跟新HTML。数组的变化，Vue之检测部分函数，检测的函数执行时才会触发视图更新。这些方法如下：</p>
<ul>
<li>push()</li>
<li>pop()</li>
<li>shift()</li>
<li>unshift()</li>
<li>splice()</li>
<li>sort()</li>
<li>reverse()</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Vue入门之动态显示表格<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://unpkg.com/vue/dist/vue.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">table</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">thead</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">th</span>&gt;</span>姓名<span class="tag">&lt;/<span class="name">th</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">th</span>&gt;</span>年龄<span class="tag">&lt;/<span class="name">th</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">th</span>&gt;</span>地址<span class="tag">&lt;/<span class="name">th</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></div><div class="line">      <span class="comment">&lt;!-- 如果列表有数据，直接输出表格数据，没有数据提示用户没有数据 --&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">tbody</span> <span class="attr">v-if</span>=<span class="string">"UserList.length &gt; 0"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">tr</span> <span class="attr">v-for</span>=<span class="string">"item in UserList"</span> &gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; item.name &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; item.age &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; item.address &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">tbody</span> <span class="attr">v-else</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span><span class="tag">&lt;<span class="name">td</span> <span class="attr">colspan</span>=<span class="string">"3"</span>&gt;</span>没有数据奥！<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">table</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="keyword">var</span> app = <span class="keyword">new</span> Vue(&#123;</div><div class="line">      <span class="attr">el</span>: <span class="string">'#app'</span>,</div><div class="line">      <span class="attr">data</span>: &#123;</div><div class="line">       <span class="attr">UserList</span>: []</div><div class="line">      &#125;</div><div class="line">    &#125;);</div><div class="line"></div><div class="line">    <span class="comment">// 每秒钟插入一条数据。</span></div><div class="line">    setInterval(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">      app.UserList.push(&#123;<span class="string">'name'</span>: <span class="string">'malun'</span>, <span class="string">'age'</span>: <span class="number">18</span>, <span class="string">'address'</span>: <span class="string">'北京黑地下室'</span>&#125;);</div><div class="line">    &#125;, <span class="number">1000</span>);</div><div class="line">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="总结列表和条件绑定"><a href="#总结列表和条件绑定" class="headerlink" title="总结列表和条件绑定"></a>总结列表和条件绑定</h2><p>列表的使用其实本质还是js的衍生使用，对于有js开发基础的没有什么难度。关键是多写几个案例就会详细通了。</p>

      
    </div>
      
        
        
      
      <div class="clearfix"></div>
      </footer>
  </div>
</article>






<nav id="pagination">
  
  
    <a href="/page/2/" class="alignright next">Nächste Seite</a>
  
  <div class="clearfix"></div>
</nav></div></div>
    <aside id="sidebar" class="alignright">
  <div class="search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="Suche">
    <input type="hidden" name="q" value="site:yoursite.com">
  </form>
</div>

  
<div class="widget tag">
  <h3 class="title">Neueste Artikel</h3>
  <ul class="entry">
    
      <li>
        <a href="/2017/12/02/text/">test</a>
      </li>
    
      <li>
        <a href="/2017/11/06/javascript风格指南/">Airbnb JavaScript风格指南（）</a>
      </li>
    
      <li>
        <a href="/2017/09/20/webpack从入门到真实项目配置/">webpack：从入门到真实项目配置</a>
      </li>
    
      <li>
        <a href="/2017/09/11/js 的正则表达式/">js 的正则表达式</a>
      </li>
    
      <li>
        <a href="/2017/09/07/剖析Vue原理&amp;实现双向绑定MVVM/">剖析Vue原理&amp;实现双向绑定MVVM</a>
      </li>
    
  </ul>
</div>


  
<div class="widget tag">
  <h3 class="title">Kategorien</h3>
  <ul class="entry">
  
    <li><a href="/categories/AJAX/">AJAX</a><small>1</small></li>
  
    <li><a href="/categories/AngularJS/">AngularJS</a><small>7</small></li>
  
    <li><a href="/categories/CSS3/">CSS3</a><small>1</small></li>
  
    <li><a href="/categories/ES6/">ES6</a><small>1</small></li>
  
    <li><a href="/categories/VueJS/">VueJS</a><small>9</small></li>
  
    <li><a href="/categories/eslint/">eslint</a><small>1</small></li>
  
    <li><a href="/categories/javascript/">javascript</a><small>3</small></li>
  
    <li><a href="/categories/webpack/">webpack</a><small>1</small></li>
  
    <li><a href="/categories/双向数据绑定/">双向数据绑定</a><small>1</small></li>
  
    <li><a href="/categories/数据交互/">数据交互</a><small>1</small></li>
  
    <li><a href="/categories/构建工具/">构建工具</a><small>1</small></li>
  
    <li><a href="/categories/正则表达式/">正则表达式</a><small>1</small></li>
  
    <li><a href="/categories/油田/">油田</a><small>1</small></li>
  
  </ul>
</div>


  
<div class="widget tagcloud">
  <h3 class="title">Tag-Cloud</h3>
  <div class="entry">
    <a href="/tags/AJAX/" style="font-size: 10px;">AJAX</a> <a href="/tags/AngularJS特性/" style="font-size: 10px;">AngularJS特性</a> <a href="/tags/CSS3/" style="font-size: 10px;">CSS3</a> <a href="/tags/ES6语法/" style="font-size: 10px;">ES6语法</a> <a href="/tags/JavaScript/" style="font-size: 12.5px;">JavaScript</a> <a href="/tags/Session/" style="font-size: 10px;">Session</a> <a href="/tags/Token/" style="font-size: 10px;">Token</a> <a href="/tags/Vuejs/" style="font-size: 17.5px;">Vuejs</a> <a href="/tags/Vue事件处理/" style="font-size: 10px;">Vue事件处理</a> <a href="/tags/Vue列表渲染及条件渲染/" style="font-size: 10px;">Vue列表渲染及条件渲染</a> <a href="/tags/Vue实例详解，Vue生命周期/" style="font-size: 10px;">Vue实例详解，Vue生命周期</a> <a href="/tags/Vue的入门简介/" style="font-size: 10px;">Vue的入门简介</a> <a href="/tags/Vue的数据绑定/" style="font-size: 10px;">Vue的数据绑定</a> <a href="/tags/Vue组件化/" style="font-size: 10px;">Vue组件化</a> <a href="/tags/Vue组件间通信/" style="font-size: 10px;">Vue组件间通信</a> <a href="/tags/Vue综合实战项目/" style="font-size: 10px;">Vue综合实战项目</a> <a href="/tags/Vue路由/" style="font-size: 10px;">Vue路由</a> <a href="/tags/angularjs/" style="font-size: 15px;">angularjs</a> <a href="/tags/angular介绍/" style="font-size: 10px;">angular介绍</a> <a href="/tags/angular服务/" style="font-size: 10px;">angular服务</a> <a href="/tags/angular路由/" style="font-size: 10px;">angular路由</a> <a href="/tags/angular过滤器/" style="font-size: 10px;">angular过滤器</a> <a href="/tags/cookie/" style="font-size: 10px;">cookie</a> <a href="/tags/eslint/" style="font-size: 10px;">eslint</a> <a href="/tags/gulp/" style="font-size: 10px;">gulp</a> <a href="/tags/javaScript指南/" style="font-size: 10px;">javaScript指南</a> <a href="/tags/javascript/" style="font-size: 10px;">javascript</a> <a href="/tags/js对象继承方式/" style="font-size: 10px;">js对象继承方式</a> <a href="/tags/requirejs/" style="font-size: 10px;">requirejs</a> <a href="/tags/seajs/" style="font-size: 10px;">seajs</a> <a href="/tags/webpack/" style="font-size: 10px;">webpack</a> <a href="/tags/任丘/" style="font-size: 10px;">任丘</a> <a href="/tags/前端构建工具/" style="font-size: 12.5px;">前端构建工具</a> <a href="/tags/前端框架/" style="font-size: 20px;">前端框架</a> <a href="/tags/前端框架，angular指令/" style="font-size: 10px;">前端框架，angular指令</a> <a href="/tags/前端模块化/" style="font-size: 10px;">前端模块化</a> <a href="/tags/前端规范工具/" style="font-size: 10px;">前端规范工具</a> <a href="/tags/双向数据绑定/" style="font-size: 10px;">双向数据绑定</a> <a href="/tags/对象原型/" style="font-size: 10px;">对象原型</a> <a href="/tags/打包压缩工具/" style="font-size: 10px;">打包压缩工具</a> <a href="/tags/正则表达式/" style="font-size: 12.5px;">正则表达式</a> <a href="/tags/跨域，前后端数据交互/" style="font-size: 10px;">跨域，前后端数据交互</a>
  </div>
</div>

</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  
  &copy; 2017 蒙长圆
  
</div>
<div class="clearfix"></div></footer>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>



</body>
</html>

